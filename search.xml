<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Learn Swift - Section Three ç±»ä¸ç»“æ„ä½“]]></title>
      <url>http://koalahl.github.io/2016/04/26/Learn-Swift-Section-Three/</url>
      <content type="html"><![CDATA[<p>ç±»ä¸ç»“æ„ä½“çš„å…±åŒç‚¹ï¼š</p>
<ul>
<li>å®šä¹‰å±æ€§ç”¨äºå­˜å‚¨å€¼</li>
<li>å®šä¹‰æ–¹æ³•ç”¨äºæä¾›åŠŸèƒ½</li>
<li>å®šä¹‰é™„å±è„šæœ¬ç”¨äºè®¿é—®å€¼</li>
<li>å®šä¹‰æ„é€ å™¨ç”¨äºç”Ÿæˆåˆå§‹åŒ–å€¼</li>
<li>é€šè¿‡æ‰©å±•ä»¥å¢åŠ é»˜è®¤å®ç°çš„åŠŸèƒ½</li>
<li>å®ç°åè®®ä»¥æä¾›æŸç§æ ‡å‡†åŠŸèƒ½</li>
</ul>
<p>ä¸ç»“æ„ä½“ç›¸æ¯”ï¼Œç±»è¿˜æœ‰å¦‚ä¸‹çš„é™„åŠ åŠŸèƒ½ï¼š</p>
<ul>
<li>ç»§æ‰¿å…è®¸ä¸€ä¸ªç±»ç»§æ‰¿å¦ä¸€ä¸ªç±»çš„ç‰¹å¾</li>
<li>ç±»å‹è½¬æ¢å…è®¸åœ¨è¿è¡Œæ—¶æ£€æŸ¥å’Œè§£é‡Šä¸€ä¸ªç±»å®ä¾‹çš„ç±»å‹</li>
<li>è§£æ„å™¨å…è®¸ä¸€ä¸ªç±»å®ä¾‹é‡Šæ”¾ä»»ä½•å…¶æ‰€è¢«åˆ†é…çš„èµ„æº</li>
<li>å¼•ç”¨è®¡æ•°å…è®¸å¯¹ä¸€ä¸ªç±»çš„å¤šæ¬¡å¼•ç”¨<a id="more"></a>
</li>
</ul>
<p>æ›´å¤šä¿¡æ¯è¯·å‚è§ç»§æ‰¿ï¼Œç±»å‹è½¬æ¢ï¼Œææ„è¿‡ç¨‹ï¼Œå’Œè‡ªåŠ¨å¼•ç”¨è®¡æ•°ã€‚</p>
<p>æ³¨æ„</p>
<ul>
<li>ç»“æ„ä½“æ€»æ˜¯é€šè¿‡è¢«å¤åˆ¶çš„æ–¹å¼åœ¨ä»£ç ä¸­ä¼ é€’ï¼Œä¸ä½¿ç”¨å¼•ç”¨è®¡æ•°ã€‚</li>
</ul>
<p>//å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹<br>å€¼ç±»å‹è¢«èµ‹äºˆç»™ä¸€ä¸ªå˜é‡ã€å¸¸é‡æˆ–è€…è¢«ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå…¶å€¼ä¼šè¢«æ‹·è´ã€‚</p>
<p>åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»å¤§é‡ä½¿ç”¨äº†å€¼ç±»å‹ã€‚å®é™…ä¸Šï¼Œåœ¨ Swift ä¸­ï¼Œæ‰€æœ‰çš„åŸºæœ¬ç±»å‹ï¼šæ•´æ•°ï¼ˆIntegerï¼‰ã€æµ®ç‚¹æ•°ï¼ˆfloating-pointï¼‰ã€å¸ƒå°”å€¼ï¼ˆBooleanï¼‰ã€å­—ç¬¦ä¸²ï¼ˆstring)ã€æ•°ç»„ï¼ˆarrayï¼‰å’Œå­—å…¸ï¼ˆdictionaryï¼‰ï¼Œéƒ½æ˜¯å€¼ç±»å‹ï¼Œå¹¶ä¸”åœ¨åº•å±‚éƒ½æ˜¯ä»¥ç»“æ„ä½“çš„å½¢å¼æ‰€å®ç°ã€‚</p>
<p>åœ¨ Swift ä¸­ï¼Œæ‰€æœ‰çš„ç»“æ„ä½“å’Œæšä¸¾ç±»å‹éƒ½æ˜¯å€¼ç±»å‹ã€‚è¿™æ„å‘³ç€å®ƒä»¬çš„å®ä¾‹ï¼Œä»¥åŠå®ä¾‹ä¸­æ‰€åŒ…å«çš„ä»»ä½•å€¼ç±»å‹å±æ€§ï¼Œåœ¨ä»£ç ä¸­ä¼ é€’çš„æ—¶å€™éƒ½ä¼šè¢«å¤åˆ¶ã€‚</p>
<p>â€œä¸å€¼ç±»å‹ä¸åŒï¼Œå¼•ç”¨ç±»å‹åœ¨è¢«èµ‹äºˆåˆ°ä¸€ä¸ªå˜é‡ã€å¸¸é‡æˆ–è€…è¢«ä¼ é€’åˆ°ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå…¶å€¼ä¸ä¼šè¢«æ‹·è´ã€‚å› æ­¤ï¼Œå¼•ç”¨çš„æ˜¯å·²å­˜åœ¨çš„å®ä¾‹æœ¬èº«è€Œä¸æ˜¯å…¶æ‹·è´ã€‚â€</p>
<p>var marray = [â€œloplâ€,â€liuâ€,â€hanâ€]<br>func modifyArray()  {<br>    var saray = marray<br>    saray.removeAtIndex(2)<br>}<br>modifyArray()<br>marray//å¹¶æ²¡æœ‰å˜ï¼Œè¯´æ˜æ˜¯å€¼æ‹·è´</p>
<p>//å°†ç»“æ„ä½“å®ä¾‹èµ‹å€¼ç»™ä¸€ä¸ªå¸¸é‡ï¼Œåˆ™æ— æ³•ä¿®æ”¹ç»“æ„ä½“ä¸­çš„å±æ€§ï¼Œå³ä½¿å±æ€§æ˜¯å˜é‡ã€‚<br>struct Cars {<br>    var name = â€œâ€</p>
<p>}<br>let car = Cars()<br>car.name = â€œAudiâ€<br>//è€Œç±»åˆ™å¯ä»¥ä¿®æ”¹ï¼Œå› ä¸ºç±»æ˜¯å¼•ç”¨ç±»å‹ã€‚<br>class CreateNewLife{<br>    var name = â€œâ€<br>}<br>class Animals {<br>    var kind = â€œâ€<br>    let planet = â€œEarthâ€<br>    lazy var createNewLife = CreateNewLife()<br>}<br>let life = CreateNewLife()<br>let anAnimal = Animals()<br>anAnimal.kind = â€œHumanâ€<br>print(anAnimal,life)<br>if life === anAnimal {<br>    print(â€œsame classâ€)<br>}else{<br>    print(â€œDifferent classâ€)<br>}<br>print(anAnimal.createNewLife.name)//è¿™æ—¶CreateNewLifeå®ä¾‹æ‰ä¼šè¢«åˆ›å»º<br>anAnimal.createNewLife.name = â€œlivenâ€<br>print(anAnimal.kind,anAnimal.createNewLife.name)</p>
<p>//ç»“æ„ä½“å’Œç±»ä¸­çš„å±æ€§å®šä¹‰-getterå’Œsetter<br>struct Point{<br>    var x = 0.0,y = 0.0<br>}<br>struct Size {<br>    var width = 0.0,height = 0.0<br>}<br>struct Rect {<br>    var origin = Point()<br>    var size   = Size()<br>    var center:Point{//è®¡ç®—å±æ€§:å³å†™äº†getæˆ–setçš„å±æ€§ã€‚å¦‚æœåªæœ‰getï¼Œå°±æ˜¯åªè¯»å±æ€§<br>        get{<br>            let centerX = origin.x + size.width/2<br>            let centerY = origin.y + size.height/2<br>            return Point(x: centerX, y: centerY)<br>        }<br>        set(newCenter){<br>            origin.x = newCenter.x - size.width/2<br>            origin.y = newCenter.y - size.height/2<br>        }<br>    }<br>    var arcPoint:Point{//å±æ€§è§‚å¯Ÿå™¨didSet,willSet<br>        willSet(newValue){//ä¼šå°†æ–°çš„å€¼ä¼ å…¥<br>            print(â€œwill set arcPoint (newValue)â€)<br>        }<br>        didSet(oldValue){//ä¼šå°†æ—§çš„å€¼ä¼ å…¥<br>            //arcPoint = Point(x: 8, y: 9)<br>            print(â€œdid set arcPoint (arcPoint) (oldValue)â€)<br>        }<br>    }<br>    static var name = â€œmy rectâ€//Type propertyç±»å‹å±æ€§</p>
<pre><code><span class="comment">//å€¼ç±»å‹å±æ€§ä¸€èˆ¬ä¸èƒ½åœ¨å®ƒè‡ªå·±çš„å®ä¾‹æ–¹æ³•ä¸­ä¿®æ”¹ï¼›å¦‚æœéè¦ä¿®æ”¹ï¼Œéœ€è¦åŠ å…³é”®å­—mutating</span>
<span class="keyword">mutating</span> <span class="func"><span class="keyword">func</span> <span class="title">bigger</span><span class="params">(x:Double,y:Double)</span></span> {
    size.width  += x
    size.height += y
}
</code></pre><p>}</p>
<p>Rect.name<br>Rect.name = â€œxxxxâ€<br>Rect.name</p>
<p>var rect = Rect(origin: Point(x: 10,y: 10), size: Size(width: 20,height: 30), arcPoint: Point(x: 1, y: 1))<br>print(rect.arcPoint)<br>rect.arcPoint = Point(x: 3, y: 4)<br>print(rect.arcPoint)</p>
<p>var rect2 = rect<br>rect2.arcPoint = Point(x: 6, y: 6)<br>print(rect.arcPoint,rect2.arcPoint)</p>
<p>rect.bigger(20, y: 20)<br>print(rect.size)<br>class SomeClass {<br>    class var overrideProperty:Int{//getçœç•¥äº†ã€‚classå…³é”®å­—è¡¨ç¤ºé‡å†™çˆ¶ç±»çš„getterå®ç°<br>        return 10<br>    }<br>}</p>
<p>//æ–¹æ³•</p>
<p>struct LevelTraker {<br>    static var highestUnlockedLevel = 1<br>    static func unlockLevel(level:Int){<br>        if (level == highestUnlockedLevel + 1) {highestUnlockedLevel = level}<br>    }<br>    static func levelIsUnlocked(level:Int)-&gt;Bool{<br>        return level &lt;= highestUnlockedLevel<br>    }<br>    var currentLevel = 1<br>    mutating func advanceLevel(level:Int)-&gt;Bool{<br>        if LevelTraker.levelIsUnlocked(level) {<br>            currentLevel = level<br>            return true<br>        }else{<br>            return false<br>        }<br>    }<br>}</p>
<p>class Player {<br>    var traker = LevelTraker()<br>    var playerName:String<br>    func completeLevel(level:Int) -&gt;Bool{<br>        LevelTraker.unlockLevel(level+1)<br>        if traker.advanceLevel(level+1){</p>
<pre><code>        <span class="keyword">return</span> <span class="literal">true</span>
    }<span class="keyword">else</span>{
        <span class="built_in">print</span>(<span class="string">"Level <span class="subst">\(level)</span> hasn't been unlocked"</span>)
        <span class="keyword">return</span> <span class="literal">false</span>
    }
}
<span class="keyword">init</span>(name:<span class="type">String</span>){
    playerName = name
}
</code></pre><p>}<br>var level111 = LevelTraker()<br>var level121 = LevelTraker()<br>level121.currentLevel = 2<br>print(level111.currentLevel, level121.currentLevel)</p>
<p>var player = Player(name:â€hanâ€)<br>player.traker.currentLevel<br>player.completeLevel(1)<br>player.traker.currentLevel<br>LevelTraker.highestUnlockedLevel<br>player.completeLevel(5)</p>
<p>//æ„é€ è¿‡ç¨‹<br>class Cars{<br>    var brand:String<br>    var usage:String<br>    //æ„é€ å‡½æ•°<br>    init(){<br>        brand = â€œBMWâ€<br>        usage = â€œFamilyâ€<br>    }<br>    init(_brand:String,_usage:String){<br>        brand = _brand<br>        usage = _usage<br>    }<br>}</p>
<p>let audi = Cars(_brand: â€œAudiâ€, _usage: â€œSportsâ€)<br>print(audi.brand,audi.usage)<br>let car2 = Cars()<br>print(car2.brand,car2.usage)</p>
<p>//å½“å±æ€§æœ‰é»˜è®¤å€¼ï¼Œä¸”æ²¡æœ‰æ„é€ æ–¹æ³•æ—¶ï¼Œç»“æ„ä½“å’Œç±»æ‹¥æœ‰é»˜è®¤æ„é€ æ–¹æ³•ã€‚ä½†æ˜¯ç»“æ„ä½“å¯ä»¥æœ‰å¸¦å±æ€§å‚æ•°çš„é»˜è®¤æ„é€ æ–¹æ³•ï¼ˆé€ä¸€æˆå‘˜æ„é€ å™¨ï¼‰ï¼Œè€Œç±»æ²¡æœ‰ã€‚<br>struct People {<br>    var name:String?<br>    var sex:String?<br>}<br>class Books {<br>    var type:String?<br>    var category:String?<br>    var available = true<br>}<br>let p = People()<br>let semdsd = People(name: â€œhanâ€, sex: â€œfamaleâ€)<br>let book   = Books()<br>//var book2  = Books(type:â€epubâ€,category:â€Computerâ€,available:true)</p>
<p>//ææ„è¿‡ç¨‹<br>/**</p>
<ul>
<li><p>ææ„å™¨åªé€‚ç”¨äºç±»ç±»å‹ï¼Œä¸èƒ½ç”¨äºç»“æ„ä½“ã€‚ææ„å™¨ç”¨deinitå…³é”®å­—ã€‚<br>*/<br>class Telephones {<br>var type:String?<br>var category:String?<br>var available = true</p>
<p>init() {</p>
<pre><code><span class="comment">//</span>
</code></pre><p>}<br>deinit{</p>
<pre><code><span class="comment">//ææ„ä»£ç ã€‚ã€‚ã€‚</span>
<span class="function"><span class="title">print</span><span class="params">(<span class="string">"\(type)"</span>)</span></span>
available = false
</code></pre><p>}<br>}</p>
</li>
</ul>
<p>/<em><br> ææ„è¿‡ç¨‹ä¼šåœ¨ARCå›æ”¶å®ä¾‹æ—¶è¢«ç³»ç»Ÿè°ƒç”¨ï¼Œä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚
 </em>/</p>
<p>//ç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨<br>//è§£å†³æ–¹å¼ï¼š<br>//1.ä½¿ç”¨weakå…³é”®å­—ï¼Œå¼±å¼•ç”¨<br>//2.ä½¿ç”¨unownedï¼Œæ— ä¸»å¼•ç”¨</p>
<p>//è§£å†³é—­åŒ…å¼•èµ·çš„å¾ªç¯å¼•ç”¨â€“å®šä¹‰æ•è·åˆ—è¡¨<br>protocol SellProducts{<br>    func sellProducts(product:String)<br>}</p>
<p>class Person {<br>    var name:String<br>    weak var delegate:Seller?<br>    lazy var someClosure:(Int,String)-&gt;String = {<br>        //åœ¨é—­åŒ…ä¸­å°†selfä¿®é¥°ä¸ºæ— ä¸»å¼•ç”¨ã€‚å°†delegate ä¿®é¥°ä¸º å¼±å¼•ç”¨<br>        [unowned self,weak delegate = self.delegate!]//æ•è·åˆ—è¡¨<br>        (index:Int,strToProcess:String)-&gt;String in</p>
<pre><code>    <span class="keyword">return</span> <span class="string">"<span class="subst">\(<span class="keyword">self</span>.name)</span>,<span class="subst">\(<span class="keyword">self</span>.delegate)</span>,<span class="subst">\(delegate)</span>"</span>
}
<span class="keyword">init</span>(name:<span class="type">String</span>,delegate:<span class="type">Seller</span>?){
    <span class="keyword">self</span>.name = name;
    <span class="keyword">self</span>.delegate = delegate;
}

<span class="func"><span class="keyword">func</span> <span class="title">giveSellerProducts</span><span class="params">(product:String )</span></span> -&gt; <span class="type">Bool</span> {

    <span class="keyword">self</span>.delegate?.sellProducts(product)
    <span class="keyword">return</span> <span class="literal">true</span>
}
</code></pre><p>}</p>
<p>class Seller : SellProducts{<br>    var product:String?<br>    func sellProducts( product: String) {<br>        self.product = product<br>    }<br>}<br>let seller = Seller()<br>var person = Person (name: â€œHanliuâ€, delegate: seller)</p>
<p>//åˆšå¼€å§‹selleræ˜¯æ²¡æœ‰å•†å“çš„ï¼Œè¦ç­‰åˆ°Personç»™seller<br>print(seller.product)<br>//personå‘Šè¯‰sellerï¼Œå¸®æˆ‘å–è‹¹æœ<br>person.giveSellerProducts(â€œappleâ€)<br>//ç°åœ¨selleræ‰‹ä¸­å°±æœ‰äº†å•†å“äº†<br>print(seller.product!)</p>
<p>person.someClosure(1,â€hahaâ€)</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Learn Swift - Section Two é›†åˆç±»å‹å’Œæšä¸¾]]></title>
      <url>http://koalahl.github.io/2016/04/26/Learn-Swift-Section-Two/</url>
      <content type="html"><![CDATA[<p>Arraã€Dictionaryã€Setå’Œæšä¸¾</p>
<a id="more"></a>
<p>//Arrayçš„map()æ–¹æ³•<br>let digitNames = [<br>    0: â€œZeroâ€, 1: â€œOneâ€, 2: â€œTwoâ€,   3: â€œThreeâ€, 4: â€œFourâ€,<br>    5: â€œFiveâ€, 6: â€œSixâ€, 7: â€œSevenâ€, 8: â€œEightâ€, 9: â€œNineâ€<br>]<br>let numbers = [132,11,87,90,49,87,22,29,5,10,87]<br>//mapæ–¹æ³•ä¼šè¯»å–æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œ<br>let strings = numbers.map { (element) -&gt; String in<br>    var output = â€œâ€<br>    var number = element<br>    while number &gt; 0 {<br>        output = digitNames[number % 10]! + output<br>        number /= 10<br>    }<br>    return output<br>}<br>//æŠŠæ¯ä¸ªå…ƒç´ éƒ½+1<br>let so = numbers.map{(element)-&gt;Int in<br>    return element + 1<br>}<br>let lo = numbers.flatMap{(element)-&gt;Int in<br>    return element + 3</p>
<p>}<br>let split1 = numbers.split(70)<br>let split2 = numbers.split(87)<br>let split3 = numbers.split(87, maxSplit: 1, allowEmptySlices: true)<br>let split4 = numbers.split(87, maxSplit: 6, allowEmptySlices: true)<br>let split5 = numbers.split(87, maxSplit: 6, allowEmptySlices: false)</p>
<p>//è¿‡æ»¤å‡ºæ»¡è¶³æ¡ä»¶çš„å­åºåˆ—ã€‚æ¡ä»¶ç”±é—­åŒ…å®šä¹‰<br>numbers.filter { (element) -&gt; Bool in<br>    return element &gt; 50<br>}<br>numbers.filter{(element) in element &gt; 50}<br>numbers.filter{ $0 &gt; 50}</p>
<p>let scores = [â€œxiaomingâ€:66,â€liâ€:89,â€hanâ€:78,â€mingâ€:100,â€xiagâ€:34]<br>scores.filter { (name,score) in score &gt; 60}</p>
<p>//â€œå°†é—­åŒ…æ ‡æ³¨ä¸º@noescapeä½¿ä½ èƒ½åœ¨é—­åŒ…ä¸­éšå¼åœ°å¼•ç”¨selfâ€<br>func functionWithNoescapeClosure(@noescape closure:()-&gt;Void){<br>    closure()<br>}<br>var completionHandlers:[() -&gt; Void] = []<br>func functionWithEscapeClosure(completionHandler:()-&gt;Void){<br>    completionHandler()<br>    completionHandlers.append(completionHandler)<br>}</p>
<p>class SomeClass {<br>    var x = 200<br>    func doSomething(){</p>
<pre><code>    functionWithEscapeClosure({self.x = <span class="number">100</span>})

    functionWithNoescapeClosure({x = <span class="number">300</span>})<span class="comment">//éšå¼å¼•ç”¨self</span>

}
</code></pre><p>}<br>let some = SomeClass()<br>some.doSomething()<br>print(some.x)</p>
<p>completionHandlers.first?()<br>print(some.x)</p>
<p>//è‡ªåŠ¨é—­åŒ… ä½¿ç”¨@autoclosureï¼Œå°±å¯ä»¥ä¸ç”¨åŠ é—­åŒ…çš„{}<br>var names = [â€œcharisâ€,â€levisâ€,â€luosâ€,â€dericâ€,â€htomeâ€]<br>let customerProvider = {names.removeAtIndex(0)}//æ³¨æ„ç±»å‹æ˜¯()-&gt;String<br>func customName(@autoclosure customerProvider:()-&gt;String)  {<br>    print(â€œcostomerâ€™s name is (customerProvider())â€)<br>}</p>
<p>customName(names.removeAtIndex(0))//é—­åŒ…ä½“ä¸éœ€è¦åŠ {}ï¼Œå°±å¥½åƒæ˜¯å‚æ•°ä¸€æ ·ã€‚</p>
<p>//æšä¸¾-ä¸€ç­‰å…¬æ°‘ ä¸ç±»classä¸€æ ·<br>enum Compose{<br>    case North<br>    case South<br>    case West<br>    case East<br>}<br>//æˆå‘˜å€¼çš„ç±»å‹ä¸ºæšä¸¾çš„åå­—Compose<br>let directionToHead = Compose.East</p>
<p>//å¸¦æœ‰å…³è”å€¼çš„æšä¸¾<br>enum Barcode {<br>    case UPCA(Int,Int,Int)//å…³è”äº†Intç±»å‹çš„å€¼<br>    case QRCode(String)//å…³è”äº†Stringç±»å‹çš„å€¼<br>}</p>
<p>var productorCode = Barcode.QRCode(â€œkasdjfiwoeklfâ€)</p>
<p>productorCode = .UPCA(2,5,1)</p>
<p>switch productorCode{<br>    case let .UPCA(first,second,third):<br>        print(â€œ(first) (second) (third)â€)<br>    case var .QRCode(code):<br>        print(â€œcode is (code)â€)<br>}</p>
<p>//åŸå§‹å€¼ Raw Values<br>enum ASCII:Character{//å¸¦æœ‰åˆå§‹ç±»å‹çš„æšä¸¾<br>    case Tab = â€œ\tâ€<br>    case Return = â€œ\râ€<br>    case changeLine = â€œ\nâ€<br>}</p>
<p>//å…³è”å€¼å¯ä»¥ä½¿æšä¸¾çš„åµŒå¥—æˆä¸ºå¯èƒ½.å¦‚æœåµŒå¥—ï¼Œåˆ™éœ€è¦æ·»åŠ indirectå…³é”®å­—<br>enum Add{<br>    case Number(Int)<br>    indirect case Addition(Add,Add)<br>}<br>func evaluate(add:Add) -&gt; Int {<br>    switch add {<br>    case .Number(let i):<br>        return i<br>    case .Addition(let left, let right):<br>        return evaluate(left) + evaluate(right)<br>    }<br>}</p>
<p>let a = Add.Number(10)<br>let b = Add.Number(2)<br>let c = Add.Addition(a,b)</p>
<p>evaluate(a)<br>evaluate(c)</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Learn Swift - Section One åŸºç¡€çŸ¥è¯†]]></title>
      <url>http://koalahl.github.io/2016/04/26/Learn-Swift-Section-One/</url>
      <content type="html"><![CDATA[<p>import UIKit</p>
<p>var str = â€œHello, playgroundâ€</p>
<p>//å¸¸é‡å’Œå˜é‡<br>let maxLoginCount = 10<br>var currentLoginCount = 5</p>
<p>//ç±»å‹æ ‡æ³¨<br>var message = â€œwelcomeâ€//ç±»å‹æ¨æ–­ä¸ºString<br>var messageWithTypeAnnotation:String</p>
<a id="more"></a>
<p>message = â€œwelcome hereâ€<br>messageWithTypeAnnotation = â€œwelcome goâ€</p>
<p>print(â€œBig world (message)â€)//(message) å­—ç¬¦ä¸²è½¬ä¹‰<br>print(â€œBig worldâ€, message)//</p>
<p>let newString = â€œBig world â€œ  + â€œ(message) â€œ + message<br>print(newString)<br>//å¤šè¡Œè¯­å¥ç”¨åˆ†å·<br>let cat = â€œğŸ±â€; print(cat)</p>
<p>let a:Int32 = 10<br>let uintb:UInt8 = 255</p>
<p>//ç±»å‹åˆ«å<br>typealias SLInt = UInt64<br>let i:SLInt<br>var maxInt64 = SLInt.max</p>
<p>//å…ƒç»„<br>let HttpErrorCode  = (404,â€NotFoundâ€)<br>print(HttpErrorCode)</p>
<p>typealias HttpStateCode = (Int32,String)<br>var errorMsg = HttpErrorCode<br>var normal: HttpStateCode = (200,â€OKâ€)<br>print(normal)</p>
<p>let (stateCode,stateMsg) = HttpErrorCode<br>print(â€œHTTP code is (stateCode)â€)<br>//é€šè¿‡ä¸‹æ ‡è®¿é—®å…ƒç»„å…ƒç´ <br>print(HttpErrorCode.1)</p>
<p>//éšå¼è§£æå¯é€‰ç±»å‹</p>
<p>let possibleString:String? = â€œan optional stringâ€<br>let forcedString:String = possibleString!</p>
<p>let possibleString2:String! = â€œan implicitly optional stirngâ€<br>let forcedString2:String = possibleString2</p>
<p>//å¯é€‰ç»‘å®š<br>if let bingStr = possibleString2{<br>    print(bingStr)<br>}</p>
<p>//é”™è¯¯å¤„ç†</p>
<p>func canThrowAnError() throws{</p>
<p>}</p>
<p>func makeASanwich() -&gt; Bool {<br>    return false<br>}<br>func buyNewDishes() -&gt; Void {</p>
<p>}</p>
<p>do{<br>    try canThrowAnError()<br>    makeASanwich()<br>}catch Error.MissingNeededMetarail{<br>    buyNewDishes()<br>}</p>
<p>//æ–­è¨€<br>let num = 4<br>assert(num&gt;0, â€œaå¤§äº0â€)</p>
<p>//ç©ºåˆè¿ç®—ç¬¦ ??<br>let defaultColor:String = â€œredâ€<br>var userDefinedColor:String?</p>
<p>//userDefinedColor = â€œorangeâ€<br>var currentColorToUse = userDefinedColor ?? defaultColor<br>//ç­‰ä»·äº<br>var currentColorToUse2 = userDefinedColor != nil ? userDefinedColor! : defaultColor</p>
<p>//åŒºé—´è¿ç®—ç¬¦<br>//1.é—­åŒºé—´ (aâ€¦b) åŒ…å«aå’Œb<br>for index in (1â€¦5){<br>    print(index)<br>    print(â€œ(index) <em> 5 = (index </em> 5)â€)<br>}<br>//2.åŠå¼€åŒºé—´ (a..&lt;b)<br>for index in (1..&lt;5){<br>    print(index)<br>    print(â€œ(index) <em> 5 = (index </em> 5)â€)<br>}</p>
<p>//å­—ç¬¦ä¸² String<br>//Stringæ˜¯å€¼ç±»å‹<br>for charactor in â€œYou R AğŸ¶â€.characters{<br>    print(charactor)<br>}<br>//ç‹¬ç«‹çš„å­—ç¬¦å¸¸é‡æˆ–å˜é‡<br>let singleCharactor:Character = â€œ!â€</p>
<p>//é€šè¿‡å€¼ç±»å‹ä¸ºcharacterçš„æ•°ç»„æ¥åˆ›å»ºå­—ç¬¦ä¸²<br>let characters:[Character] = [â€œcâ€,â€aâ€,â€tâ€,â€ğŸ±â€]<br>let catString = String(characters)<br>print(catString)</p>
<p>//æ’å€¼è¿ç®—  åæ–œæ \<br>let multiplier = 4<br>print(â€œ(multiplier) times 5.12 =  (Double(multiplier) * 5.12)â€)<br>print(â€œ\r messageâ€+â€ \u{E9}â€)</p>
<p>//Unicode<br>let ccc1:Character = â€œ\u{65}â€<br>let ccc2:Character = â€œ\u{65}\u{301}â€</p>
<p>print(message)<br>message.startIndex<br>message.endIndex<br>//å‰ä¸€ä¸ªindex<br>message.endIndex.predecessor()<br>//åä¸€ä¸ªindex<br>message.startIndex.successor()<br>//ä»starIndexå¼€å§‹ åé¢çš„ç¬¬iä¸ªindex<br>let xx = message.startIndex.advancedBy(4)<br>message.removeAtIndex(message.startIndex.advancedBy(4))<br>print(message)<br>//indices è·å–å­—ç¬¦ä¸²çš„å…¨éƒ¨ç´¢å¼• ã€‚ç©ºæ ¼ä¸ç®—ã€‚ã€‚ã€‚<br>for index in message.characters.indices{<br>    print(â€œ(message[index])â€)<br>}</p>
<p>message.insert(â€œuâ€, atIndex: xx)</p>
<p>message = â€œhttp:â€+message<br>print(message)<br>//å‰åç¼€<br>var hasPrefix = message.hasPrefix(â€œhttpâ€)<br>var hasSuffix = message.hasSuffix(â€œpngâ€)</p>
<p>//é›†åˆç±»å‹ï¼šæ•°ç»„Array é›†åˆSet å­—å…¸Dictionary</p>
<p>//ä¸å¯å˜å’Œå¯å˜<br>/<em>â€œå¦‚æœåˆ›å»ºä¸€ä¸ªArraysã€Setsæˆ–Dictionarieså¹¶ä¸”æŠŠå®ƒåˆ†é…æˆä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªé›†åˆå°†ä¼šæ˜¯å¯å˜çš„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºä¹‹åæ·»åŠ æ›´å¤šæˆ–ç§»é™¤å·²å­˜åœ¨çš„æ•°æ®é¡¹æ¥æ”¹å˜è¿™ä¸ªé›†åˆçš„å¤§å°ã€‚å¦‚æœæˆ‘ä»¬æŠŠArraysã€Setsæˆ–Dictionariesåˆ†é…æˆå¸¸é‡ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸å¯å˜çš„ï¼Œå®ƒçš„å¤§å°ä¸èƒ½è¢«æ”¹å˜ã€‚â€
 </em>/<br>let immutableArray = <a href="count:1,repeatedValue:0" target="_blank" rel="external">Int</a><br>var mutableArray   = <a href="">Int</a></p>
<p>let strArray    = [â€œworldâ€]</p>
<p>mutableArray.append(1)<br>var array1:[String] = Array()<br>array1.append(â€œhelloâ€)<br>array1.appendContentsOf(strArray)<br>array1.insert(â€œgogogogâ€, atIndex: 1)<br>array1.count<br>array1.isEmpty</p>
<p>array1[0â€¦1] = [â€œappleâ€,â€pearâ€];<br>array1<br>//æ•°ç»„çš„éå†<br>for item in array1{<br>    print(item)<br>}</p>
<p>for (index,item) in array1.enumerate(){<br>    print(item,array1[index])<br>}</p>
<p>//é›†åˆ<br>var asset = Set<string>()<br>asset.count<br>asset.insert(â€œhash stringâ€)<br>asset.remove(â€œhashâ€)<br>//setç±»å‹å¿…é¡»æ˜¾å¼å£°æ˜,å…·ä½“å…ƒç´ ç±»å‹å¯ä»¥çœç•¥<br>let asset2:Set<character> = [â€œaâ€]<br>let asset3:Set = [â€œaâ€,â€vâ€]<br>asset2.hashValue == asset3.hashValue<br>asset.hashValue == asset2.hashValue</character></string></p>
<p>let asset4 = Set.init(arrayLiteral: â€œaâ€,â€bâ€,â€câ€)<br>let asset5 = Set.init(array1)<br>//é›†åˆæ“ä½œï¼šäº¤é›†ã€å¤–é›†ã€åˆé›†,å‡é›†</p>
<p>asset3.intersect(asset4)<br>asset3.exclusiveOr(asset4)<br>asset3.union(asset4)<br>asset3.subtract(asset4)</p>
<p>asset3 == asset4<br>asset3.isSubsetOf(asset4)<br>asset3.isSupersetOf(asset3)<br>asset3.isStrictSupersetOf(asset3)//æ˜¯å¦æ˜¯è¶…é›†ï¼Œå¹¶ä¸”ä¸æ˜¯åŒä¸€é›†åˆ<br>asset3.isStrictSubsetOf(asset3)//æ˜¯å¦æ˜¯å­é›†ï¼Œå¹¶ä¸”ä¸æ˜¯åŒä¸€é›†åˆ</p>
<p>asset3.isDisjointWith(asset4)//åˆ¤æ–­é›†åˆæ˜¯å¦ä¸å«æœ‰ç›¸åŒçš„å€¼ã€‚falseè¯´æ˜åŒ…å«ç›¸åŒçš„å€¼</p>
<p>//å­—å…¸ Dictionary<key,value><br>var dic1 = Dictionary<int,string>()<br>var dic2 = <a href="">Int:String</a><br>dic1.updateValue(â€œvalueâ€, forKey: 0)//updateValueæ–¹æ³•è¿”å›å€¼æ˜¯è¯¥keyçš„æ—§å€¼<br>dic1.updateValue(â€œnewValueâ€, forKey: 0)<br>print(dic1)<br>dic1[1] = â€œahaoâ€<br>dic1[2] = â€œddddâ€<br>print(dic1)</int,string></key,value></p>
<p>for (key,value) in dic1{<br>    print(key ,value)<br>}</p>
<p>print(dic1.keys.sort())<br>print(dic1.values.sort())</p>
<p>//æ§åˆ¶æµç¨‹</p>
<p>//game<br>let finalSqura = 25<br>var board = <a href="count:finalSqura+1,repeatedValue:0" target="_blank" rel="external">Int</a><br>board[03] = +08; board[06] = +11; board[09] = +09; board[10] = +02<br>board[14] = -10; board[19] = -11; board[22] = -02; board[24] = -08<br>var square = 0<br>var diceRoll = 0</p>
<p>gameLoop:while square != finalSqura{<br>    //if ++diceRoll == 7 { diceRoll = 1 }<br>    switch square + diceRoll {<br>    case finalSqura:<br>        break gameLoop<br>    case let newSquare where newSquare &gt; finalSqura:<br>        coutinue gameLoop<br>    default:<br>        square += diceRoll<br>        square += board[square]<br>    }<br>}<br>print(â€œgame overâ€)</p>
<p>//æ£€æŸ¥APIå¯ç”¨æ€§<br>if #available(iOS 9, *){</p>
<p>}else{</p>
<p>}<br>func checkOSVersion() -&gt; NSString {<br>    //å¿…é¡»åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨ï¼›å¿…é¡»è·Ÿç€elseï¼›å¿…é¡»èƒ½è·³å‡ºelse<br>    guard #available(OSX 10.11, *) else {<br>        return â€œ10.10â€<br>    }<br>    return â€œ10.11â€<br>}</p>
<p>checkOSVersion()</p>
<p>//å‡½æ•°åµŒå¥—<br>func stepForword(input:Int)-&gt;Int{<br>    return input - 1<br>}<br>func stepBackword(input:Int)-&gt;Int{<br>    return input + 1<br>}<br>func chooseStep(value:Int) -&gt; (Int)-&gt;Int {<br>    return value &gt; 0 ? stepForword : stepBackword<br>}<br>func xxxx(tempFunction:(Int)-&gt;Int) -&gt;Int {<br>    return 1<br>}<br>//å¦‚æœæˆ‘å†åŠ ä¸€ä¸ªå‡½æ•°åµŒå¥—<br>func nextStep(tempFunction:((Int)-&gt;Int)-&gt;Int) -&gt; Int{<br>    return 0<br>}<br>let number = 3<br>let myFunction = chooseStep(number)<br>myFunction(number)</p>
<p>let names = [â€œChrisâ€, â€œAlexâ€, â€œEwaâ€, â€œBarryâ€, â€œDaniellaâ€]<br>func absendOrdesend(s1:String,s2:String) -&gt; Bool {<br>    return s1&gt;s2<br>}<br>//ä½¿ç”¨å‡½æ•°çš„è¿”å›å€¼ä½œä¸ºå‚æ•°<br>names.sort()<br>names.sort(absendOrdesend)<br>//é—­åŒ…è¡¨è¾¾å¼</p>
<p>{(parameter:Type)-&gt;ReturnType in</p>
<p>}<br>Objective-Cä¸­çš„block<br>ReturnType ^(parameter){ return }</p>
<p>//ä½¿ç”¨é—­åŒ…çš„è¿”å›å€¼ä½œä¸ºå‚æ•°<br>names.sort({(s1:String,s2:String) -&gt; Bool in<br>        return s1 &gt; s2<br>})</p>
<p>//å› ä¸ºnamesæ•°ç»„å‚æ•°ç±»å‹ç¡®å®šï¼Œæ‰€ä»¥æ ¹æ®ç±»å‹æ¨æ–­,çœç•¥å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹<br>names.sort({s1,s2 in return s1&gt;s2})<br>names.sort({s1,s2 in s1&gt;s2})<br>names.sort({$0&gt;$1})<br>names.sort(&gt;)//æ ¹æ®Stringå¯¹&gt;è¿™ä¸ªç¬¦å·çš„å®šä¹‰æ¨æ–­</p>
<p>//å°¾éšé—­åŒ…<br>//å…ˆå®šä¹‰ä¸€ä¸ªclosure<br>let bigger = {(a:Int,b:Int)-&gt;Bool in<br>    return a&gt;b<br>}<br>//å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…<br>func exchangeNumerWithClosure(bigger:(Int,Int)-&gt;Bool){<br>    if bigger(2,3) {<br>        print(â€œbiggerâ€)<br>    }else{<br>        print(â€œlowerâ€)<br>    }<br>}<br>//å‡½æ•°è°ƒç”¨æ—¶<br>//æ²¡æœ‰ä½¿ç”¨å°¾éšé—­åŒ…<br>//exchangeNumerWithClosure({(a:Int,b:Int)-&gt;Bool in<br>//    return a&gt;b<br>//})</p>
<p>//ä½¿ç”¨å°¾éšé—­åŒ…<br>//exchangeNumerWithClosure(){(a:Int,b:Int)-&gt;Bool in return a&gt;b }<br>exchangeNumerWithClosure(){(a:Int,b:Int) -&gt;Bool in a&gt;b}<br>//åŒç†ï¼Œå°¾éšé—­åŒ…<br>names.sort(){$0&gt;$1}<br>names.sort{$0&gt;$1}//å¦‚æœå‡½æ•°åªéœ€è¦é—­åŒ…è¡¨è¾¾å¼ä¸€ä¸ªå‚æ•°ï¼Œå½“æ‚¨ä½¿ç”¨å°¾éšé—­åŒ…æ—¶,å¯ä»¥çœç•¥()</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æµ…è°ˆiOSä¸­çš„userAgent]]></title>
      <url>http://koalahl.github.io/2016/04/10/%E6%B5%85%E8%B0%88iOS%E4%B8%AD%E7%9A%84userAgent/</url>
      <content type="html"><![CDATA[<p>User-Agentï¼ˆç”¨æˆ·ä»£ç†ï¼‰å­—ç¬¦ä¸²æ˜¯Webæµè§ˆå™¨ç”¨äºå£°æ˜è‡ªèº«å‹å·ç‰ˆæœ¬å¹¶éšHTTPè¯·æ±‚å‘é€ç»™WebæœåŠ¡å™¨çš„å­—ç¬¦ä¸²ï¼Œåœ¨WebæœåŠ¡å™¨ä¸Šå¯ä»¥è·å–åˆ°è¯¥å­—ç¬¦ä¸²ã€‚</p>
<p>åœ¨å…¬å¸äº§å“ä¸­ï¼Œåœ¨userAgentä¸­å¢åŠ äº†NetTypeå­—æ®µï¼Œç”¨äºæ ‡è¯†å®¢æˆ·ç«¯å½“å‰çš„ç½‘ç»œç¯å¢ƒã€‚</p>
<ul>
<li>NetType/WIFI</li>
<li>NetType/3G<br>webæœåŠ¡å™¨ç«¯æ ¹æ®NetTypeç±»å‹åŠ è½½ä¸åŒåˆ†è¾¨ç‡çš„å•†å“å›¾ç‰‡ã€‚æˆ‘ä»¬åªæœ‰ä¸¤ç§ï¼ŒWIFIä¸‹é«˜æ¸…å›¾ï¼ŒéWIFIä½åˆ†è¾¨ç‡å›¾ã€‚</li>
</ul>
<a id="more"></a>
<h3>è·å–WebViewçš„userAgent</h3><br>iOSå®¢æˆ·ç«¯ä¸­è·å–webViewçš„userAgentçš„æ–¹æ³•ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSMutableString</span> *userAgent = [<span class="built_in">NSMutableString</span> stringWithString:[[<span class="built_in">UIWebView</span> new] stringByEvaluatingJavaScriptFromString:<span class="string">@"navigator.userAgent"</span>]];</span><br></pre></td></tr></table></figure><br><br>æ ¹æ®éœ€è¦æ·»åŠ ä¸åŒçš„æ ‡è¯†åˆ°æ–°çš„userAgentä¸­,è¿™é‡Œæ·»åŠ ä¸€ä¸ªWMallæ ‡è¯†ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *newUagent = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@ WMall/%@"</span>, userAgent, [SystemInfo appShortVersion]];</span><br><span class="line"><span class="built_in">NSDictionary</span> *dictionnary = [[<span class="built_in">NSDictionary</span> alloc] initWithObjectsAndKeys:newUagent, <span class="string">@"UserAgent"</span>, <span class="literal">nil</span>];</span><br><span class="line">[[<span class="built_in">NSUserDefaults</span> standardUserDefaults] registerDefaults:dictionnary];</span><br></pre></td></tr></table></figure><br><br>newUagent ä¸º<code>Mozilla/5.0 (iPhone; CPU iPhone OS 9_3 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Mobile/13E230 WMall/3.0</code><br><br><h3>æ ¹æ®ç½‘ç»œç±»å‹è®¾ç½®ä¸åŒçš„NetTypeæ ‡è¯†</h3>

<p>iOSä¸­åˆ¤æ–­ç½‘ç»œçŠ¶æ€ä¸€èˆ¬ç”¨AFNetWorkingä¸­çš„æ–¹æ³•ï¼š<br>åœ¨appDelegateçš„<code>application didFinishLaunchingWithOptions</code>æ–¹æ³•ä¸­å¯åŠ¨ç½‘ç»œçŠ¶æ€ç›‘å¬ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[AFNetworkReachabilityManager sharedManager] startMonitoring];</span><br><span class="line">[[AFNetworkActivityIndicatorManager sharedManager] setEnabled:<span class="literal">YES</span>];</span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨åŸºç±»BaseViewControllerä¸­ç›‘å¬ç½‘ç»œæ›´æ–°é€šçŸ¥<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(networkReachabilityStatusDidChange:) name:AFNetworkingReachabilityDidChangeNotification object:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)networkReachabilityStatusDidChange:(<span class="built_in">NSNotification</span> *)notify&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ç½‘ç»œå˜åŒ–é€šçŸ¥ï¼š%@"</span>,notify<span class="variable">.userInfo</span>[AFNetworkingReachabilityNotificationStatusItem]);</span><br><span class="line">    AFNetworkReachabilityStatus status = [notify<span class="variable">.userInfo</span>[AFNetworkingReachabilityNotificationStatusItem] integerValue];</span><br><span class="line">    <span class="built_in">NSString</span> *net = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">        <span class="keyword">case</span> AFNetworkReachabilityStatusNotReachable:</span><br><span class="line">            net = <span class="string">@"æ— ç½‘ç»œ"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> AFNetworkReachabilityStatusReachableViaWiFi:</span><br><span class="line">            net = <span class="string">@"WIFI"</span>;</span><br><span class="line">            [<span class="keyword">self</span> changeUserAgentWithType:<span class="string">@"WIFI"</span>];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> AFNetworkReachabilityStatusReachableViaWWAN:</span><br><span class="line">            net = <span class="string">@"2G/3G/4G"</span>;</span><br><span class="line">            [<span class="keyword">self</span> changeUserAgentWithType:<span class="string">@"3G"</span>];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            net = <span class="string">@"xxx"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    [Error showError:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"å½“å‰ç½‘ç»œçŠ¶æ€%@"</span>,net]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„å…ˆåˆ¤æ–­userAgentä¸­æ˜¯å¦å­˜åœ¨NetType<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ›´æ–°NetType</span></span><br><span class="line">- (<span class="keyword">void</span>)changeUserAgentWithType:(<span class="built_in">NSString</span> *)type&#123;</span><br><span class="line">    <span class="built_in">NSMutableString</span> *userAgent = [<span class="built_in">NSMutableString</span> stringWithString:[[<span class="built_in">UIWebView</span> new] stringByEvaluatingJavaScriptFromString:<span class="string">@"navigator.userAgent"</span>]];</span><br><span class="line">    <span class="built_in">NSString</span> *newUagent = <span class="literal">nil</span>;</span><br><span class="line">    <span class="built_in">NSString</span> *temp = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">if</span> ([userAgent containsString:<span class="string">@"NetType"</span>]) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([userAgent containsString:<span class="string">@"WIFI"</span>]) &#123;</span><br><span class="line">            temp = <span class="string">@"WIFI"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>([userAgent containsString:<span class="string">@"3G"</span>])&#123;</span><br><span class="line">            temp = <span class="string">@"3G"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        newUagent = [userAgent stringByReplacingOccurrencesOfString:temp withString:type];</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        newUagent = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@ NetType/%@"</span>, userAgent, type];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSDictionary</span> *dictionnary = [[<span class="built_in">NSDictionary</span> alloc] initWithObjectsAndKeys:newUagent, <span class="string">@"UserAgent"</span>, <span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"new useragent:%@"</span>,newUagent);</span><br><span class="line">    [[<span class="built_in">NSUserDefaults</span> standardUserDefaults] registerDefaults:dictionnary];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>newUagent ä¸º<code>Mozilla/5.0 (iPhone; CPU iPhone OS 9_3 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Mobile/13E230 WMall/3.0  NetType/WIFI</code></p>
<p>å‚è€ƒ<br><a href="http://blog.csdn.net/lilin_emcc/article/details/40145113" target="_blank" rel="external">å¾®ä¿¡6.0å†…åµŒæµè§ˆå™¨User-Agentå­—ç¬¦ä¸²å¢åŠ äº†NetTypeå­—æ®µ</a><br><a href="http://blog.csdn.net/mangosnow/article/details/38798195" target="_blank" rel="external">è·å– UIWebview çš„ Useragentï¼Œä»¥åŠé™„åŠ è‡ªå®šä¹‰å­—æ®µåˆ° Useragent</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[UIButtonè®¾ç½®æ–‡å­—å›¾ç‰‡å±…ä¸­ã€UIViewç›¸å…³æ–¹æ³•ä»¥åŠUIåˆ‡å›¾çš„é‡è¦æ€§]]></title>
      <url>http://koalahl.github.io/2016/03/31/UIButton%E8%AE%BE%E7%BD%AE%E6%96%87%E5%AD%97%E5%9B%BE%E7%89%87%E5%B1%85%E4%B8%AD-%E8%AE%BAUI%E5%88%87%E5%9B%BE%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7/</url>
      <content type="html"><![CDATA[<p>åˆæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œo(â•¯â–¡â•°)oã€‚UIButtonä½œä¸ºæœ€æœ€å¸¸ç”¨çš„æ§ä»¶ï¼Œæƒ³å¿…éƒ½æ˜¯å¾ˆç†Ÿæ‚‰çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ§ä»¶ä¸­</p>
<p><img src="/img/ordersButton.png" alt="Order Buttons"></p>
<p>å¦‚æ­¤è®¾è®¡åœ¨å¾ˆå¤šç”µå•†å®¢æˆ·ç«¯ä¸­éƒ½æœ‰æ¶‰åŠï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆéš¾åº¦ã€‚</p>
<p>ä½†æ˜¯æˆ‘é‡åˆ°çš„é—®é¢˜å°±æ˜¯ä»»å‡­å¦‚ä½•è®¾ç½®è¾¹è·ï¼Œå°±æ˜¯å¯¹ä¸é½ï¼Œå…¶ä¸­è¿˜è¦è€ƒè™‘å±å¹•é€‚é…çš„é—®é¢˜ã€‚Orzâ€¦æœ€åå»å·¥ç¨‹é‡ŒæŸ¥çœ‹ç›¸åº”çš„å›¾ç‰‡å¤§å°ï¼Œæ‰å‘ç°æ¯ä¸ªå›¾ç‰‡çš„å°ºå¯¸å®½é«˜éƒ½ä¸åŒï¼Œå¾ˆéšæ„ã€‚</p>
<p>è¿™æåŠå¤©ï¼ŒåŸæ¥æ˜¯å›¾ç‰‡å°ºå¯¸çš„é—®é¢˜ï¼Œæƒ³æƒ³è¿™UIï¼Œå”‰ï¼<br><a id="more"></a></p>
<h2 id="UIbutton">UIButtonè®¾ç½®æ–‡å­—å›¾ç‰‡å±…ä¸­</h2>

<p>UIButtonå›¾ç‰‡ã€æ–‡å­—å±…ä¸­çš„è°ƒæ•´ä¸»è¦å°±æ˜¯å››ä¸ªå‚æ•°ï¼šï¼ˆ``ï¼‰</p>
<ul>
<li><code>contentHorizontalAlignment</code>:è®¾ç½®çœŸä¸ªButtonå†…å®¹ï¼ˆåŒ…æ‹¬imageViewå’ŒtitleLabelï¼‰çš„æ°´å¹³ä½ç½®ã€‚</li>
<li><code>contentVerticalAlignment</code>:è®¾ç½®æ•´ä¸ªButtonå†…å®¹ï¼ˆåŒ…æ‹¬imageViewå’ŒtitleLabelï¼‰çš„å‚ç›´ä½ç½®ï¼Œè¿™é‡Œç”¨ä¸åˆ°ã€‚</li>
<li><code>imageEdgeInsets</code>:è®¾ç½®imageViewçš„è¾¹è·ã€‚</li>
<li><p><code>titleEdgeInsets</code>:è®¾ç½®titleLabelçš„è¾¹è·ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, <span class="built_in">UIControlContentVerticalAlignment</span>) &#123;</span><br><span class="line">    <span class="built_in">UIControlContentVerticalAlignmentCenter</span>  = <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">UIControlContentVerticalAlignmentTop</span>     = <span class="number">1</span>,</span><br><span class="line">    <span class="built_in">UIControlContentVerticalAlignmentBottom</span>  = <span class="number">2</span>,</span><br><span class="line">    <span class="built_in">UIControlContentVerticalAlignmentFill</span>    = <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, <span class="built_in">UIControlContentHorizontalAlignment</span>) &#123;</span><br><span class="line">    <span class="built_in">UIControlContentHorizontalAlignmentCenter</span> = <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">UIControlContentHorizontalAlignmentLeft</span>   = <span class="number">1</span>,</span><br><span class="line">    <span class="built_in">UIControlContentHorizontalAlignmentRight</span>  = <span class="number">2</span>,</span><br><span class="line">    <span class="built_in">UIControlContentHorizontalAlignmentFill</span>   = <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>åœ¨è¿™é‡Œç»™å‡ºæˆ‘ç”¨çš„é€šç”¨æ–¹æ³•ï¼Œbuttoné«˜åº¦ä¸º50ä¸ºä¾‹ï¼š<br>1.è®¾ç½®buttonçš„<code>contentHorizontalAlignment</code>ä¸º<code>UIControlContentHorizontalAlignmentLeft</code>,è¿™æ ·ä¾¿äºæ ¹æ®buttonå¤§å°è®¡ç®—ã€‚å½“ç„¶éè¦ç”¨centerè®¡ç®—ä¹Ÿå¯ï¼<br>2.è®¾ç½®imageViewçš„Edgeï¼š<br>  <code>kButtonImageViewEdgeInsets(btn) UIEdgeInsetsMake(0,(kOptionBtnWidth - btn.imageView.frame.size.width)/2, 20, 0);</code><br>3.è®¾ç½®titleLabelçš„Edgeï¼š<br>  <code>#define kButtonTitleEdgeInsets(btn)     UIEdgeInsetsMake(30, (kOptionBtnWidth - btn.titleLabel.frame.size.width)/2-btn.titleLabel.frame.origin.x, 0, 20);</code>ã€‚</p>
<p>åªè¦ä¼ å…¥ç›¸åº”çš„buttonå°±å¯ä»¥äº†ï¼Œå…¶ä¸­buttonçš„å®½åº¦ç”±æ­¤å¾—æ¥<code>#define kOptionBtnWidth  (CGRectGetWidth(frame)/kOptionBtnCount)</code>ã€‚</p>
<h2 id="UIView">UIViewçš„ç›¸å…³æ–¹æ³•</h2>

<p>ç›´æ¥é‡‡ç”¨ä¸Šè¿°è®¾ç½®buttonçš„æ–¹æ³•æ˜¯æœ‰æ¡ä»¶çš„ï¼Œå³ç¡®å®šäº†å½“å‰Buttonçš„å®½åº¦ã€‚æˆ‘ä»¬çœ‹åˆ°è¦è®¡ç®—buttonçš„å®½åº¦ï¼Œå¾—é€šè¿‡è¯»å–å±å¹•å®½åº¦å¾—çŸ¥ã€‚appä¸­åˆå§‹åŒ–UIViewçš„æ–¹å¼é€šå¸¸æœ‰ä¸¤ç§ï¼š<br>1.xib/Storyboardï¼Œç„¶åå…³è”<code>.h</code>,<code>.m</code>æ–‡ä»¶ã€‚<br>2.è‡ªå®šä¹‰UIViewå­ç±»,é€šè¿‡<code>initWithFrame</code>æ–¹æ³•è®¾ç½®ã€‚</p>
<p>å½“åœ¨UIViewçš„å­ç±»ä¸­å®ç°æ—¶ï¼Œå› ä¸ºæ­¤æ—¶å±å¹•å®½åº¦å·²ç»é€šè¿‡åˆå§‹åŒ–æ–¹æ³•ä¸­å¾—çŸ¥ï¼Œæ‰€ä»¥ä¸éœ€è¦å†å¤šè®¾ç½®ã€‚<br>è€Œé€šè¿‡xib/sbå…³è”çš„å­ç±»åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œè‹¥æ‰“å°self.frameï¼Œå°±æ˜¯å½“å‰xibçš„å®½åº¦ï¼Œè€Œä¸æ˜¯å®é™…å±å¹•å®½åº¦ã€‚æ‰€ä»¥ä¸èƒ½å†åˆå§‹åŒ–æ–¹æ³•ä¸­è®¾ç½®buttonçš„å±æ€§ã€‚</p>
<p>ç¬¬ä¸€æ­¥é‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œä¸‹é¢ä¸¤ä¸ªä»»é€‰å…¶ä¸€ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)updateConstraints;-éœ€è¦é‡å†™çˆ¶ç±»çš„updateConstraintsæ–¹æ³•ã€‚</span><br><span class="line">- (<span class="keyword">void</span>)layoutSubviews;</span><br></pre></td></tr></table></figure></p>
<p>ç¬¬äºŒæ­¥å¯¹æ¯ä¸ªbuttonè°ƒç”¨<code>layoutIfNeeded</code>æ–¹æ³•ï¼Œè®©å…¶ç«‹å³åˆ·æ–°å¸ƒå±€ã€‚</p>
<p>è¿™ä¸ªæ˜¯æ²¡æœ‰è°ƒç”¨layoutIfNeededçš„æƒ…å†µï¼š<br><img src="/img/Not call layoutIfNeeded.png" alt="Not call layoutIfNeeded"></p>
<p>ä»¥ä¸Šã€‚</p>
<p>å‚è€ƒæ–‡æ¡£<br><a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/index.html#//apple_ref/swift/cl/c:objc(cs" target="_blank" rel="external">UIView Class Reference</a>UIView)</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Effective-Objective C 2.0 è¦ç‚¹]]></title>
      <url>http://koalahl.github.io/2016/03/23/Effective-Objective-C-2-0-%E8%A6%81%E7%82%B9/</url>
      <content type="html"><![CDATA[<p>Effective-Ojective C 2.0 è¯»ä¹¦ç¬”è®°</p>
<p>ç¬¬ä¸€ç« çš„å†…å®¹æ¯”è¾ƒåŸºç¡€ï¼Œå°±æ²¡æœ‰åˆ—åœ¨ç¬”è®°å½“ä¸­äº†ã€‚å¦å¤–è¯¥ç¬”è®°åªè®°å½•æ¯ä¸€ä¸ªè¦ç‚¹ä¹‹åçš„æ€»ç»“ï¼Œé‡ç‚¹åœ°æ–¹ä¼šå¦å¤–æ¢è®¨ã€‚</p>
<a id="more"></a>
<h2 id="2">ç¬¬äºŒç«  æ¶ˆæ¯ã€å¯¹è±¡ã€è¿è¡ŒæœŸ</h2>

<p>7.åœ¨å¯¹è±¡å†…éƒ¨å°½é‡ç›´æ¥è®¿é—®å®ä¾‹å˜é‡</p>
<ul>
<li>åœ¨å¯¹è±¡å†…éƒ¨è¯»å–æ•°æ®æ—¶ï¼Œåº”è¯¥ç›´æ¥é€šè¿‡å®ä¾‹å˜é‡æ¥è¯»å–ï¼›è€Œå†™å…¥æ•°æ®æ—¶ï¼Œåº”è¯¥é€šè¿‡å±æ€§çš„è®¾ç½®æ–¹æ³•æ¥å†™ã€‚</li>
<li>åœ¨åˆå§‹åŒ–æ–¹æ³•å¤šåŠdeallocæ–¹æ³•ä¸­ï¼Œæ€»æ˜¯é€šè¿‡å®ä¾‹å˜é‡æ¥è¯»å†™æ•°æ®ã€‚</li>
<li>æœ‰æ—¶ä¼šä½¿ç”¨lazy initializitionæ–¹å¼æ¥åˆå§‹åŒ–æŸæ•°æ®ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦é€šè¿‡å±æ€§æ¥è¯»å–æ•°æ®ã€‚</li>
</ul>
<p>8.ç†è§£â€œå¯¹è±¡åŒç­‰æ€§â€è¿™ä¸€æ¦‚å¿µ</p>
<ul>
<li>è‹¥æƒ³æ£€æµ‹å¯¹è±¡çš„ç­‰åŒæ€§ï¼Œè¯·æä¾›<code>isEqual:</code>ä¸<code>hash</code>æ–¹æ³•ã€‚</li>
<li>ç›¸åŒçš„å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸åŒçš„å“ˆå¸Œç ï¼Œä½†æ˜¯ä¸¤ä¸ªå“ˆå¸Œç ç›¸åŒçš„å¯¹è±¡å´æœªå¿…ç›¸åŒã€‚</li>
<li>ç¼–å†™hashæ–¹æ³•æ—¶ï¼Œåº”è¯¥ä½¿ç”¨è®¡ç®—é€Ÿåº¦å¿«è€Œä¸”å“ˆå¸Œå—ç¢°æ’å‡ ç‡ä½çš„ç®—æ³•ã€‚</li>
</ul>
<p>9.ä»¥ç±»ç°‡æ¨¡å¼éšè—å®ç°ç»†èŠ‚</p>
<ul>
<li>ç±»ç°‡æ¨¡å¼å¯ä»¥æŠŠå®ç°ç»†èŠ‚éšè—åœ¨ä¸€å¥—ç®€å•çš„å…¬å…±æ¥å£åé¢ã€‚</li>
<li>ç³»ç»Ÿæ¡†æ¶ä¸­ç»å¸¸ä½¿ç”¨ç±»ç°‡ã€‚</li>
<li>ä»ç±»ç°‡çš„å…¬å…±æŠ½è±¡åŸºç±»ä¸­ç»§æ‰¿å­ç±»æ—¶è¦å½“å¿ƒï¼Œè‹¥æœ‰å¼€å‘æ–‡æ¡£ï¼Œåˆ™åº”é¦–å…ˆé˜…è¯»ã€‚</li>
</ul>
<p>10.åœ¨æ—¢æœ‰ç±»ä¸­ä½¿ç”¨å…³è”å¯¹è±¡å­˜æ”¾è‡ªå®šä¹‰æ•°æ®</p>
<p>1.å…³è”å¯¹è±¡çš„å­˜å‚¨ç­–ç•¥ï¼šæšä¸¾å€¼</p>
<p>OBJC_ASSOCIATION_ASSIGN â€”&gt;assign<br>OBJC_ASSOCIATION_RETAIN_NONATOMIC â€”&gt;nonatomic,retain<br>OBJC_ASSOCIATION_COPY_NONATOMIC â€”&gt;nonatomic,copy<br>OBJC_ASSOCIATION_RETAIN â€”&gt;retain<br>OBJC_ASSOCIATION_COPY â€”&gt;copy</p>
<p>åˆ›å»ºå…³è”å¯¹è±¡æ–¹æ³•ï¼š<br>void objc_setAssociatedObject(id object,void *key,id value,objc_AssociationPolicy policy)</p>
<p>ä»¥ç»™å®šçš„é”®è·å–æŸå¯¹è±¡çš„å…³è”å¯¹è±¡çš„å€¼<br>id objc_getAssociatedObject(id object,void *key)</p>
<p>ç§»é™¤è¯¥å¯¹è±¡çš„æ‰€æœ‰å…³è”å¯¹è±¡<br>void objc_removeAssociatedObjects(id object)</p>
<p>Note:è®¾ç½®å…³è”å¯¹è±¡æ—¶çš„keyæ˜¯ä¸€ä¸ªâ€œä¸é€æ˜æŒ‡é’ˆâ€ï¼ˆopaque pointerï¼šå…¶æ‰€æŒ‡å‘çš„æ•°æ®ç»“æ„ä¸å±€é™ä¸æŸç§ç‰¹å®šç±»å‹æŒ‡é’ˆï¼‰ï¼›</p>
<p>åœ¨è®¾ç½®å…³è”å¯¹è±¡æ—¶ï¼Œé€šå¸¸ä½¿ç”¨é™æ€å…¨å±€å˜é‡ä½œä¸ºkeyã€‚</p>
<ul>
<li>å¯ä»¥é€šè¿‡â€œassociateObjectâ€æœºåˆ¶æ¥å§ä¸¤ä¸ªå¯¹è±¡è¿èµ·æ¥ã€‚</li>
<li>å®šä¹‰å…³è”å¯¹è±¡æ—¶å¯æŒ‡å®šå†…å­˜ç®¡ç†è¯­ä¹‰ï¼Œç”¨äºæ¨¡ä»¿å®šä¹‰å±æ€§æ—¶æ‰€åœ¨ç”¨çš„æ‹¥æœ‰å…³ç³»å’Œéæ‹¥æœ‰å…³ç³»ã€‚</li>
<li>åªæœ‰åœ¨å…¶ä»–åšæ³•ä¸å¯è¡Œæ—¶æ‰é€‰ç”¨å…³è”å¯¹è±¡ï¼Œå› ä¸ºè¿™ç§åšæ³•é€šå¸¸ä¼šå¼•å…¥éš¾ä»¥æŸ¥æ‰¾çš„bugã€‚</li>
</ul>
<p>11.ç†è§£objc_msgSendçš„ä½œç”¨ã€‚</p>
<ul>
<li>æ¶ˆæ¯ç”±æ¥å—è€…ã€é€‰æ‹©å™¨åŠå‚æ•°æ„æˆã€‚ç»™æŸå¯¹è±¡å‘é€æ¶ˆæ¯ï¼ˆinvoke a messageï¼‰ï¼Œä¹Ÿå°±ç›¸å½“äºåœ¨è¯¥å¯¹è±¡ä¸Šè°ƒç”¨æ–¹æ³•ï¼ˆcalla methodï¼‰</li>
<li>å‘ç»™æŸå¯¹è±¡çš„å…¨éƒ¨æ¶ˆæ¯éƒ½è¦æœ‰åŠ¨æ€æ¶ˆæ¯æ´¾å‘ç³»ç»Ÿï¼ˆdynamic message dispatch systemï¼‰æ¥å¤„ç†ï¼Œè¯¥ç³»ç»Ÿä¼šæŸ¥å‡ºå¯¹åº”çš„æ–¹æ³•ï¼Œå¹¶æ‰§è¡Œå…¶ä»£ç ã€‚</li>
</ul>
<p>12.ç†è§£æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€‚</p>
<ul>
<li>è‹¥å¯¹è±¡æ— æ³•å“åº”æŸä¸ªé€‰æ‹©å™¨ä¸­çš„æ¶ˆæ¯ï¼Œåˆ™è¿›å…¥æ¶ˆæ¯è½¬å‘è¿‡ç¨‹ã€‚</li>
<li>é€šè¿‡è¿è¡ŒæœŸçš„åŠ¨æ€æ–¹æ³•è§£ææœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦ç”¨åˆ°æŸä¸ªæ–¹æ³•æ—¶å†å°†å…¶åŠ å…¥ç±»ä¸­ã€‚</li>
<li>å¯¹è±¡å¯ä»¥æŠŠå…¶æ— æ³•è§£è¯»çš„æ¶ˆæ¯è½¬äº¤ç»™å…¶ä»–å¯¹è±¡æ¥å¤„ç†ã€‚</li>
<li>è‹¥ç»è¿‡ä¸Šè¿°ä¸¤æ­¥è¿˜æ˜¯æ²¡åŠæ³•å¤„ç†æ¶ˆæ¯ï¼Œåˆ™å¯åŠ¨å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€‚</li>
</ul>
<p>13.ä½¿ç”¨æ–¹æ³•è°ƒé…æŠ€æœ¯Method Swizzlingè°ƒè¯•é»‘ç›’æ–¹æ³•<br>void method_exchangeImplementations(Method m1,Method m2)</p>
<ul>
<li>åœ¨è¿è¡ŒæœŸï¼Œå¯ä»¥å“é›·ä¸­æ–°å¢æˆ–æ›¿æ¢é€‰æ‹©å™¨æ‰€å¯¹åº”çš„æ–¹æ³•å®ç°ã€‚</li>
<li>ä½¿ç”¨å¦ä¸€ä»½å®ç°æ¥æ›¿æ¢åŸæœ‰çš„æ–¹æ³•å®ç°ï¼Œå«åšæ–¹æ³•è°ƒé…ï¼Œå¼€å‘è€…å¯ä»¥ç”¨æ­¤æŠ€æœ¯å‘åŸæœ‰å®ç°ä¸­æ·»åŠ æ–°åŠŸèƒ½ã€‚</li>
<li>ä¸€èˆ¬æ¥è¯´ï¼Œåªæœ‰è°ƒè¯•ç¨‹åºçš„æ—¶å€™æ‰éœ€è¦åœ¨è¿è¡ŒæœŸä¿®æ”¹æ–¹æ³•å®ç°ï¼Œè¿™ç§åšæ³•ä¸å®œæ»¥ç”¨ã€‚</li>
</ul>
<p>14.ç†è§£â€œç±»å¯¹è±¡â€çš„ç”¨æ„</p>
<ul>
<li>æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘Classå¯¹è±¡çš„æŒ‡é’ˆï¼ˆisaï¼‰ï¼Œç”¨æ„è¡¨æ˜å…¶ç±»å‹ï¼Œè€Œè¿™äº›Classå¯¹è±¡åˆ™æ„æˆäº†ç±»çš„ç»§æ‰¿ä½“ç³»ï¼ˆsuper_classæŒ‡é’ˆï¼‰ã€‚</li>
<li>å¦‚æœå¯¹è±¡ç±»å‹æ— æ³•å†ç¼–è¯‘æœŸç¡®å®šï¼Œé‚£ä¹ˆä¹…åº”è¯¥ä½¿ç”¨ç±»å‹ä¿¡æ¯æŸ¥è¯¢æ–¹æ³•æ¥æ¢çŸ¥ã€‚isMemberOfClassï¼ˆç‰¹å®šç±»å‹çš„ç±»ï¼‰ï¼ŒisKindOfClassï¼ˆè¯¥ç±»åŠå…¶æ´¾ç”Ÿç±»ï¼‰</li>
<li>å°½é‡ä½¿ç”¨ç±»å‹ä¿¡æ¯æŸ¥è¯¢æ–¹æ³•æ¥ç¡®å®šå¯¹è±¡ç±»å‹ï¼Œè€Œä¸è¦ç›´æ¥æ¯”è¾ƒç±»å¯¹è±¡ï¼Œå› ä¸ºæŸäº›å¯¹è±¡å¯èƒ½å®ç°äº†æ¶ˆæ¯è½¬å‘åŠŸèƒ½ã€‚</li>
</ul>
<h2 id="3">ç¬¬ä¸‰ç«  æ¥å£ä¸APIè®¾è®¡</h2>

<p>15.ä½¿ç”¨å‰ç¼€é¿å…å‘½åç©ºé—´å†²çªï¼Œè§£å†³duplicate symbolé—®é¢˜ã€‚<br>16.ä½¿ç”¨å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œå³å¸¦æœ‰ç‰¹å®šå‚æ•°çš„åˆå§‹åŒ–æ–¹æ³•ã€‚<br>17.å®ç°descriptionæ–¹æ³•ç”¨æ¥è°ƒè¯•ç¨‹åºã€‚å¹¶ä¸”æœ€å¥½ç”¨å­—å…¸çš„æ–¹å¼è¾“å‡ºç±»çš„å±æ€§ï¼Œæ¡ç†æ¸…æ™°ã€‚<br>18.å°½é‡ä½¿ç”¨ä¸å¯å˜å¯¹è±¡ã€‚<br>19.ä½¿ç”¨æ¸…æ™°è€Œåè°ƒçš„å‘½åæ–¹å¼ã€‚å‚è€ƒObjective Cç¼–ç¨‹è§„èŒƒã€‚<br>20.ä¸ºç§æœ‰æ–¹æ³•åæ·»åŠ å‰ç¼€ã€‚<br>21.ç†è§£OCçš„é”™è¯¯æ¨¡å‹ã€‚OCåœ¨é‡åˆ°æå…¶ä¸¥é‡çš„é”™è¯¯åï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç¨‹åºä¼šé€€å‡ºï¼ˆcrashï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å¤ªè€ƒè™‘å¼‚å¸¸å®‰å…¨ã€‚å¦‚æœä¸å¤ªä¸¥é‡çš„é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®è¿”å›nil/0ï¼Œæˆ–è€…NSErrorã€‚<br>22.ç†è§£NSCopyingåè®®ã€‚</p>
<ul>
<li>å®ç°NSCopyingåè®®ã€‚</li>
<li>é‡å†™<code>copyWithZone</code>æ–¹æ³•ã€‚</li>
<li><p>å¦‚æœç±»ä¸­æœ‰å¯å˜å±æ€§ï¼Œåˆ™åœ¨copyWithZoneæ–¹æ³•ä¸­åŒæ—¶éœ€è¦å¯¹å¯å˜å±æ€§è¿›è¡Œ<code>mutableCopy</code>ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">EOCPerson</span> : <span class="title">NSObject</span>&lt;<span class="title">NSCopying</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">copy</span>)<span class="built_in">NSString</span> * firstname;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">copy</span>)<span class="built_in">NSString</span> * lastname;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)initWithFirstName:(<span class="built_in">NSString</span> *)fisrtname lastName:(<span class="built_in">NSString</span> *)lastname;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">"EOCPerson.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">EOCPerson</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableSet</span> * _friends;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">id</span>)initWithFirstName:(<span class="built_in">NSString</span> *)fisrtname lastName:(<span class="built_in">NSString</span> *)lastname&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> == [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">        _firstname = firstname;</span><br><span class="line">        _lastname  = lastname;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)copyWithZone:(<span class="built_in">NSZone</span> *)zone&#123;</span><br><span class="line"></span><br><span class="line">    EOCPerson *<span class="keyword">copy</span> = [[[<span class="keyword">self</span> class] allocWithZone:zone] initWithFirstName:_firstname lastName:_lastname];</span><br><span class="line">    <span class="keyword">copy</span>-&gt;_friends = [_friends mutableCopy];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">copy</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>è¦ç‚¹ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰å¯¹è±¡è‹¥æƒ³è¦è¿›è¡Œcopyæ“ä½œï¼Œéœ€å®ç°NSCopyingåè®®ã€‚</li>
<li>è‡ªå®šä¹‰å¯¹è±¡è‹¥åˆ†ä¸ºå¯å˜å’Œä¸å¯å˜ç‰ˆæœ¬ï¼Œåˆ™éœ€å®ç°NSCopyingå’ŒNSMutableCopyingåè®®ã€‚</li>
<li>å¤åˆ¶å¯¹è±¡æ—¶éœ€è¦è€ƒè™‘ä½¿ç”¨æµ…æ‹·è´è¿˜æ˜¯æ·±æ‹·è´ã€‚ä¸€èˆ¬åº”è¯¥å°½é‡ä½¿ç”¨æµ…æ‹·è´ã€‚</li>
<li>è‡ªå®šä¹‰å¯¹è±¡è‹¥éœ€è¦æ·±æ‹·è´ï¼Œåˆ™å¯ä»¥æ–°å¢ä¸€ä¸ªä¸“é—¨æ‰§è¡Œæ·±æ‹·è´çš„æ–¹æ³•ã€‚</li>
</ul>
</li>
</ul>
<h2 id="4">ç¬¬å››ç«  åè®®ä¸åˆ†ç±»</h2>

<p>23.é€šè¿‡å§”æ‰˜ä¸æ•°æ®æºåè®®è¿›è¡Œå¯¹è±¡é—´é€šä¿¡<br>24.å°†ç±»çš„å®ç°ä»£ç åˆ†æ•£åˆ°æ•°ä¸ªåˆ†ç±»ï¼ˆcategoryï¼‰ä¹‹ä¸­ã€‚<br>25.æ€»æ˜¯ä¸ºç¬¬ä¸‰æ–¹åˆ†ç±»åç§°å‰åŠ å‰ç¼€ã€‚<br>26.å°½é‡ä¸è¦åœ¨åˆ†ç±»ä¸­å£°æ˜å±æ€§ï¼ˆå½“ç„¶éè¦åšä¹Ÿå¯ï¼‰<br>27.ä½¿ç”¨<code>class-continuationåˆ†ç±»</code>ï¼ˆåŒ¿ååˆ†ç±»ï¼‰éšè—å®ç°ç»†èŠ‚<br>28.é€šè¿‡åè®®æä¾›åŒ¿åå¯¹è±¡ã€‚ä¾‹å¦‚ id<nscopying>,id<eocdelegate>ã€‚ä»»æ„ä¸€ä¸ªéµå®ˆäº†ä¸Šè¿°åè®®çš„å¯¹è±¡éƒ½å¯ä»¥èµ‹å€¼ç»™è¿™ä¸ªå±æ€§ã€‚</eocdelegate></nscopying></p>
<h2 id="5">ç¬¬äº”ç«  å†…å­˜ç®¡ç†</h2>

<p>29.ç†è§£å¼•ç”¨è®¡æ•°ã€‚<br>30.ä»¥ARCç®€åŒ–å¼•ç”¨è®¡æ•°ã€‚<br>31.åœ¨deallocæ–¹æ³•ä¸­åªé‡Šæ”¾å¼•ç”¨å¹¶è§£é™¤ç›‘å¬ã€‚<br>32.ç¼–å†™â€œå¼‚å¸¸å®‰å…¨ä»£ç â€æ—¶åº”ç•™æ„å†…å­˜ç®¡ç†é—®é¢˜ã€‚<br>33.ä»¥å¼±å¼•ç”¨é¿å…å¾ªç¯å¼•ç”¨ã€‚<br>34.ä»¥â€œè‡ªåŠ¨é‡Šæ”¾æ± â€é™ä½å†…å­˜å³°å€¼ã€‚<br>35.ä½¿ç”¨<code>Zombie Object</code>è°ƒè¯•å†…å­˜é—®é¢˜ã€‚<br>36.ä¸è¦ä½¿ç”¨retainCountã€‚ARCä¸‹å·²åºŸå¼ƒã€‚</p>
<h2 id="6">ç¬¬å…­ç«  GCD</h2>

<p>37.ç†è§£blockã€‚é‡ç‚¹çœ‹ä¸€ä¸‹blockçš„å†…éƒ¨ç»“æ„é‚£ä¸€èŠ‚ã€‚</p>
<ul>
<li>blockä¸­çš„invokeå˜é‡ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œç±»å‹ä¸º<code>void(*)(void *,_)</code>æŒ‡å‘äº†blockçš„å®ç°ä»£ç ï¼ˆéœ€è¦æ‰§è¡Œçš„å‡½æ•°ï¼‰ã€‚</li>
<li>blockä¸­çš„descriptoræ˜¯ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆã€‚è¯¥ç»“æ„ä½“ä¸­åŒ…å«äº†è¿™ä¸ªblockçš„ä¸€äº›ä¿¡æ¯ï¼Œå¦‚blockçš„sizeã€‚</li>
<li>blockè¿˜ä¼šæŠŠä»å¤–éƒ¨æ•è·çš„å˜é‡æ‹·è´ä¸€ä»½ï¼Œæ”¾åœ¨descriptorå˜é‡çš„åé¢ã€‚æ‹·è´çš„å¹¶ä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯è¿™äº›å¯¹è±¡çš„æŒ‡é’ˆå˜é‡ã€‚invokeå‡½æ•°æŠŠblockå¯¹è±¡æœ¬èº«ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ¥ï¼Œå°±æ˜¯ä¸ºäº†èƒ½   æ‹¿åˆ°blockæ•è·çš„è¿™äº›å˜é‡ã€‚</li>
<li>blockè¢«å®šä¹‰æ—¶æ˜¯åˆ†é…åœ¨æ ˆå†…å­˜ä¸­ã€‚æ‰€ä»¥éœ€è¦copyä¸€ä»½ï¼Œå¤åˆ¶åˆ°å †å†…å­˜ä¸­ï¼Œå°±å¯ä»¥åœ¨å¤–éƒ¨ä½¿ç”¨ã€‚<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ˆblockï¼š</span></span><br><span class="line"><span class="keyword">void</span>(^block)();</span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* condition */</span>) &#123;</span><br><span class="line">    block = ^()&#123; <span class="built_in">NSLog</span>(<span class="string">@"Block in Stack"</span>); &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    block = ^()&#123; <span class="built_in">NSLog</span>(<span class="string">@"Block in Stack still"</span>); &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  block();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å †blockï¼š</span></span><br><span class="line"><span class="keyword">void</span>(^block)();</span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* condition */</span>) &#123;</span><br><span class="line">    block = [^()&#123; <span class="built_in">NSLog</span>(<span class="string">@"Block in Heap"</span>); &#125; <span class="keyword">copy</span>];</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    block = [^()&#123; <span class="built_in">NSLog</span>(<span class="string">@"Block in Heap"</span>); &#125; <span class="keyword">copy</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  block();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€blockï¼š</span></span><br><span class="line">  <span class="keyword">void</span> (^block)() = ^()&#123; <span class="built_in">NSLog</span>(<span class="string">@"I'm a global block"</span>);&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>38.ä¸ºå¸¸ç”¨çš„blockåˆ›å»ºtypedefã€‚<br>39.ç”¨handlerå—æ¥é™ä½ä»£ç åˆ†æ•£ã€‚å¸¸ç”¨äºå¼‚æ­¥ä»»åŠ¡æ—¶ã€‚<br>40.ä½¿ç”¨blockæ—¶æ³¨æ„ä¸è¦å‡ºç°å¾ªç¯å¼•ç”¨ã€‚<br>41.å¤šç”¨dispatch queueï¼Œå°‘ç”¨åŒæ­¥é”ã€‚ä¾‹å¦‚æ¶‰åŠåˆ°æ•°æ®çš„å­˜å–ã€‚<br>    GCDä»¥å‰ï¼Œæœ‰ä¸¤ç§å®ç°é”çš„æ–¹å¼ï¼š<br>    1.@synchronized(self){ â€¦ }.è¿™ç§æ–¹å¼ä¼šé™ä½ä»£ç æ‰§è¡Œæ•ˆç‡ï¼Œå› ä¸ºèŠ±æ‹¬å·å†…çš„ä»£ç éƒ½å…±ç”¨ä¸€ä¸ªåŒæ­¥é”ï¼Œä¸”é¡ºåºæ‰§è¡Œã€‚<br>    2.ä½¿ç”¨NSLockã€‚<code>lock()</code>æ–¹æ³•å’Œ<code>unlock()</code>æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨é€’å½’é”<code>NSRecursiveLock</code>,çº¿ç¨‹èƒ½å¤Ÿå¤šæ¬¡æŒæœ‰è¯¥é”ï¼Œè€Œä¸ä¼šå‡ºç°æ­»é”ç°è±¡ã€‚<br>    ä¾‹å­ï¼šå±æ€§çš„è¯»å–å’Œè®¾ç½®ä¸­ã€‚</p>
<p>42.å¤šç”¨GCDï¼Œå°‘ç”¨performeSelector.</p>
<ul>
<li><code>performSelector</code>ç³»åˆ—æ–¹æ³•åœ¨å†…å­˜ç®¡ç†æ–¹é¢å®¹æ˜“æœ‰é™·é˜±ã€‚ç¼–è¯‘å™¨æ— æ³•ç¡®å®šå…¶å°†è¦æ‰§è¡Œçš„SELå…·ä½“æ˜¯ä»€ä¹ˆï¼Œå› æ­¤æ— æ³•é€šè¿‡ARCåœ¨ç¼–è¯‘æœŸæ’å…¥å†…å­˜ç®¡ç†æ–¹æ³•ã€‚</li>
<li><code>performSelector</code>èƒ½å¤Ÿå¤„ç†çš„<code>SEL</code>æœ‰ç‚¹å±€é™ï¼Œé€‰æ‹©å™¨çš„è¿”å›ç±»å‹å’Œå‚æ•°ä¸ªæ•°éƒ½æœ‰é™åˆ¶ã€‚</li>
</ul>
<p>43.æŒæ¡GCDå’ŒOperationQueueæ“ä½œé˜Ÿåˆ—çš„ä½¿ç”¨æ—¶æœºã€‚<br>  æ‰§è¡Œåå°ä»»åŠ¡æ—¶ï¼Œæ“ä½œé˜Ÿåˆ—æ›´æœ‰ä¼˜åŠ¿ã€‚<br>  ä½¿ç”¨<code>NSOperationå’ŒNSOperationQueue</code>çš„å¥½å¤„ï¼š</p>
<ul>
<li>å–æ¶ˆæŸä¸ªæ“ä½œã€‚æ³¨æ„ï¼šå¯ä»¥å–æ¶ˆçš„æ˜¯é˜Ÿåˆ—ä¸­è¿˜æ²¡æœ‰æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li>
<li>æŒ‡å®šæ“ä½œé—´çš„ä¾èµ–å…³ç³»ã€‚</li>
<li>é€šè¿‡KVOç›‘æµ‹NSOperationå¯¹è±¡çš„å±æ€§ã€‚</li>
<li>æŒ‡å®šOperationçš„ä¼˜å…ˆçº§ã€‚</li>
<li>é‡ç”¨operationsã€‚</li>
</ul>
<p>44.é€šè¿‡Dispatch_groupæœºåˆ¶ï¼Œæ ¹æ®ç³»ç»Ÿèµ„æºçŠ¶å†µæ¥æ‰§è¡Œä»»åŠ¡</p>
<ul>
<li>dispatch_apply. è¿™ä¸ªä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚æ‰€ä»¥ä¸èƒ½æŠŠä¸»çº¿ç¨‹ä½œä¸ºè¯¥æ–¹æ³•æ‰§è¡Œçš„çº¿ç¨‹å‚æ•°ã€‚</li>
</ul>
<p>45.ä½¿ç”¨<code>dispatch_once</code>æ¥æ‰§è¡Œåªéœ€è¦è¿è¡Œä¸€æ¬¡çš„çº¿ç¨‹å®‰å…¨ä»£ç ã€‚å¸¸ç”¨äºå•ä¾‹æ¨¡å¼ã€‚<br>46.ä¸è¦ä½¿ç”¨dispatch_get_current_queue</p>
<h2 id="7">ç¬¬ä¸ƒç«  ç³»ç»Ÿæ¡†æ¶</h2>

<p>47.ç†Ÿæ‚‰ç³»ç»Ÿæ¡†æ¶ã€‚<br>  Fundation å’Œ CoreFoundationã€‚</p>
<ul>
<li>æ— ç¼æ¡¥æ¥ï¼Œtoll-free-bridging,å¯ä»¥å°†CoreFoundationä¸­çš„Cè¯­è¨€æ•°æ®ç»“æ„è½¬æ¢ä¸ºFoundationä¸­çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥åå‘è½¬æ¢ã€‚</li>
</ul>
<p>48.å¤šç”¨å—æšä¸¾ï¼Œå°‘ç”¨forå¾ªç¯ã€‚</p>
<ol>
<li>for(int i=0;i&lt;max;i++){}</li>
<li>NSEnumerator. <code>allObjects()</code> å’Œ<code>nextObject()</code>æ–¹æ³•ã€‚</li>
<li>å¿«é€Ÿéå† fast enumeration. for in<br>åŸºäºblockçš„éå†æ–¹å¼<br><code>- enumerateObjectesUsingBlock:(void(^)(id object,NSUInteger index,BOOL *stop))block</code><br>â€¦å…¶ä»–æ–¹æ³•</li>
</ol>
<p>49.å¯¹è‡ªå®šä¹‰å†…å­˜ç®¡ç†è¯­ä¹‰çš„collectioné›†åˆç±»ä½¿ç”¨æ— ç¼æ¡¥æ¥ã€‚</p>
<ul>
<li>__bridge</li>
<li>__bridge_retained</li>
<li><p>__bridge_transfer</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *nameArray = @[<span class="string">@"g"</span>,<span class="string">@"c"</span>,<span class="string">@"d"</span>];</span><br><span class="line"><span class="comment">//æ­£å‘æ¡¥æ¥ï¼šFoundationå¯¹è±¡-&gt;CoreFoundationæ•°æ®ç»“æ„</span></span><br><span class="line"><span class="built_in">CFArrayRef</span> a<span class="built_in">CFArray</span> = (__bridge <span class="built_in">CFArrayRef</span>)nameArray  ;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"CFArray's count is %li"</span>,<span class="built_in">CFArrayGetCount</span>(a<span class="built_in">CFArray</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">CFArrayRef</span> b<span class="built_in">CFArray</span> = (__bridge_retained <span class="built_in">CFArrayRef</span>)nameArray;</span><br><span class="line"><span class="comment">//æˆ–è€…ç”¨</span></span><br><span class="line">b<span class="built_in">CFArray</span> = <span class="built_in">CFBridgingRetain</span>(nameArray);</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"CFArray's count is %li"</span>,<span class="built_in">CFArrayGetCount</span>(b<span class="built_in">CFArray</span>));</span><br><span class="line"><span class="built_in">CFRelease</span>(b<span class="built_in">CFArray</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSArray</span> *names = (<span class="built_in">NSArray</span> *)(__bridge_transfer <span class="built_in">NSArray</span> *)a<span class="built_in">CFArray</span>;</span><br><span class="line"><span class="comment">//    //æˆ–è€…ç”¨</span></span><br><span class="line"><span class="comment">//    NSArray * names = CFBridgingRelease(aCFArray);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,names);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>50.æ„å»ºç¼“å­˜æ—¶ä½¿ç”¨NSCacheè€Œä¸æ˜¯NSDictionaryã€‚</p>
<p>51.ç²¾ç®€initializeå’Œloadçš„å®ç°ä»£ç ã€‚<br>    ä¸¤ä¸ªéƒ½æ˜¯ç±»çš„åˆå§‹åŒ–æ–¹æ³•ã€‚<br>    1.<code>load()</code><br>    å¯¹äºåŠ å…¥è¿è¡Œæ—¶çš„ç±»classå’Œåˆ†ç±»categoryæ¥è¯´ï¼Œå½“åŒ…å«ç±»å’Œåˆ†ç±»çš„ç¨‹åºåº“è½½å…¥ç³»ç»Ÿæ—¶ï¼Œå¿…å®šä¼šè°ƒç”¨<code>+ (void)load</code>æ–¹æ³•ï¼Œä¸”åªè°ƒç”¨ä¸€æ¬¡ã€‚<br>    å¯¹äºiOSç³»ç»Ÿï¼Œæ˜¯åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ã€‚å¯¹äºMac OS Xæ¥è¯´æ›´è‡ªç”±ï¼Œå› ä¸ºå¯ä»¥ä½¿ç”¨åŠ¨æ€åŠ è½½<code>dynamic loading</code>è¿™ç§ç‰¹æ€§,ç­‰åº”ç”¨ç¨‹åºå¯åŠ¨å®Œæˆä¹‹åå†å»åŠ è½½ç¨‹åºåº“ã€‚è‹¥åˆ†ç±»å’Œç±»ä¸­éƒ½å®šä¹‰äº†loadæ–¹æ³•ï¼Œåˆ™å…ˆè°ƒç”¨ç±»çš„ï¼Œå†è°ƒç”¨åˆ†ç±»çš„ã€‚<br>    loadæ–¹æ³•ä¸€èˆ¬åªç”¨æ¥è°ƒè¯•ç¨‹åºï¼Œè€Œä¸æ˜¯åœ¨å…¶ä¸­åšä»€ä¹ˆæ“ä½œã€‚<br>    2.<code>initialize</code><br>    å¯¹äºæ¯ä¸ªç±»æ¥è¯´ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨é¦–æ¬¡ä½¿ç”¨è¯¥ç±»ä¹‹å‰è°ƒç”¨ï¼Œä¸”åªè°ƒç”¨ä¸€æ¬¡ã€‚å®ƒæ˜¯ç”±è¿è¡Œæ—¶ç³»ç»Ÿæ¥è°ƒç”¨ï¼Œè€Œä¸æ˜¯ç”±ä»£ç è°ƒç”¨ã€‚<br>  ä¸loadçš„åŒºåˆ«ï¼š</p>
<ul>
<li>æƒ°æ€§è°ƒç”¨ã€‚åªæœ‰å½“ç”¨åˆ°è¿™ä¸ªç±»æ—¶ï¼Œæ‰ä¼šè¢«è°ƒç”¨ã€‚å¦‚æœæŸä¸ªç±»æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œåˆ™ä¸ä¼šè¢«è°ƒç”¨ã€‚è€Œç¨‹åºå¿…é¡»é˜»å¡æŠŠæ‰€æœ‰ç±»çš„loadæ–¹æ³•æ‰§è¡Œå®Œæ‰èƒ½ç»§ç»­ã€‚</li>
<li>æ‰§è¡Œæ–¹æ³•æ—¶è¿è¡Œæ—¶ç³»ç»Ÿçš„çŠ¶æ€ã€‚<code>initializer</code>è¢«æ‰§è¡Œæ—¶ï¼Œruntime systemæ˜¯æ­£å¸¸çŠ¶æ€çš„ã€‚è€Œ<code>load</code>è¢«æ‰§è¡Œæ—¶ï¼Œruntime systemæ˜¯è„†å¼±çŠ¶æ€çš„ã€‚(è¿™ä¸ªè„†å¼±çŠ¶æ€æ˜¯æŒ‡æœ€å¥½ä¸è¦åœ¨loadæ–¹æ³•ä¸­ä½¿ç”¨åˆ«çš„ç±»)</li>
<li><code>initialize</code>æ–¹æ³•éµå¾ªç»§æ‰¿è°ƒç”¨ã€‚å³å­ç±»å³ä½¿æ²¡æœ‰å®ç°initializeæ–¹æ³•ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„initializeæ–¹æ³•ã€‚è€Œloadæ–¹æ³•åˆ™ä¸ä¼šï¼Œå­ç±»è‹¥æ²¡æœ‰å®ç°loadæ–¹æ³•ï¼Œä¹Ÿä¸ä¼šå»è°ƒç”¨çˆ¶ç±»çš„loadã€‚</li>
</ul>
<p>52.åˆ«å¿˜äº†NSTimerä¼šä¿ç•™å…¶ç›®æ ‡å¯¹è±¡ã€‚</p>
<ul>
<li>NSTimerå¯¹è±¡ä¼šå¼•ç”¨å…¶ç›®æ ‡å¯¹è±¡ï¼Œç›´åˆ°è®¡æ—¶å™¨æœ¬èº«å¤±æ•ˆä¸ºæ­¢ï¼Œè°ƒç”¨<code>invalidate</code>æ–¹æ³•å¯ä»¤è®¡æ—¶å™¨å¤±æ•ˆï¼Œå¦å¤–ï¼Œä¸€æ¬¡æ€§çš„è®¡æ—¶å™¨åœ¨è§¦å‘å®Œä»»åŠ¡ä¹‹åä¹Ÿä¼šå¤±æ•ˆã€‚</li>
<li>åå¤æ‰§è¡Œä»»åŠ¡çš„è®¡æ—¶å™¨ï¼Œå¾ˆå®¹æ˜“å¼•èµ·å¾ªç¯å¼•ç”¨ã€‚</li>
<li>å¯ä»¥æ‰©å……NSTimerçš„åŠŸèƒ½ï¼Œç”¨blockæ¥æ‰“ç ´è¿™ç§å¾ªç¯å¼•ç”¨ã€‚å¿…é¡»åˆ›å»ºåˆ†ç±»ï¼Œå°†ç›¸å…³å®ç°ä»£ç åŠ å…¥å…¶ä¸­ã€‚</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ†ç±»æ–‡ä»¶.h/.m</span></span><br><span class="line">  <span class="preprocessor">#import <span class="title">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">@interface</span> <span class="title">NSTimer</span> (<span class="title">BlockTimer</span>)</span></span><br><span class="line"></span><br><span class="line">  + (<span class="built_in">NSTimer</span> *)bt_scheduledTimerWithTimeInterval:(<span class="built_in">NSTimeInterval</span>)interval block:(<span class="keyword">void</span>(^)())block repeats:(<span class="built_in">BOOL</span>)repeats;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="preprocessor">#import <span class="title">"NSTimer+BlockTimer.h"</span></span></span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">@implementation</span> <span class="title">NSTimer</span> (<span class="title">BlockTimer</span>)</span></span><br><span class="line"></span><br><span class="line">  + (<span class="built_in">NSTimer</span> *)bt_scheduledTimerWithTimeInterval:(<span class="built_in">NSTimeInterval</span>)interval block:(<span class="keyword">void</span>(^)())block repeats:(<span class="built_in">BOOL</span>)repeats&#123;</span><br><span class="line">      <span class="keyword">return</span> [<span class="keyword">self</span> scheduledTimerWithTimeInterval:interval target:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(bt_doSomething:) userInfo:[block <span class="keyword">copy</span>] repeats:repeats];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  + (<span class="keyword">void</span>)bt_doSomething:(<span class="built_in">NSTimer</span> *)timer&#123;</span><br><span class="line">      <span class="keyword">void</span>(^block)() = timer<span class="variable">.userInfo</span>;</span><br><span class="line">      <span class="keyword">if</span> (block) &#123;</span><br><span class="line">          block();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨è°ƒç”¨æ—¶</span></span><br><span class="line">  __<span class="keyword">weak</span> <span class="keyword">typeof</span>(<span class="keyword">self</span>)weakSelf = <span class="keyword">self</span>;</span><br><span class="line">  _timer = [<span class="built_in">NSTimer</span> bt_scheduledTimerWithTimeInterval:<span class="number">1</span> block:^&#123;</span><br><span class="line">      <span class="comment">//ä¸éœ€è¦å†è½¬æˆstrongä¹Ÿå¯ä»¥å•Šï¼ï¼Ÿ</span></span><br><span class="line">      [weakSelf printName:<span class="string">@"hello"</span>];</span><br><span class="line"></span><br><span class="line">      ViewController * strongSelf = weakSelf;</span><br><span class="line">      [strongSelf printName:<span class="string">@"world"</span>];</span><br><span class="line"></span><br><span class="line">  &#125; repeats:<span class="literal">YES</span>];</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOS è“ç‰™4.0å¼€å‘]]></title>
      <url>http://koalahl.github.io/2016/03/08/iOS-%E8%93%9D%E7%89%994-0%E5%BC%80%E5%8F%91/</url>
      <content type="html"><![CDATA[<p>iOS è“ç‰™4.0å¼€å‘</p>
<h2>èƒŒæ™¯ï¼š</h2><br>1.iOSçš„è“ç‰™ä¸èƒ½ç”¨æ¥ä¼ è¾“æ–‡ä»¶ã€‚<br>2.iOSä¸iOSè®¾å¤‡ä¹‹é—´è¿›è¡Œæ•°æ®é€šä¿¡ï¼Œä½¿ç”¨gameKit.framework<br>3.iOSä¸å…¶ä»–éiOSè®¾å¤‡è¿›è¡Œæ•°æ®é€šä¿¡ï¼Œä½¿ç”¨coreBluetooth.framework<br><br><a id="more"></a><br><h2>iOSä¸­è“ç‰™çš„å®ç°æ–¹æ¡ˆ</h2>


<p>iOSä¸­æä¾›äº†4ä¸ªæ¡†æ¶ç”¨äºå®ç°è“ç‰™è¿æ¥<br>GameKit.frameworkï¼ˆç”¨æ³•ç®€å•ï¼‰<br>åªèƒ½ç”¨äºiOSè®¾å¤‡ä¹‹é—´çš„è¿æ¥ï¼Œå¤šç”¨äºæ¸¸æˆï¼ˆæ¯”å¦‚äº”å­æ£‹å¯¹æˆ˜ï¼‰ï¼Œä»iOS7å¼€å§‹è¿‡æœŸ</p>
<p>MultipeerConnectivity.framework<br>åªèƒ½ç”¨äºiOSè®¾å¤‡ä¹‹é—´çš„è¿æ¥ï¼Œä»iOS7å¼€å§‹å¼•å…¥ï¼Œä¸»è¦ç”¨äºæ–‡ä»¶å…±äº«ï¼ˆä»…é™äºæ²™ç›’çš„æ–‡ä»¶ï¼‰</p>
<p>ExternalAccessory.framework<br>å¯ç”¨äºç¬¬ä¸‰æ–¹è“ç‰™è®¾å¤‡äº¤äº’ï¼Œä½†æ˜¯è“ç‰™è®¾å¤‡å¿…é¡»ç»è¿‡è‹¹æœMFiè®¤è¯ï¼ˆå›½å†…è¾ƒå°‘ï¼‰</p>
<p>CoreBluetooth.frameworkï¼ˆæ—¶ä¸‹çƒ­é—¨ï¼‰<br>å¯ç”¨äºç¬¬ä¸‰æ–¹è“ç‰™è®¾å¤‡äº¤äº’ï¼Œå¿…é¡»è¦æ”¯æŒè“ç‰™4.0<br>ç¡¬ä»¶è‡³å°‘æ˜¯4sï¼Œç³»ç»Ÿè‡³å°‘æ˜¯iOS6<br>è“ç‰™4.0ä»¥ä½åŠŸè€—è‘—ç§°ï¼Œä¸€èˆ¬ä¹Ÿå«BLEï¼ˆBluetoothLowEnergyï¼‰<br>ç›®å‰åº”ç”¨æ¯”è¾ƒå¤šçš„æ¡ˆä¾‹ï¼šè¿åŠ¨æ‰‹åã€åµŒå…¥å¼è®¾å¤‡ã€æ™ºèƒ½å®¶å±…</p>
<p>ä¸‹é¢å…·ä½“ä»‹ç»ä½¿ç”¨CoreBluetooth.frameworkçš„ä»£ç æ­¥éª¤ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è“ç‰™ç³»ç»Ÿåº“</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;CoreBluetooth/CoreBluetooth.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¿…é¡»è¦ç”±UUIDæ¥å”¯ä¸€æ ‡ç¤ºå¯¹åº”çš„serviceå’Œcharacteristic</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#define kServiceUUID @<span class="title">"5C476471-1109-4EBE-A826-45B4F9D74FB9"</span></span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#define kCharacteristicHeartRateUUID @<span class="title">"82C7AC0F-6113-4EC9-92D1-5EEF44571398"</span></span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#define kCharacteristicBodyLocationUUID @<span class="title">"537B5FD6-1889-4041-9C35-F6949D1CA034"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()&lt;<span class="title">CBCentralManagerDelegate</span>,<span class="title">CBPeripheralDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)CBCentralManager * centralManager;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)CBPeripheral     * peripheral;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p></p><h3 id="create">åˆ›å»ºä¸­å¿ƒè§’è‰²</h3><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;CoreBluetooth/CoreBluetooth.h&gt;</span> </span></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–è“ç‰™ central manager</span></span><br><span class="line"></span><br><span class="line">    _centralManager = [[CBCentralManager alloc]initWithDelegate:<span class="keyword">self</span> queue:dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>) options:<span class="literal">nil</span>];    </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3 id="scan">æ‰«æå¤–è®¾</h3><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[manager scanForPeripheralsWithServices:<span class="literal">nil</span> options:@&#123;CBCentralManagerRestoredStateScanOptionsKey:@(<span class="literal">YES</span>)&#125;];</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3 id="connect">è¿æ¥å¤–è®¾</h3><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(<span class="built_in">NSDictionary</span> *)advertisementData RSSI:(<span class="built_in">NSNumber</span> *)RSSI </span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">if</span>([peripheral<span class="variable">.name</span>  isEqualToString:BLE_SERVICE_NAME])&#123;</span><br><span class="line">                [<span class="keyword">self</span> connect:peripheral];</span><br><span class="line">        &#125;</span><br><span class="line">s); </span><br><span class="line">&#125;       </span><br><span class="line"> </span><br><span class="line">-(<span class="built_in">BOOL</span>)connect:(CBPeripheral *)peripheral&#123;</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.manager</span><span class="variable">.delegate</span> = <span class="keyword">self</span>;</span><br><span class="line">        [<span class="keyword">self</span><span class="variable">.manager</span> connectPeripheral:peripheral</span><br><span class="line">                                options:[<span class="built_in">NSDictionary</span> dictionaryWithObject:[<span class="built_in">NSNumber</span> numberWithBool:<span class="literal">YES</span>] forKey:CBConnectPeripheralOptionNotifyOnDisconnectionKey]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3 id="service">æ‰«æå¤–è®¾ä¸­çš„æœåŠ¡å’Œç‰¹å¾</h3><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral </span><br><span class="line">&#123; </span><br><span class="line">       </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Did connect to peripheral: %@"</span>, peripheral); </span><br><span class="line">    _testPeripheral = peripheral; </span><br><span class="line">       </span><br><span class="line">    [peripheral setDelegate:<span class="keyword">self</span>];  &lt;br&gt;<span class="comment">//æŸ¥æ‰¾æœåŠ¡</span></span><br><span class="line">    [peripheral discoverServices:<span class="literal">nil</span>]; </span><br><span class="line">       </span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3 id="find">å‘ç°æœåŠ¡ï¼š</h3><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(<span class="built_in">NSError</span> *)error </span><br><span class="line">&#123; </span><br><span class="line">   </span><br><span class="line">       </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"didDiscoverServices"</span>); </span><br><span class="line">       </span><br><span class="line">    <span class="keyword">if</span> (error) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Discovered services for %@ with error: %@"</span>, peripheral<span class="variable">.name</span>, [error localizedDescription]); </span><br><span class="line">           </span><br><span class="line">        <span class="keyword">if</span> ([<span class="keyword">self</span><span class="variable">.delegate</span> respondsToSelector:<span class="keyword">@selector</span>(DidNotifyFailConnectService:withPeripheral:error:)]) </span><br><span class="line">            [<span class="keyword">self</span><span class="variable">.delegate</span> DidNotifyFailConnectService:<span class="literal">nil</span> withPeripheral:<span class="literal">nil</span> error:<span class="literal">nil</span>]; </span><br><span class="line">           </span><br><span class="line">        <span class="keyword">return</span>; </span><br><span class="line">    &#125; </span><br><span class="line">       </span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> (CBService *service <span class="keyword">in</span> peripheral<span class="variable">.services</span>) </span><br><span class="line">    &#123; </span><br><span class="line">         <span class="comment">//å‘ç°æœåŠ¡</span></span><br><span class="line">        <span class="keyword">if</span> ([service<span class="variable">.UUID</span> isEqual:[CBU<span class="built_in">UID</span> U<span class="built_in">UIDWithString</span>:U<span class="built_in">UIDSTR_ISSC_PROPRIETARY_SERVICE</span>]]) </span><br><span class="line">        &#123; </span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"Service found with UUID: %@"</span>, service<span class="variable">.UUID</span>);  &lt;br&gt;<span class="comment">//æŸ¥æ‰¾ç‰¹å¾</span></span><br><span class="line">            [peripheral discoverCharacteristics:<span class="literal">nil</span> forService:service]; </span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        &#125; </span><br><span class="line">           </span><br><span class="line">           </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3 id="findChac">å‘ç°æœåŠ¡ä¸­çš„ç‰¹å¾ï¼š</h3><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(<span class="built_in">NSError</span> *)error</span><br><span class="line">&#123;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">if</span> (error)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Discovered characteristics for %@ with error: %@"</span>, service<span class="variable">.UUID</span>, [error localizedDescription]);</span><br><span class="line">         </span><br><span class="line">        [<span class="keyword">self</span> error];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"æœåŠ¡ï¼š%@"</span>,service<span class="variable">.UUID</span>);</span><br><span class="line">    <span class="keyword">for</span> (CBCharacteristic *characteristic <span class="keyword">in</span> service<span class="variable">.characteristics</span>)</span><br><span class="line">    &#123;</span><br><span class="line">       <span class="comment">//å‘ç°ç‰¹å¾</span></span><br><span class="line">            <span class="keyword">if</span> ([characteristic<span class="variable">.UUID</span> isEqual:[CBU<span class="built_in">UID</span> U<span class="built_in">UIDWithString</span>:<span class="string">@"xxxxxxx"</span>]]) &#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@"ç›‘å¬ï¼š%@"</span>,characteristic);&lt;br&gt;<span class="comment">//ç›‘å¬ç‰¹å¾</span></span><br><span class="line">                [<span class="keyword">self</span><span class="variable">.peripheral</span> setNotifyValue:<span class="literal">YES</span> forCharacteristic:characteristic];</span><br><span class="line">            &#125;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3 id="interact">ä¸å¤–è®¾è¿›è¡Œæ•°æ®äº¤äº’</h3><br>è¯»å–æ•°æ®ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(<span class="built_in">NSError</span> *)error</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (error)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Error updating value for characteristic %@ error: %@"</span>, characteristic<span class="variable">.UUID</span>, [error localizedDescription]);</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.error_b</span> = BluetoothError_System;</span><br><span class="line">        [<span class="keyword">self</span> error];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line"><span class="comment">//    NSLog(@"æ”¶åˆ°çš„æ•°æ®ï¼š%@",characteristic.value);</span></span><br><span class="line">    [<span class="keyword">self</span> decodeData:characteristic<span class="variable">.value</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å†™æ•°æ®ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSData</span> *d2 = [[PBABluetoothDecode sharedManager] HexStringTo<span class="built_in">NSData</span>:<span class="string">@"0x02"</span>];</span><br><span class="line">                [<span class="keyword">self</span><span class="variable">.peripheral</span> writeValue:d2 forCharacteristic:characteristic type:CBCharacteristicWriteWithoutResponse];</span><br></pre></td></tr></table></figure><p></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SDWebImageå†…éƒ¨å®ç°è¿‡ç¨‹]]></title>
      <url>http://koalahl.github.io/2016/03/08/SDWebImage%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B/</url>
      <content type="html"><![CDATA[<p>SDWebImageå†…éƒ¨å®ç°è¿‡ç¨‹(æ–°ç‰ˆæœ¬åœ¨å„æ–¹æ³•å‰åŠ ä¸Šäº†sd_å‰ç¼€ï¼Œä»¥åŒºåˆ†UIImageView+AFNetworkingä¸­çš„æ–¹æ³•)</p>
<a id="more"></a>
<p>1.å…¥å£ <code>setImageWithURL:placeholderImage:options:</code>ä¼šå…ˆæŠŠ placeholderImage æ˜¾ç¤ºï¼Œç„¶å SDWebImageManager æ ¹æ® URL å¼€å§‹å¤„ç†å›¾ç‰‡ã€‚</p>
<p>2.è¿›å…¥ SDWebImageManager-<code>downloadWithURL:delegate:options:userInfo:</code>ï¼Œäº¤ç»™ SDImageCache ä»ç¼“å­˜æŸ¥æ‰¾å›¾ç‰‡æ˜¯å¦å·²ç»ä¸‹è½½ <code>queryDiskCacheForKey:delegate:userInfo:</code>.</p>
<p>3.å…ˆä»å†…å­˜å›¾ç‰‡ç¼“å­˜æŸ¥æ‰¾æ˜¯å¦æœ‰å›¾ç‰‡ï¼Œå¦‚æœå†…å­˜ä¸­å·²ç»æœ‰å›¾ç‰‡ç¼“å­˜ï¼ŒSDImageCacheDelegate å›è°ƒ <code>imageCache:didFindImage:forKey:userInfo:</code> åˆ° SDWebImageManagerã€‚</p>
<p>4.SDWebImageManagerDelegate å›è°ƒ <code>webImageManager:didFinishWithImage:</code>åˆ° UIImageView+WebCache ç­‰å‰ç«¯å±•ç¤ºå›¾ç‰‡ã€‚</p>
<p>5.å¦‚æœå†…å­˜ç¼“å­˜ä¸­æ²¡æœ‰ï¼Œç”Ÿæˆ NSInvocationOperation æ·»åŠ åˆ°é˜Ÿåˆ—å¼€å§‹ä»ç¡¬ç›˜æŸ¥æ‰¾å›¾ç‰‡æ˜¯å¦å·²ç»ç¼“å­˜ã€‚</p>
<p>6.æ ¹æ® URLKey åœ¨ç¡¬ç›˜ç¼“å­˜ç›®å½•ä¸‹å°è¯•è¯»å–å›¾ç‰‡æ–‡ä»¶ã€‚è¿™ä¸€æ­¥æ˜¯åœ¨ NSOperation è¿›è¡Œçš„æ“ä½œï¼Œæ‰€ä»¥å›ä¸»çº¿ç¨‹è¿›è¡Œç»“æœå›è°ƒ notifyDelegate:ã€‚</p>
<p>7.å¦‚æœä¸Šä¸€æ“ä½œä»ç¡¬ç›˜è¯»å–åˆ°äº†å›¾ç‰‡ï¼Œå°†å›¾ç‰‡æ·»åŠ åˆ°å†…å­˜ç¼“å­˜ä¸­ï¼ˆå¦‚æœç©ºé—²å†…å­˜è¿‡å°ï¼Œä¼šå…ˆæ¸…ç©ºå†…å­˜ç¼“å­˜ï¼‰ã€‚SDImageCacheDelegate å›è°ƒ <code>imageCache:didFindImage:forKey:userInfo:</code>ã€‚è¿›è€Œå›è°ƒå±•ç¤ºå›¾ç‰‡ã€‚</p>
<p>8.å¦‚æœä»ç¡¬ç›˜ç¼“å­˜ç›®å½•è¯»å–ä¸åˆ°å›¾ç‰‡ï¼Œè¯´æ˜æ‰€æœ‰ç¼“å­˜éƒ½ä¸å­˜åœ¨è¯¥å›¾ç‰‡ï¼Œéœ€è¦ä¸‹è½½å›¾ç‰‡ï¼Œå›è°ƒ <code>imageCache:didNotFindImageForKey:userInfo:</code>ã€‚</p>
<p>9.å…±äº«æˆ–é‡æ–°ç”Ÿæˆä¸€ä¸ªä¸‹è½½å™¨ SDWebImageDownloader å¼€å§‹ä¸‹è½½å›¾ç‰‡ã€‚</p>
<p>10.å›¾ç‰‡ä¸‹è½½ç”± NSURLConnection æ¥åšï¼Œå®ç°ç›¸å…³ delegate æ¥åˆ¤æ–­å›¾ç‰‡ä¸‹è½½ä¸­ã€ä¸‹è½½å®Œæˆå’Œä¸‹è½½å¤±è´¥ã€‚</p>
<p>11.<code>connection:didReceiveData:</code>ä¸­åˆ©ç”¨ ImageIO åšäº†æŒ‰å›¾ç‰‡ä¸‹è½½è¿›åº¦åŠ è½½æ•ˆæœã€‚</p>
<p>12.<code>connectionDidFinishLoading:</code>æ•°æ®ä¸‹è½½å®Œæˆåäº¤ç»™ SDWebImageDecoder åšå›¾ç‰‡è§£ç å¤„ç†ã€‚</p>
<p>13.å›¾ç‰‡è§£ç å¤„ç†åœ¨ä¸€ä¸ª NSOperationQueue å®Œæˆï¼Œä¸ä¼šæ‹–æ…¢ä¸»çº¿ç¨‹ UIã€‚å¦‚æœæœ‰éœ€è¦å¯¹ä¸‹è½½çš„å›¾ç‰‡è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œæœ€å¥½ä¹Ÿåœ¨è¿™é‡Œå®Œæˆï¼Œæ•ˆç‡ä¼šå¥½å¾ˆå¤šã€‚</p>
<p>14.åœ¨ä¸»çº¿ç¨‹ <code>notifyDelegateOnMainThreadWithInfo:</code> å®£å‘Šè§£ç å®Œæˆï¼Œ<code>imageDecoder:didFinishDecodingImage:userInfo:</code> å›è°ƒç»™ SDWebImageDownloaderã€‚</p>
<p>15.<code>imageDownloader:didFinishWithImage:</code> å›è°ƒç»™ SDWebImageManager å‘ŠçŸ¥å›¾ç‰‡ä¸‹è½½å®Œæˆã€‚</p>
<p>16.é€šçŸ¥æ‰€æœ‰çš„ downloadDelegates ä¸‹è½½å®Œæˆï¼Œå›è°ƒç»™éœ€è¦çš„åœ°æ–¹å±•ç¤ºå›¾ç‰‡ã€‚</p>
<p>17.å°†å›¾ç‰‡ä¿å­˜åˆ° SDImageCache ä¸­ï¼Œå†…å­˜ç¼“å­˜å’Œç¡¬ç›˜ç¼“å­˜åŒæ—¶ä¿å­˜ã€‚å†™æ–‡ä»¶åˆ°ç¡¬ç›˜ä¹Ÿåœ¨ä»¥å•ç‹¬ NSInvocationOperation å®Œæˆï¼Œé¿å…æ‹–æ…¢ä¸»çº¿ç¨‹ã€‚</p>
<p>18.SDImageCache åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šæ³¨å†Œä¸€äº›æ¶ˆæ¯é€šçŸ¥ï¼Œåœ¨å†…å­˜è­¦å‘Šæˆ–é€€åˆ°åå°çš„æ—¶å€™æ¸…ç†å†…å­˜å›¾ç‰‡ç¼“å­˜ï¼Œåº”ç”¨ç»“æŸçš„æ—¶å€™æ¸…ç†è¿‡æœŸå›¾ç‰‡ã€‚</p>
<p>19.SDWI ä¹Ÿæä¾›äº† UIButton+WebCache å’Œ MKAnnotationView+WebCacheï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
<p>20.SDWebImagePrefetcher å¯ä»¥é¢„å…ˆä¸‹è½½å›¾ç‰‡ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ã€‚</p>
<p>ä»ä¸Šé¢æµç¨‹å¯ä»¥çœ‹å‡ºï¼Œå½“ä½ è°ƒç”¨setImageWithURL:æ–¹æ³•çš„æ—¶å€™ï¼Œä»–ä¼šè‡ªåŠ¨å»ç»™ä½ å¹²è¿™ä¹ˆå¤šäº‹ï¼Œå½“ä½ éœ€è¦åœ¨æŸä¸€å…·ä½“æ—¶åˆ»åšäº‹æƒ…çš„æ—¶å€™ï¼Œä½ å¯ä»¥è¦†ç›–è¿™äº›æ–¹æ³•ã€‚æ¯”å¦‚åœ¨ä¸‹è½½æŸä¸ªå›¾ç‰‡çš„è¿‡ç¨‹ä¸­è¦å“åº”ä¸€ä¸ªäº‹ä»¶ï¼Œå°±è¦†ç›–è¿™ä¸ªæ–¹æ³•ï¼š</p>
<p>è¦†ç›–æ–¹æ³•ï¼ŒæŒ‡å“ªæ‰“å“ªï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ä¸‹è½½imagePath2çš„æ—¶å€™å“åº”<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SDWebImageManager *manager = [SDWebImageManager sharedManager];</span><br><span class="line"> </span><br><span class="line">[manager downloadImageWithURL:imagePath2 options:SDWebImageRetryFailed progress:^(<span class="built_in">NSInteger</span> receivedSize, <span class="built_in">NSInteger</span> expectedSize) &#123;</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"æ˜¾ç¤ºå½“å‰è¿›åº¦"</span>);</span><br><span class="line">     </span><br><span class="line">&#125; completed:^(<span class="built_in">UIImage</span> *image, <span class="built_in">NSError</span> *error, SDImageCacheType cacheType, <span class="built_in">BOOL</span> finished, <span class="built_in">NSURL</span> *imageURL) &#123;</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ä¸‹è½½å®Œæˆ"</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></p>
<p>å½“æœåŠ¡å™¨æ›´æ–°äº†æŸä¸€å¼ å›¾ç‰‡èµ„æºæ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦é‡æ–°åŠ è½½ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¾ç½®SDWebImageOptionä¸ºSDWebImageRefreshCachedï¼›é™„ä¸Šå…¨éƒ¨çš„SDWebImageOptionsï¼š<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">NS_OPTIONS</span><span class="params">(NSUInteger, SDWebImageOptions)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * By default, when a URL fail to be downloaded, the URL is blacklisted so the library won't keep trying.</span><br><span class="line">     * This flag disable this blacklisting.</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageRetryFailed = <span class="number">1</span> &lt;&lt; <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * By default, image downloads are started during UI interactions, this flags disable this feature,</span><br><span class="line">     * leading to delayed download on UIScrollView deceleration for instance.</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageLowPriority = <span class="number">1</span> &lt;&lt; <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * This flag disables on-disk caching</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageCacheMemoryOnly = <span class="number">1</span> &lt;&lt; <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * This flag enables progressive download, the image is displayed progressively during download as a browser would do.</span><br><span class="line">     * By default, the image is only displayed once completely downloaded.</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageProgressiveDownload = <span class="number">1</span> &lt;&lt; <span class="number">3</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Even if the image is cached, respect the HTTP response cache control, and refresh the image from remote location if needed.</span><br><span class="line">     * The disk caching will be handled by NSURLCache instead of SDWebImage leading to slight performance degradation.</span><br><span class="line">     * This option helps deal with images changing behind the same request URL, e.g. Facebook graph api profile pics.</span><br><span class="line">     * If a cached image is refreshed, the completion block is called once with the cached image and again with the final image.</span><br><span class="line">     *</span><br><span class="line">     * Use this flag only if you can't make your URLs static with embeded cache busting parameter.</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageRefreshCached = <span class="number">1</span> &lt;&lt; <span class="number">4</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * In iOS 4+, continue the download of the image if the app goes to background. This is achieved by asking the system for</span><br><span class="line">     * extra time in background to let the request finish. If the background task expires the operation will be cancelled.</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageContinueInBackground = <span class="number">1</span> &lt;&lt; <span class="number">5</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Handles cookies stored in NSHTTPCookieStore by setting</span><br><span class="line">     * NSMutableURLRequest.HTTPShouldHandleCookies = YES;</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageHandleCookies = <span class="number">1</span> &lt;&lt; <span class="number">6</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Enable to allow untrusted SSL ceriticates.</span><br><span class="line">     * Useful for testing purposes. Use with caution in production.</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageAllowInvalidSSLCertificates = <span class="number">1</span> &lt;&lt; <span class="number">7</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * By default, image are loaded in the order they were queued. This flag move them to</span><br><span class="line">     * the front of the queue and is loaded immediately instead of waiting for the current queue to be loaded (which </span><br><span class="line">     * could take a while).</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageHighPriority = <span class="number">1</span> &lt;&lt; <span class="number">8</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * By default, placeholder images are loaded while the image is loading. This flag will delay the loading</span><br><span class="line">     * of the placeholder image until after the image has finished loading.</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageDelayPlaceholder = <span class="number">1</span> &lt;&lt; <span class="number">9</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * We usually don't call transformDownloadedImage delegate method on animated images,</span><br><span class="line">     * as most transformation code would mangle it.</span><br><span class="line">     * Use this flag to transform them anyway.</span><br><span class="line">     */</span></span><br><span class="line">    SDWebImageTransformAnimatedImage = <span class="number">1</span> &lt;&lt; <span class="number">10</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[QRCodeä¸Core Image]]></title>
      <url>http://koalahl.github.io/2016/03/05/QRCode%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/</url>
      <content type="html"><![CDATA[<p>ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šå…³äºäºŒç»´ç æ–¹é¢çš„æ–‡ç« äº†ï¼Œå†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„æ˜¯å› ä¸ºè¦è®°å½•ä¸€ä¸ªå…³äºä¿å­˜äºŒç»´ç å›¾ç‰‡åˆ°ç›¸å†Œçš„é—®é¢˜ï¼Œé¡ºä¾¿å›é¡¾ä¸€ä¸‹iOSå¼€å‘ä¸­ä½¿ç”¨äºŒç»´ç çš„å†å²ã€‚å¥½äº†ï¼ŒåºŸè¯å°‘è¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h2>è¦è®¨è®ºçš„é—®é¢˜</h2><br>åœ¨å‚è€ƒ<a href="http://www.appcoda.com/qr-code-generator-tutorial/" target="_blank" rel="external">Building a QR Code Generator with Core Image Filters</a>è¿™ç¯‡æ–‡ç« ï¼Œå®Œæˆäº†äºŒç»´ç ç”Ÿæˆçš„æ —å­ã€‚<br>äºŒç»´ç çš„æ‰«æåˆ™æ˜¯ç”¨äº†AVFoundationæ¡†æ¶æ¥ç¼–å†™çš„<a href="https://github.com/koalahl/HLQRCode" target="_blank" rel="external">GithubÂ·HLQRCode</a>ã€‚æœ€åæƒ³æŠŠç”Ÿæˆçš„äºŒç»´ç å›¾ç‰‡ä¿å­˜åˆ°ç›¸å†Œä¸­å´æ²¡æœ‰æˆåŠŸã€‚<br>å‚è€ƒäº†ç½‘ä¸Šçš„ä»£ç ï¼Œä½¿ç”¨äº†CIImag-&gt;CGImage-&gt;writeImageToAlbumçš„æ–¹å¼ã€‚<br><br><a id="more"></a><br>ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CIContext</span> * context = [<span class="built_in">CIContext</span> contextWithOptions:<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">CGImageRef</span> cgimg = [context create<span class="built_in">CGImage</span>:<span class="keyword">self</span><span class="variable">.qrcodeImg</span> fromRect:[<span class="keyword">self</span><span class="variable">.qrcodeImg</span> extent] ];</span><br><span class="line"></span><br><span class="line">ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];</span><br><span class="line">[library writeImageToSavedPhotosAlbum:cgimg metadata:[<span class="keyword">self</span><span class="variable">.qrcodeImg</span> properties] completionBlock:^(<span class="built_in">NSURL</span> *assetURL, <span class="built_in">NSError</span> *error) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(error != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        msg = <span class="string">@"ä¿å­˜å›¾ç‰‡å¤±è´¥"</span> ;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,assetURL);</span><br><span class="line">        msg = <span class="string">@"ä¿å­˜å›¾ç‰‡æˆåŠŸ"</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="literal">nil</span></span><br><span class="line">                                                    message:msg</span><br><span class="line">                                                   delegate:<span class="keyword">self</span></span><br><span class="line">                                          cancelButtonTitle:<span class="string">@"ç¡®å®š"</span></span><br><span class="line">                                          otherButtonTitles:<span class="literal">nil</span>];</span><br><span class="line">    </span><br><span class="line">    [alert show];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><br><br>ä½†æ˜¯è¿™æ ·æ— è®ºæ€ä¹ˆæ ·éƒ½æ— æ³•åœ¨ç›¸å†Œä¸­çœ‹åˆ°ä¿å­˜çš„äºŒç»´ç å›¾ç‰‡ã€‚è¿˜æŠ¥é”™<code>message &quot;BSXPCMessage received error for message: Connection interrupted&quot;</code>ã€‚å¯¹æ¯”å‚è€ƒçš„ä»£ç éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå´æ‰¾ä¸å‡ºåŸå› ã€‚æˆ‘å°±åœ¨æ–‡ç« è¯„è®ºä¸­ç•™è¨€é—®äº†è¿™ä¸ªé—®é¢˜ï¼Œåæ¥ä¸€ä¸ªæœ‹å‹æå‡ºäº†è§£å†³æ–¹æ¡ˆï¼Œä»”ç»†ä¸€çœ‹é¡¿æ—¶æç„¶å¤§æ‚Ÿã€‚<br><br><h2>è§£å†³æ–¹å¼åŠè¦ç‚¹</h2>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CIContext</span> * context = [<span class="built_in">CIContext</span> contextWithOptions:@&#123;k<span class="built_in">CIContextUseSoftwareRenderer</span>:@YES&#125;];</span><br></pre></td></tr></table></figure>
<p>çœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿæ˜¯çš„ï¼Œå¤šäº†ä¸€ä¸ªoptionå‚æ•°<code>kCIContextUseSoftwareRenderer</code>.ç„¶ååœ¨development docä¸­æŸ¥çœ‹äº†å…³äº<code>contextWithOptions</code>æ–¹æ³•çš„æè¿°ï¼š<br>contextWithOptions:<br><blockquote><p>You can create a CPU-based context by providing the key kCIContextUseSoftwareRenderer. A CPU-based context supports larger input and output images than a GPU-based context. It also allows your app to perform processing in the background, such as when saving the rendered output to the Photo Library.</p>
<p>GPU rendering is faster than CPU rendering, but the resulting image is not displayed on the device until after is it copied to CPU memory and converted to another image type, such as a UIImage object.</p>
<footer><strong>@Apple Development Doc</strong><cite><a href="https://developer.apple.com/library/prerelease/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIContext_Class/index.html#//apple_ref/occ/clm/CIContext/contextWithOptions:" target="_blank" rel="external">developer.apple.com/library/prerelease/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIContext_Class/index.html#//apple_ref/occ/clm/CIContext/contextWithOptions:</a></cite></footer></blockquote></p>
<p>é¡¿æ—¶è§‰å¾—è‡ªå·±å½“æ—¶å¥½ç¬¨ï¼Œéƒ½æ²¡æœ‰æƒ³åˆ°å»æŸ¥ä¸€ä¸‹å¼€å‘æ–‡æ¡£ã€‚o(â•¯â–¡â•°)o</p>
<ul>
<li>NSString *kCIContextOutputColorSpace;       - A key for the color space to use for images before they are rendered to the context. ä½¿ç”¨OpenGLES</li>
<li>NSString *kCIContextWorkingColorSpace;      - A key for the color space to use for image operations. ä½¿ç”¨OpenGLES</li>
<li>NSString *kCIContextUseSoftwareRenderer;    - A key for enabling software renderer use. If the associated NSNumber object is YES, then the software renderer is required. ä½¿ç”¨CPU</li>
<li>NSString *kCIContextPriorityRequestLow;     - A key for enabling low-priority GPU use.</li>
<li>NSString *kCIContextWorkingFormat;          - An option for the color format to use for intermediate results when rendering with the context.</li>
</ul>
<p><code>contextWithOptions</code>æ–¹æ³•é»˜è®¤æ˜¯åœ¨GPUä¸Šå¤„ç†å›¾åƒã€‚æ ¹æ®ä¸åŒçš„å‚æ•°è®¾ç½®ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚<br>ä»¥ä¸Šè¿™äº›å…¶å®ä¸æ˜¯å¾ˆç†è§£ï¼Œå›§ã€‚å…·ä½“å‚è€ƒ<a href="https://developer.apple.com/library/prerelease/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIContext_Class/index.html#//apple_ref/doc/constant_group/Context_Options" target="_blank" rel="external">Context Options</a></p>
<p></p><h2>äºŒç»´ç çš„å†å²</h2><br>åœ¨iOS7ä»¥å‰ï¼ŒiOSå¼€å‘ä½¿ç”¨äºŒç»´ç éƒ½æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€‚æ¯”è¾ƒæµè¡Œçš„å°±æ˜¯<code>ZXing</code>å’Œ<code>Zbar</code>äº†ã€‚<br>ä¸è¯´å®ƒä»¬çš„å®ç°åŸç†äº†ï¼Œé‡åˆ°æœ€å¤šçš„é—®é¢˜å°±æ˜¯ä¸å…¶ä»–ç¬¬ä¸‰æ–¹åº“ï¼ˆæ¯”å¦‚æ”¯ä»˜å®SDKï¼Œç™¾åº¦åœ°å›¾SDKï¼‰ç»§æ‰¿åœ¨ä¸€èµ·æ—¶å‡ºç°duplicate symboläº†ã€‚è§£å†³æ–¹æ³•ä¹Ÿå¾ˆéº»çƒ¦ï¼šä¿®æ”¹æºç ï¼Œé‡æ–°ç¼–è¯‘é™æ€åº“.aæ–‡ä»¶ã€‚<p></p>
<p>ä¸è¿‡ç°åœ¨å¾ˆå°‘ç”¨åˆ°äºŒç»´ç äº†ï¼Œè¦ç”¨ä¹Ÿè¦ç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ¡†æ¶å“Ÿ~ï¼</p>
<p></p><h2>æ€»ç»“</h2><br>1.é‡åˆ°é—®é¢˜å…ˆæŸ¥çœ‹å¼€å‘æ–‡æ¡£ï¼Œå†Googleï¼<br>2.ç ”ç©¶é—®é¢˜è¦æ·±å…¥ï¼<br>åé¢å­¦ä¹ ä¸€ä¸‹Core Imageçš„ä¸œè¥¿ï¼Œè¿˜æœ‰ä¸ä¹‹çš„GPUImageåº“ï¼<p></p>
<p></p><h2>å‚è€ƒæ–‡ç« </h2><br><a href="https://developer.apple.com/library/prerelease/ios/documentation/GraphicsImaging/Conceptual/CoreImaging/ci_intro/ci_intro.html#//apple_ref/doc/uid/TP30001185" target="_blank" rel="external">Core Image Programming Guide</a><br><a href="http://stackoverflow.com/questions/26065808/bsxpcmessage-received-error-for-message-connection-interrupted/29872829#29872829" target="_blank" rel="external">BSXPCMessage received error for message: Connection interrupted</a><p></p>
<div align="center"><br>    <img src="http://i3.sinaimg.cn/edu/2015/0724/U1151P42DT20150724094518.jpg" alt="girl"><br></div>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Xibä¸ä¹‹å…³è”çš„è‡ªå®šä¹‰Class]]></title>
      <url>http://koalahl.github.io/2016/03/04/Xib%E4%B8%8E%E4%B9%8B%E5%85%B3%E8%81%94%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89Class/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼šç‚¹å‡»ã€çŒœä½ å–œæ¬¢ã€‘è§†å›¾è¿›å…¥å•†å“è¯¦æƒ…åï¼Œå†è¿”å›åˆ°é¦–é¡µæ—¶ï¼Œæ²¡æœ‰åŸå…ˆçš„æ•°æ®äº†ã€‚<br> <img src="/img/è¢«æ–°ç”Ÿæˆçš„viewè¦†ç›–.png" width="300" height="588" alt="è¢«æ–°ç”Ÿæˆçš„viewè¦†ç›–" align="center"><br>æ‰“å¼€Revealçœ‹äº†ä¸‹å±‚çº§å…³ç³»ï¼ŒåŸæ¥æ˜¯è¢«äºŒæ¬¡ç”Ÿæˆçš„ç•Œé¢è¦†ç›–äº†ã€‚å†ç»†çœ‹ä¸€ä¸‹ï¼Œä¸Šé¢çš„è§†å›¾éƒ½è¢«äºŒæ¬¡ç”Ÿæˆäº†ã€‚çœŸæ˜¯å“”äº†ç‹—äº†ï¼<br><img src="/img/reveal view UI hierarchy 2.png" alt="reveal view UI hierarchy"><br><img src="/img/reveal view UI hierarchy.png" alt="reveal view UI hierarchy"><br><a id="more"></a></p>
<p></p><h2><code>drawRect</code>æ–¹æ³•</h2><br>å¥½å§ï¼Œä¿®æ”¹ä»£ç å§ã€‚å› ä¸ºè¿™äº›è§†å›¾éƒ½æ˜¯åœ¨xibä¸Šåˆ›å»ºå¥½äº†ï¼Œå¦å¤–æ–°å»ºäº†ä¸ä¹‹å¯¹åº”çš„è‡ªå®šä¹‰ç±»ï¼Œæ‰€ä»¥éƒ½ç›´æ¥ç”¨çš„<code>drawRect</code>æ–¹æ³•å»åˆå§‹åŒ–UIå…ƒç´ ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (void)drawRect:(CGRect)rect &#123;&#10;&#10;    [self initSubViews];&#10;&#125;</span><br></pre></td></tr></table></figure><p></p>
<blockquote><p>The default implementation of this method does nothing. Subclasses that use technologies such as Core Graphics and UIKit to draw their viewâ€™s content should override this method and implement their drawing code there. You do not need to override this method if your view sets its content in other ways. For example, you do not need to override this method if your view just displays a background color or if your view sets its content directly using the underlying layer object.</p>
<p>If you subclass UIView directly, your implementation of this method does not need to call super. However, if you are subclassing a different view class, you should call super at some point in your implementation.<br>This method is called when a view is first displayed or when an event occurs that invalidates a visible part of the view. You should never call this method directly yourself. To invalidate part of your view, and thus cause that portion to be redrawn, call the setNeedsDisplay or setNeedsDisplayInRect: method instead.</p>
<footer><strong>@Apple Develop</strong><cite><a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIView_Class/index.html#//apple_ref/swift/instm/UIView/c:objc(cs)UIView(im)drawRect:" target="_blank" rel="external">developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIView_Class/index.html#//apple_ref/swift/instm/UIView/c:objc(cs)UIView(im)drawRect:</a></cite></footer></blockquote>
<p>è¿™é‡Œå°±å‡ºç°äº†é—®é¢˜ã€‚åœ¨æ¯æ¬¡é‡æ–°è¿”å›åˆ°é¦–é¡µåï¼Œ<code>drawRect</code>æ–¹æ³•åˆè¢«é‡æ–°è°ƒç”¨äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥ç”Ÿæˆäº†æ–°çš„è§†å›¾è¦†ç›–äº†åŸæ¥çš„è§†å›¾ï¼Œä½†æ˜¯åˆæ²¡æœ‰è¯·æ±‚æ•°æ®ï¼Œæ‰€ä»¥å°±çœ‹ä¸åˆ°äº†ã€‚<br><blockquote><p>drawRectæ–¹æ³•åªè¢«é‡æ–°è°ƒç”¨äº†ä¸€æ¬¡ï¼Œåœ¨è¿™ä¹‹åå°±ä¸ä¼šå†è¢«è°ƒç”¨ã€‚</p>
</blockquote></p>
<p>å› ä¸ºä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°±ä¸ç”¨<code>drawRect</code>å»åˆå§‹åŒ–é¡µé¢å…ƒç´ äº†ï¼Œè€Œæ˜¯ç”¨äº†<code>initWithCorder</code>æ–¹æ³•ã€‚<br>æ³¨æ„å› ä¸ºè§†å›¾æ˜¯è¢«ç›´æ¥åˆ›å»ºåœ¨xibä¸Šçš„ï¼Œå¹¶æ²¡æœ‰æ‰§è¡Œ<code>initWithFrame</code>æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithCoder:(NSCoder *)aDecoder&#123;&#10;    self = [super initWithCoder:aDecoder];&#10;    if (self) &#123;&#10;        [self initSubViews];&#10;    &#125;&#10;    &#10;    return self;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p></p><h2>æ€»ç»“</h2><br>1.å°½é‡ä¸è¦ä½¿ç”¨drawRectæ–¹æ³•ï¼Œæ€§èƒ½ä¸‹é™å‰å®³æ’’ã€‚<br>2.å·²ç»åœ¨xibä¸Šåˆ›å»ºçš„è§†å›¾ï¼Œä¸å…¶å…³è”çš„å­ç±»ä¸­<code>initWithFrame</code>æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ã€‚<p></p>
<div align="center"><br>    <img src="http://lenorephoto.b0.upaiyun.com/7283e0c4e156f2a6.jpg" alt="girl"><br></div>


]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç§»åŠ¨IMå¼€å‘è¦ç‚¹]]></title>
      <url>http://koalahl.github.io/2016/02/28/%E7%A7%BB%E5%8A%A8IM%E5%BC%80%E5%8F%91%E8%A6%81%E7%82%B9/</url>
      <content type="html"><![CDATA[<p>ä¸ªäººå¯¹äºIMå¼€å‘ä¸­å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œç½‘æœä¸€ç¯‡å¥½æ–‡ï¼Œè®°å½•ä¸‹æ¥ã€‚<br>è½¬è½½äº <a href="http://xiangwangfeng.com/2015/05/20/%E7%A7%BB%E5%8A%A8IM%E5%BC%80%E5%8F%91%E9%82%A3%E4%BA%9B%E4%BA%8B/" target="_blank" rel="external">ç§»åŠ¨IMå¼€å‘é‚£äº›äº‹</a></p>
<a id="more"></a>
<h2>é€šè®¯æ–¹å¼é€‰æ‹©</h2><br>IMé€šè®¯æ–¹å¼æ— éä¸¤ç§é€‰æ‹©:è®¾å¤‡ç›´è¿(P2P)å’Œé€šè¿‡æœåŠ¡å™¨ä¸­è½¬ã€‚<br><h3>P2P</h3><br>P2På¤šè§äºå±€åŸŸç½‘å†…èŠå¤©å·¥å…·ï¼Œå…¸å‹çš„åº”ç”¨æœ‰:é£é¸½ä¼ ä¹¦ï¼Œå¤©ç½‘Maze(ä½ æ‡‚çš„)ç­‰ã€‚è¿™ç±»è½¯ä»¶åœ¨å¯åŠ¨åä¸€èˆ¬åšä¸¤ä»¶äº‹æƒ…<br><br><em> è¿›è¡ŒUDPå¹¿æ’­:å‘é€è‡ªå·±ä¿¡æ¯å’Œæ¥å—åŒå±€åŸŸç½‘å†…å…¶ä»–ç«¯ä¿¡æ¯
</em> å¼€å¯TCPç›‘å¬:ç­‰å¾…å…¶ä»–ç«¯è¿›è¡Œè¿æ¥<br><br>è¯¦ç»†çš„æµç¨‹å¯ä»¥å‚è€ƒ<a href="http://ipmsg.org/" target="_blank" rel="external">é£é¸½ä¼ ä¹¦æºç </a>ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼åœ¨æœ‰ç§ç§é™åˆ¶å’Œä¸ä¾¿:ä¸€æ–¹é¢å®ƒåªé€‚åˆåœ¨çº¿çš„ç‚¹å¯¹ç‚¹æ¶ˆæ¯ä¼ è¾“ï¼Œå¯¹ç¦»çº¿ï¼Œç¾¤ç»„ç­‰ä¸šåŠ¡æ”¯æŒä¸å¤Ÿã€‚å¦ä¸€æ–¹é¢ç”±äº <a href="http://zh.wikipedia.org/zh-cn/%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2" target="_blank" rel="external">NAT</a> çš„å­˜åœ¨ï¼Œä½¿å¾—ä¸åŒå±€åŸŸç½‘å†…æœºå™¨äº’è”éš¾åº¦å¤§å¤§ä¸Šå‡ï¼Œåœ¨æŸäº›ç½‘ç»œç±»å‹(å¯¹ç§°NAT)ä¸‹æ— æ³•å»ºç«‹è¿æ¥ã€‚<br><h3>æœåŠ¡å™¨ä¸­è½¬</h3><br>å‡ ä¹æ‰€æœ‰äº’è”ç½‘IMäº§å“éƒ½é‡‡ç”¨æœåŠ¡å™¨ä¸­è½¬è¿™ç§æ–¹å¼è¿›è¡Œæ¶ˆæ¯ä¼ è¾“ï¼Œç›¸å¯¹äºP2Pçš„æ–¹å¼ï¼Œå®ƒæœ‰å¦‚ä¸‹çš„ä¼˜ç‚¹:<br><br><em> èƒ½å¤Ÿæ”¯æŒæ›´å¤šP2Pæ— æ³•æ”¯æŒæˆ–æ”¯æŒä¸å¥½çš„ä¸šåŠ¡ï¼Œå¦‚ç¦»çº¿æ¶ˆæ¯ï¼Œç¾¤ç»„ï¼ŒèŠå¤©å®¤æœåŠ¡
</em> æ–¹ä¾¿ä¸šåŠ¡é€»è¾‘çš„æ‹“å±•å’Œæ–°æ—§ç‰ˆæœ¬çš„å…¼å®¹<br><br>å½“ç„¶å®ƒä¹Ÿæœ‰è‡ªå·±çš„é—®é¢˜:æœåŠ¡å™¨æ¶æ„å¤æ‚ï¼Œå¹¶å‘è¦æ±‚é«˜ã€‚<br><br><br><h2>ç½‘ç»œè¿æ¥æ–¹å¼</h2><br>IMä¸»æµç½‘ç»œè¿æ¥æ–¹å¼æœ‰ä¸¤ç§:<br><br><em> åŸºäºTCPçš„é•¿è¿æ¥
</em> åŸºäºHTTPçŸ­è¿æ¥PULLçš„æ–¹å¼<br><br>åè€…å¸¸è§äºWEB IMç³»ç»Ÿ(å½“ç„¶ç°åœ¨å¾ˆå¤šWEB IMéƒ½æ˜¯åŸºäºWebSocketå®ç°)ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œæ–¹ä¾¿å¼€å‘ä¸Šæ‰‹ï¼Œé—®é¢˜æ˜¯æµé‡å¤§ï¼ŒæœåŠ¡å™¨è´Ÿè½½è¾ƒå¤§ï¼Œæ¶ˆæ¯åŠæ—¶æ€§æ— æ³•å¾ˆå¥½åœ°ä¿è¯ï¼Œå¯¹å¤§è§„æ¨¡çš„ç”¨æˆ·é‡æ”¯æŒä¸å¤Ÿï¼Œæ¯”è¾ƒé€‚åˆå°å‹çš„IMç³»ç»Ÿ,å¦‚å°ç½‘ç«™çš„å®¢æˆ·ç³»ç»Ÿã€‚<br><br>åŸºäºTCPé•¿è¿æ¥åˆ™èƒ½å¤Ÿæ›´å¥½åœ°æ”¯æŒå¤§æ‰¹é‡ç”¨æˆ·ï¼Œé—®é¢˜æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„å®ç°æ¯”è¾ƒå¤æ‚ã€‚å½“ç„¶ä¹Ÿè¿˜æœ‰ä¸€äº›å˜ç§ï¼Œå¦‚ä¸‹è¡Œä½¿ç”¨MQTTè¿›è¡ŒæœåŠ¡å™¨é€šçŸ¥/æ¶ˆæ¯çš„ä¸‹å‘ï¼Œä¸Šè¡Œä½¿ç”¨HTTPçŸ­è¿æ¥è¿›è¡ŒæŒ‡ä»¤å’Œæ¶ˆæ¯çš„ä¸Šä¼ ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿä¿è¯ä¸‹è¡Œæ¶ˆæ¯/æŒ‡ä»¤çš„åŠæ—¶æ€§ï¼Œä½†æ˜¯åœ¨å¼±ç½‘ç»œä¸‹ä¸Šè¡Œæ…¢çš„é—®é¢˜è¿˜æ˜¯æ¯”è¾ƒä¸¥é‡ã€‚æ—©æœŸçš„æ¥å¾€å°±æ˜¯åŸºäºè¿™ç§æ–¹å¼ã€‚<br><br><h2>åè®®é€‰æ‹©</h2>

<p>IMåè®®é€‰æ‹©åŸåˆ™ä¸€èˆ¬æ˜¯:æ˜“äºæ‹“å±•ï¼Œæ–¹ä¾¿è¦†ç›–å„ç§ä¸šåŠ¡é€»è¾‘ï¼ŒåŒæ—¶åˆæ¯”è¾ƒèŠ‚çº¦æµé‡ã€‚åä¸€ç‚¹çš„éœ€æ±‚åœ¨ç§»åŠ¨ç«¯IMä¸Šå°¤å…¶é‡è¦ã€‚</p>
<p>å¸¸è§çš„åè®®æœ‰:</p>
<ul>
<li><a href="http://zh.wikipedia.org/wiki/XMPP" target="_blank" rel="external">XMPP</a></li>
<li><a href="http://zh.wikipedia.org/wiki/%E4%BC%9A%E8%AF%9D%E5%8F%91%E8%B5%B7%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">SIP</a></li>
<li><a href="http://mqtt.org/" target="_blank" rel="external">MQTT</a></li>
<li>ç§æœ‰åè®®</li>
</ul>
<p>XMPPåè®®çš„ä¼˜ç‚¹åœ¨äº:åè®®å¼€æºï¼Œå¯æ‹“å±•æ€§å¼ºï¼Œåœ¨å„ä¸ªç«¯(åŒ…æ‹¬æœåŠ¡å™¨)æœ‰å„ç§è¯­è¨€çš„å®ç°ï¼Œå¼€å‘è€…æ¥å…¥æ–¹ä¾¿ã€‚ä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜¯ä¸å°‘:XMLè¡¨ç°åŠ›å¼±ï¼Œæœ‰å¤ªå¤šå†—ä½™ä¿¡æ¯ï¼Œæµé‡å¤§ï¼Œå®é™…ä½¿ç”¨æ—¶æœ‰å¤§é‡å¤©å‘ã€‚</p>
<p>SIPåè®®å¤šç”¨äºVOIPç›¸å…³çš„æ¨¡å—ï¼Œæ˜¯ä¸€ç§æ–‡æœ¬åè®®ï¼Œç”±äºæˆ‘å¹¶æ²¡æœ‰å®é™…ç”¨è¿‡ï¼Œæ‰€ä»¥ä¸åšè¯„è®ºï¼Œä½†ä»å®ƒæ˜¯æ–‡æœ¬åè®®è¿™ä¸€ç‚¹å‡ ä¹å¯ä»¥æ–­å®šå®ƒçš„æµé‡ä¸ä¼šå°ã€‚</p>
<p>MQTTçš„ä¼˜ç‚¹æ˜¯åè®®ç®€å•ï¼Œæµé‡å°‘ï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºIMè®¾è®¡çš„åè®®ï¼Œå¤šä½¿ç”¨äºæ¨é€ã€‚</p>
<p>è€Œå¸‚é¢ä¸Šå‡ ä¹æ‰€æœ‰ä¸»æµIM APPéƒ½æ˜¯æ˜¯ä½¿ç”¨ç§æœ‰åè®®ï¼Œä¸€ä¸ªè¢«è‰¯å¥½è®¾è®¡çš„ç§æœ‰åè®®ä¸€èˆ¬æœ‰å¦‚ä¸‹ä¼˜ç‚¹:é«˜æ•ˆï¼ŒèŠ‚çº¦æµé‡(ä¸€èˆ¬ä½¿ç”¨äºŒè¿›åˆ¶åè®®)ï¼Œå®‰å…¨æ€§é«˜ï¼Œéš¾ä»¥ç ´è§£ã€‚ç¼ºç‚¹åˆ™æ˜¯åœ¨å¼€å‘åˆæœŸæ²¡æœ‰ç°æœ‰æ ·åˆ—å¯ä»¥å‚è€ƒï¼Œå¯¹äºè®¾è®¡è€…çš„è¦æ±‚æ¯”è¾ƒé«˜ã€‚</p>
<p>ä¸€ä¸ªå¥½çš„åè®®éœ€è¦æ»¡è¶³å¦‚ä¸‹æ¡ä»¶:é«˜æ•ˆï¼Œç®€æ´ï¼Œå¯è¯»æ€§å¥½ï¼ŒèŠ‚çº¦æµé‡ï¼Œæ˜“äºæ‹“å±•ï¼ŒåŒæ—¶åˆèƒ½å¤ŸåŒ¹é…å½“å‰å›¢é˜Ÿçš„æŠ€æœ¯å †æ ˆã€‚åŸºäºå¦‚ä¸ŠåŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡º:<br>å¦‚æœå›¢é˜Ÿå°ï¼Œå›¢é˜ŸæŠ€æœ¯åœ¨IMä¸Šç§¯ç´¯ä¸å¤Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨XMPPæˆ–è€…MQTT+HTTPçŸ­è¿æ¥çš„å®ç°ã€‚åä¹‹å¯ä»¥è€ƒè™‘è‡ªå·±è®¾è®¡å’Œå®ç°ç§æœ‰åè®®ã€‚</p>
<h2>ç§æœ‰åè®®çš„è®¾è®¡</h2> 

<h3>åºåˆ—åŒ–é€‰æ‹©</h3><br>ç§»åŠ¨äº’è”ç½‘ç›¸å¯¹äºæœ‰çº¿ç½‘ç»œæœ€å¤§ç‰¹ç‚¹æ˜¯:å¸¦å®½ä½ï¼Œå»¶è¿Ÿé«˜ï¼Œä¸¢åŒ…ç‡é«˜å’Œç¨³å®šæ€§å·®ï¼Œæµé‡è´¹ç”¨é«˜ã€‚æ‰€ä»¥åœ¨ç§æœ‰åè®®çš„åºåˆ—åŒ–ä¸Šä¸€èˆ¬ä½¿ç”¨äºŒè¿›åˆ¶åè®®ï¼Œè€Œä¸æ˜¯æ–‡æœ¬åè®®ã€‚å¸¸è§çš„äºŒè¿›åˆ¶åºåˆ—åŒ–åº“æœ‰<a href="https://github.com/google/protobuf" target="_blank" rel="external">protobuf</a>å’Œ<a href="http://msgpack.org/" target="_blank" rel="external">MessagePack</a>ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±å®ç°è‡ªå·±çš„äºŒè¿›åˆ¶åè®®åºåˆ—åŒ–å’Œååºåˆ—çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚è˜‘è‡è¡—çš„<a href="https://github.com/mogujie/TeamTalk" target="_blank" rel="external">TeamTalk</a>ã€‚ä½†æ˜¯å‰é¢äºŒè€…æ— è®ºæ˜¯å¯æ‹“å±•æ€§è¿˜æ˜¯å¯è¯»æ€§éƒ½å®Œçˆ†TeamTalk(TeamTalkè¿Variantéƒ½ä¸æ”¯æŒï¼Œä¸€ä¸ªintä¼ è¾“æ—¶å›ºå®šå ç”¨4ä¸ªå­—èŠ‚)ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿˜æ˜¯ä¸æ¨èè‡ªå·±å»å®ç°äºŒè¿›åˆ¶åè®®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ã€‚<br><br><h3>åè®®æ ¼å¼è®¾è®¡</h3>

<p>åŸºäºTCPçš„åº”ç”¨å±‚åè®®ä¸€èˆ¬éƒ½åˆ†ä¸ºåŒ…å¤´å’ŒåŒ…ä½“(å¦‚HTTP)ï¼ŒIMåè®®ä¹Ÿä¸ä¾‹å¤–ã€‚åŒ…å¤´ä¸€èˆ¬ç”¨äºè¡¨ç¤ºæ¯ä¸ªè¯·æ±‚/åé¦ˆçš„å…¬å…±éƒ¨åˆ†ï¼Œå¦‚åŒ…é•¿ï¼Œè¯·æ±‚ç±»å‹ï¼Œè¿”å›ç ç­‰ã€‚<br>è€ŒåŒ…å¤´åˆ™å¡«å……ä¸åŒè¯·æ±‚/åé¦ˆå¯¹åº”çš„ä¿¡æ¯ã€‚</p>
<p>ä¸€ä¸ªæœ€ç®€å•çš„åŒ…å¤´å¯ä»¥å®šä¹‰ä¸º</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> PackHeader</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int32_t</span>     length_;    <span class="comment">//åŒ…é•¿åº¦</span></span><br><span class="line">    <span class="keyword">int32_t</span>     serial_;    <span class="comment">//åŒ…åºåˆ—å·</span></span><br><span class="line">    <span class="keyword">int32_t</span>     command_;   <span class="comment">//åŒ…è¯·æ±‚ç±»å‹</span></span><br><span class="line">    <span class="keyword">int32_t</span>     code_;      <span class="comment">//è¿”å›ç </span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä»¥å¿ƒè·³åŒ…ä¸ºä¾‹ï¼Œå‡è®¾å½“å‰çš„serialä¸º1ï¼Œå¿ƒè·³åŒ…çš„commandä¸º10ï¼Œé‚£ä¹ˆä½¿ç”¨MessagePackåšåºåˆ—åŒ–æ—¶:length=4ï¼Œserial=1ï¼Œcommand=10ï¼Œcode=0ï¼Œæ¯ä¸ªå­—æ®µå„å ä¸€ä¸ªå­—èŠ‚ï¼ŒåŒ…ä½“ä¸ºç©ºï¼Œä»…éœ€è¦4ä¸ªå­—èŠ‚ã€‚</p>
<p>å½“ç„¶è¿™æ˜¯æœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­ï¼Œé¢å¯¹çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘æ—¶ï¼ŒåŒ…ä½“é‡Œé¢ä¼šéœ€è¦å¡å…¥æ›´å¤šåœ°ä¿¡æ¯ï¼Œè¿™ä¸ªéœ€è¦å¼€å‘æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘æ€»ç»“å…¬å…±éƒ¨åˆ†,å¦‚ä¸ºäº†å…¼å®¹åŠ å…¥çš„åè®®ç‰ˆæœ¬å·,ä¸ºäº†è´Ÿè½½å‡è¡¡åŠ å…¥çš„æ¨¡å—idç­‰ã€‚</p>
<p></p><h2>å…¶ä»–é—®é¢˜</h2><br>ä¸Šé¢å°±æ˜¯ä¸€ä¸ªIMç³»ç»Ÿå¤§è‡´çš„é€‰å‹è¿‡ç¨‹:é€šè®¯æ–¹å¼ï¼Œè¿æ¥æ–¹å¼ï¼Œåè®®é€‰æ‹©ï¼Œåè®®è®¾è®¡ã€‚ä½†æ˜¯å®é™…å¼€å‘è¿‡ç¨‹ä¸­è¿˜æœ‰å¤§é‡çš„é—®é¢˜éœ€è¦å¤„ç†ã€‚<p></p>
<p></p><h3>åè®®åŠ å¯†</h3><br>ä¸ºäº†ä¿è¯åè®®ä¸å®¹æ˜“è¢«ç ´è§£ï¼Œå¸‚é¢ä¸Šå‡ ä¹æ‰€æœ‰ä¸»æµIMéƒ½ä¼šå¯¹åè®®è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€‚å¸¸è§çš„æµç¨‹å’ŒHTTPSåŠ å¯†ç›¸ä¼¼:å»ºç«‹è¿æ¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›è¡Œè¿›è¡Œåå•†ï¼Œæœ€ç»ˆå®¢æˆ·ç«¯è·å¾—ä¸€ä¸ªå½“å‰Sessinoçš„ç§˜é’¥ï¼Œåç»­çš„æ•°æ®ä¼ è¾“éƒ½é€šè¿‡è¿™ä¸ªç§˜é’¥è¿›è¡ŒåŠ è§£å¯†ã€‚ä¸€èˆ¬å‡ºäºæ•ˆç‡çš„è€ƒè™‘éƒ½ä¼šé‡‡ç”¨æµå¼åŠ å¯†ï¼Œå¦‚RC4ã€‚è€Œå‰æœŸåå•†è¿‡ç¨‹åˆ™æ¨èä½¿ç”¨RSAç­‰éå¯¹ç§°åŠ å¯†ä»¥å¢åŠ ç ´è§£éš¾åº¦ã€‚<p></p>
<p></p><h3>å¿«é€Ÿè¿æ¥(ç™»å½•)</h3><br>å¯¹iOS APPè€Œè¨€ï¼Œå› ä¸ºæ²¡æœ‰çœŸåå°çš„å­˜åœ¨ï¼ŒAPPæ¯æ¬¡å¯åŠ¨åŸºæœ¬éƒ½éœ€è¦ä¸€æ¬¡é‡è¿ç™»å½•(çŸ­æ—¶é—´å†…åˆ‡æ¢é™¤å¤–)ï¼Œæ‰€ä»¥å¦‚ä½•å¿«é€Ÿé‡è¿é‡ç™»å°±éå¸¸é‡è¦ã€‚å¸¸è§çš„ä¼˜åŒ–æ€è·¯å¦‚ä¸‹:<p></p>
<ul>
<li>æœ¬åœ°ç¼“å­˜æœåŠ¡å™¨IPå¹¶å®šæœŸåˆ·æ–°ã€‚ç§»åŠ¨ç½‘ç»œè°ƒä¼˜å¯ä»¥å‚è€ƒ<a href="http://xiangwangfeng.com/2013/10/16/iOS%E7%A7%BB%E5%8A%A8%E7%BD%91%E7%BB%9C%E8%B0%83%E4%BC%98%E9%82%A3%E4%BA%9B%E4%BA%8B/" target="_blank" rel="external">ã€ŠiOSç§»åŠ¨ç½‘ç»œè°ƒä¼˜é‚£äº›äº‹ã€‹</a>ã€‚</li>
<li>åˆå¹¶éƒ¨åˆ†è¯·æ±‚ã€‚å¦‚åŠ å¯†å’Œç™»å½•æ“ä½œå¯ä»¥åˆå¹¶ä¸ºåŒä¸€ä¸ªæ“ä½œï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘ä¸€æ¬¡ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚æ¥å›çš„æ—¶é—´ã€‚</li>
<li>ç®€åŒ–ç™»å½•åçš„åŒæ­¥è¯·æ±‚ï¼Œéƒ¨åˆ†åŒæ­¥è¯·æ±‚å¯ä»¥æ¨è¿Ÿåˆ°UIæ“ä½œæ—¶è¿›è¡Œï¼Œå¦‚ç¾¤æˆå‘˜ä¿¡æ¯åˆ·æ–°ã€‚</li>
</ul>
<p></p><h3>è¿æ¥ä¿æŒ</h3><br>ä¸€èˆ¬APPå®ç°è¿æ¥ä¿æŒçš„æ–¹å¼æ— éæ˜¯é‡‡ç”¨åº”ç”¨å±‚çš„å¿ƒè·³ï¼Œé€šè¿‡å¿ƒè·³åŒ…çš„è¶…æ—¶å’Œå…¶ä»–æ¡ä»¶(ç½‘ç»œåˆ‡æ¢)æ¥æ‰§è¡Œé‡è¿æ“ä½œã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†:ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åº”ç”¨å±‚å¿ƒè·³å’Œå¦‚ä½•è®¾è®¡åº”ç”¨å±‚å¿ƒè·³ã€‚<p></p>
<p>ä¼—æ‰€å‘¨çŸ¥TCPåè®®æ˜¯æœ‰KEEPALIVEè¿™ä¸ªè®¾ç½®é€‰é¡¹ï¼Œè®¾ç½®ä¸ºKEEPALIVEåï¼Œå®¢æˆ·ç«¯æ¯éš”Nç§’(é»˜è®¤æ˜¯7200s)ä¼šå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªå‘é€å¿ƒè·³åŒ…ã€‚ä½†å®é™…æ“ä½œä¸­æˆ‘ä»¬æ›´å¤šçš„æ—¶æ˜¯ä½¿ç”¨åº”ç”¨å±‚å¿ƒè·³ã€‚åŸå› å¦‚ä¸‹:</p>
<ul>
<li>KEEPALIVEå¯¹æœåŠ¡å™¨è´Ÿè½½å‹åŠ›æ¯”è¾ƒå¤§(æœåŠ¡å™¨å¤§å¤§æ˜¯è¿™ä¹ˆè¯´çš„â€¦)</li>
<li>socksä»£ç†å¯¹KEEPALIVEå¹¶ä¸æ”¯æŒ</li>
<li>éƒ¨åˆ†å¤æ‚æƒ…å†µä¸‹KEEPALIVEä¼šå¤±æ•ˆï¼Œå¦‚è·¯ç”±å™¨æŒ‚æ‰ï¼Œç½‘çº¿(ç§»åŠ¨ç«¯æ²¡æœ‰ç½‘çº¿â€¦)ç›´æ¥è¢«æ‹”é™¤</li>
</ul>
<p>ç§»åŠ¨ç«¯åœ¨å®é™…æ“ä½œæ—¶ä¸ºäº†èŠ‚çº¦æµé‡å’Œç”µé‡ä¸€èˆ¬ä¼šåœ¨å¿ƒè·³åŒ…ä¸Šåšä¸€äº›å°ä¼˜åŒ–</p>
<ul>
<li>ç²¾ç®€å¿ƒè·³åŒ…ï¼Œä¿è¯ä¸€ä¸ªå¿ƒè·³åŒ…å¤§å°åœ¨10å­—èŠ‚ä¹‹å†…</li>
<li>å¿ƒè·³åŒ…åªåœ¨ç©ºé—²æ—¶å‘é€ </li>
<li>æ ¹æ®APPå‰åå°çŠ¶æ€è°ƒæ•´å¿ƒè·³åŒ…é—´éš” (ä¸»è¦æ˜¯å®‰å“)</li>
</ul>
<p></p><h3>æ¶ˆæ¯å¯è¾¾</h3><br>åœ¨ç§»åŠ¨ç½‘ç»œä¸‹ï¼Œä¸¢åŒ…ï¼Œç½‘ç»œé‡è¿ç­‰æƒ…å†µéå¸¸ä¹‹å¤šï¼Œä¸ºäº†ä¿è¯æ¶ˆæ¯çš„å¯è¾¾ï¼Œä¸€èˆ¬éœ€è¦åšæ¶ˆæ¯å›æ‰§å’Œé‡å‘æœºåˆ¶ã€‚å‚è€ƒæ˜“ä¿¡ï¼Œæ¯æ¡æ¶ˆæ¯ä¼šæœ€å¤šä¼šæœ‰3æ¬¡é‡å‘ï¼Œè¶…æ—¶æ—¶é—´ä¸º15ç§’ï¼ŒåŒæ—¶åœ¨å‘é€ä¹‹å‰ä¼šæ£€æµ‹å½“å‰è¿æ¥çŠ¶æ€ï¼Œå¦‚æœå½“å‰è¿æ¥å¹¶æ²¡æœ‰æ­£ç¡®å»ºç«‹ï¼Œç¼“å­˜æ¶ˆæ¯ä¸”å®šæ—¶æ£€æŸ¥(æ¯éš”2ç§’æ£€æŸ¥ä¸€æ¬¡ï¼Œæ£€æŸ¥15æ¬¡)ã€‚æ‰€ä»¥ä¸€æ¡æ¶ˆæ¯åœ¨æœ€å·®çš„æƒ…å†µä¸‹ä¼šæœ‰2åˆ†é’Ÿå·¦å³çš„é‡è¯•æ—¶é—´ï¼Œä»¥ä¿è¯æ¶ˆæ¯çš„å¯è¾¾ã€‚<p></p>
<p>å› ä¸ºé‡å‘çš„å­˜åœ¨ï¼Œæ¥å—ç«¯å¶å°”ä¼šæ”¶åˆ°é‡å¤æ¶ˆæ¯ï¼Œè¿™ç§æƒ…å†µä¸‹å°±éœ€è¦æ¥æ”¶ç«¯è¿›è¡Œå»é‡ã€‚é€šç”¨çš„åšæ³•æ˜¯æ¯æ¡æ¶ˆæ¯éƒ½å¸¦ä¸Šè‡ªå·±å”¯ä¸€çš„message id(ä¸€èˆ¬æ˜¯uuid)ã€‚</p>
<p></p><h3>æ–‡ä»¶ä¸Šä¼ ä¼˜åŒ–</h3><br>IMæ¶ˆæ¯(åŒ…æ‹¬SNSæ¨¡å—)å†…åŒ…å«å¤§é‡çš„æ–‡ä»¶ä¸Šä¼ çš„éœ€æ±‚ï¼Œå¦‚ä½•ä¼˜åŒ–æ–‡ä»¶çš„ä¸Šä¼ å°±æˆäº†ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ä¸»é¢˜ã€‚å¸¸è§æœ‰ä¸‹é¢è¿™äº›ä¼˜åŒ–æ€è·¯:<p></p>
<ul>
<li>å°†ä¸Šä¼ æµç¨‹æå‰:éŸ³é¢‘æä¾›è¾¹å½•è¾¹ä¼ ã€‚æœ‹å‹åœˆçš„å›¾ç‰‡è¿›è¡Œé¢„ä¸Šä¼ ï¼Œé€‰æ‹©å›¾ç‰‡åç”¨æˆ·ä¸€èˆ¬ä¼šè¿›è¡Œæ–‡æœ¬è¾“å…¥ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…åå°å°±å¯ä»¥é»˜é»˜å°†é€‰å¥½çš„å›¾ç‰‡è¿›è¡Œä¸Šä¼ ã€‚</li>
<li>æä¾›é—ªç”µä¸Šä¼ çš„æ–¹å¼:æœåŠ¡å™¨æ ¹æ®MD5è¿›è¡Œæ–‡ä»¶å»é‡ã€‚</li>
<li>ä¼˜åŒ–å’Œä¸Šä¼ æœåŠ¡å™¨çš„è¿æ¥(å‚è€ƒå¿«é€Ÿè¿æ¥)ï¼Œæä¾›è¿æ¥é‡ç”¨çš„åŠŸèƒ½ã€‚</li>
<li>æ–‡ä»¶åˆ†å—ä¸Šä¼ :å› ä¸ºç§»åŠ¨ç½‘ç»œä¸¢åŒ…ä¸¥é‡ï¼Œå°†æ–‡ä»¶åˆ†å—ä¸Šä¼ å¯ä»¥ä½¿å¾—ä¸€ä¸ªåˆ†ç»„åŒ…å«åˆç†æ•°é‡çš„TCPåŒ…ï¼Œä½¿å¾—é‡è¯•æ¦‚ç‡ä¸‹é™ï¼Œé‡è¯•ä»£ä»·å˜å°ï¼Œæ›´å®¹æ˜“ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</li>
<li>åœ¨åˆ†åŒ…çš„å‰æä¸‹æ”¯æŒä¸Šä¼ çš„pipelineï¼Œé¿å…ä¸å¿…è¦çš„ç½‘ç»œç­‰å¾…æ—¶é—´ã€‚</li>
<li>æ”¯æŒæ–­ç‚¹ç»­ä¼ </li>
</ul>
<p></p><h2>æ€»ç»“</h2><br>æ­¤å¤„æ˜¯è½¯æ–‡ï¼Œè¯·å…¨é€‰é˜…è¯»:<font color="white">ä¸€ä¸ªå¤§å‹IMç³»ç»Ÿæ¶‰åŠåˆ°ä¸œè¥¿å®åœ¨å¤ªå¤šï¼Œå¦‚æœIMæ¨¡å—åªæ˜¯APPçš„é™„å±åŠŸèƒ½ï¼Œå¹¶ä¸æ¨èè‡ªå·±å»ä»å¤´å®ç°IMæ¨¡å—æˆ–è€…ä½¿ç”¨XMPPè¿™ç§æœ‰å¤©å‘çš„å¼€æºå®ç°ï¼Œç›´æ¥ä½¿ç”¨å¸‚é¢ä¸Šçš„ç¬¬ä¸‰æ–¹SDKå³å¯ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„<a href="http://netease.im" target="_blank" rel="external">äº‘ä¿¡</a>ã€‚æ¯•ç«Ÿï¼Œæˆ‘ä»¬ï¼Œæ˜¯ï¼Œä¸“ä¸šçš„ï¼~~~~</font><p></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å¦‚ä½•åšä¸€ä¸ªåœ†å½¢çš„éŸ³é‡æ—‹é’®]]></title>
      <url>http://koalahl.github.io/2016/01/17/%E5%A6%82%E4%BD%95%E5%81%9A%E4%B8%80%E4%B8%AA%E5%9C%86%E5%BD%A2%E7%9A%84%E9%9F%B3%E9%87%8F%E6%97%8B%E9%92%AE/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨Mediumä¸Šæµè§ˆä¸€äº›å›½å¤–çš„iOSå¼€å‘ç›¸å…³çš„æ–‡ç« ï¼Œçœ‹åˆ°æ„Ÿå…´è¶£çš„ä¾¿å®è·µä¸€ç•ªï¼Œè®°å½•ä¸‹æ¥ã€‚ä¸€æ¥ç®—æ˜¯å­¦ä¹ swiftï¼Œå¦ä¸€æ–¹é¢åˆ™æ˜¯ä¸ºäº†æ‹“å®½æŠ€æœ¯é¢ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æ¥è‡ª<a href="https://medium.com/@karthikkeyan" target="_blank" rel="external">Karthik Keyan Balan</a>çš„<a href="https://medium.com/@karthikkeyan/how-to-create-a-circular-seek-bar-in-ios-edc6e2871cd0#.yqla9v503" target="_blank" rel="external">How to create a circular seek bar in iOS</a><br>ä¸»è¦å±•ç¤ºäº†ä¸€ä¸ªåœ†å½¢çš„ç±»ä¼¼éŸ³é‡æ—‹é’®çš„UIæ§ä»¶ï¼Œç”¨swiftå®ç°ã€‚å¦‚ä¸‹å›¾ï¼Œ<br><img src="/img/circle seek bar.gif" alt="circle seek bar"></p>
<a id="more"></a>
<h2 id="strokeUI">å¦‚ä½•ç”»å‡ºåœ†å½¢æ—‹é’®</h2>

<p>ä½¿ç”¨CAShapeLayerï¼Œå¹¶å°†å…¶pathè®¾ç½®ä¸ºè‡ªå®šä¹‰çš„è´å¡å°”æ›²çº¿çš„pathã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">lazy</span> <span class="keyword">var</span> seekerBarLayer = <span class="type">CAShapeLayer</span>()</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="func"><span class="keyword">func</span> <span class="title">addSeekerBar</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> center = <span class="type">CGPointMake</span>(<span class="keyword">self</span>.bounds.size.width/<span class="number">2</span>, <span class="keyword">self</span>.bounds.size.height/<span class="number">2</span>)</span><br><span class="line">    <span class="comment">//å¼§åº¦</span></span><br><span class="line">    <span class="keyword">let</span> sAngle = degreeToRadian(<span class="type">Double</span>(startAngle))</span><br><span class="line">    <span class="keyword">let</span> eAngle = degreeToRadian(<span class="type">Double</span>(endAngle))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> path = <span class="type">UIBezierPath</span>(arcCenter: center, radius: (<span class="keyword">self</span>.bounds.size.width - <span class="number">18</span>)/<span class="number">2</span>, startAngle:<span class="type">CGFloat</span>(sAngle) , endAngle:<span class="type">CGFloat</span>(eAngle) , clockwise: <span class="literal">true</span>)</span><br><span class="line">    </span><br><span class="line">    seekerBarLayer.path = path.<span class="type">CGPath</span>;</span><br><span class="line">    seekerBarLayer.lineWidth = <span class="number">4.0</span></span><br><span class="line">    seekerBarLayer.lineCap   = kCALineCapRound</span><br><span class="line">    seekerBarLayer.strokeColor = seekBarColor.<span class="type">CGColor</span></span><br><span class="line">    seekerBarLayer.fillColor = <span class="type">UIColor</span>.clearColor().<span class="type">CGColor</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> seekerBarLayer.superlayer == <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.layer.addSublayer(seekerBarLayer)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="touch">æ ¹æ®touchä½ç½®ç§»åŠ¨æ—‹é’®ä½ç½®</h2>

<p>é‡è½½touchç›¸å…³çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œé‡ç‚¹æ˜¯åœ¨<code>continueTrackingWithTouch</code>æ–¹æ³•ä¸­ï¼Œæ ¹æ®touchçš„åæ ‡è®¡ç®—æŒ‰é’®éœ€è¦ç§»åŠ¨çš„ä½ç½®çš„<code>moveToPoint</code>æ–¹æ³•ã€‚</p>
<ul>
<li><a href="#touchLocation">è·å–touchä½ç½®</a></li>
<li><a href="#buttonPoint">è®¡ç®—æ—‹é’®å¯¹åº”çš„åæ ‡</a></li>
</ul>
<h3 id="touchLocation">è·å–touchä½ç½®</h3>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MARK: Touch Event</span></span><br><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">beginTrackingWithTouch</span><span class="params">(touch: UITouch, withEvent event: UIEvent?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> point = touch.locationInView(<span class="keyword">self</span>)</span><br><span class="line">    <span class="keyword">let</span> rect  = <span class="type">CGRectInset</span>(<span class="keyword">self</span>.thumbButton.frame, -<span class="number">20</span>, -<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">let</span> canBegin = <span class="type">CGRectContainsPoint</span>(rect, point)</span><br><span class="line">    <span class="keyword">if</span> canBegin &#123;</span><br><span class="line">        <span class="type">UIView</span>.animateWithDuration(<span class="number">0.2</span>, delay: <span class="number">0.0</span>, options: .<span class="type">CurveEaseIn</span>, animations: &#123; () -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">self</span>.thumbButton.transform = <span class="type">CGAffineTransformMakeScale</span>(<span class="number">1.2</span>, <span class="number">1.2</span>)</span><br><span class="line">            &#125;, completion: <span class="literal">nil</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> canBegin</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">continueTrackingWithTouch</span><span class="params">(touch: UITouch, withEvent event: UIEvent?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> #available(iOS <span class="number">9</span>,*)&#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> coalescedTouches = event?.coalescedTouchesForTouch(touch) <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> moveToPoint(touch.locationInView(<span class="keyword">self</span>))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">for</span> cTouch <span class="keyword">in</span> coalescedTouches&#123;</span><br><span class="line">            <span class="keyword">let</span> result = moveToPoint(cTouch.locationInView(<span class="keyword">self</span>))</span><br><span class="line">            <span class="keyword">if</span> result == <span class="literal">false</span> &#123;<span class="keyword">break</span>&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">endTrackingWithTouch</span><span class="params">(touch: UITouch?, withEvent event: UIEvent?)</span></span> &#123;</span><br><span class="line">    thumbMoveDidComplete()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="buttonPoint">è®¡ç®—æ—‹é’®å¯¹åº”çš„åæ ‡</h3>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">moveToPoint</span><span class="params">(point:CGPoint)</span></span> -&gt;<span class="type">Bool</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> degree = degreeForLocation(point)</span><br><span class="line">    </span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">moveToClosestEdge</span><span class="params">(degree:Double)</span></span>&#123;</span><br><span class="line">        <span class="keyword">let</span> startDistance = fabs(<span class="type">CGFloat</span>(degree) - startAngle)</span><br><span class="line">        <span class="keyword">let</span> endDistance   = fabs(<span class="type">CGFloat</span>(degree) - endAngle)</span><br><span class="line">        <span class="keyword">if</span> startDistance &lt; endDistance&#123;</span><br><span class="line">            currentAngle = startAngle</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            currentAngle = endAngle</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> startAngle &gt; endAngle &#123;</span><br><span class="line">        <span class="keyword">if</span> degree &lt; <span class="type">Double</span>(startAngle) &amp;&amp; degree &gt; <span class="type">Double</span>(endAngle)&#123;</span><br><span class="line">            moveToClosestEdge(degree)</span><br><span class="line">            thumbMoveDidComplete()</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> degree &gt; <span class="type">Double</span>(endAngle) || degree &lt; <span class="type">Double</span>(startAngle)&#123;</span><br><span class="line">            moveToClosestEdge(degree)</span><br><span class="line">            thumbMoveDidComplete()</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    currentAngle = <span class="type">CGFloat</span>(degree)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p></p><h3>æ‰‹åŠ¨å‘é€action</h3><br>ç”±äºè¿™ä¸ªæ§ä»¶æ˜¯ç»§æ‰¿è‡ªUIControlçš„ï¼Œæ­£å¦‚å…¶ä»–ç»§æ‰¿ä¸UIControlçš„æ§ä»¶ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªæ§ä»¶çš„çŠ¶æ€äº‹ä»¶ã€‚ä¾‹å¦‚<code>valueChangedã€TouchUpInsideã€TouchOutSide</code>ã€‚<br>è¿™é‡Œæˆ‘ä»¬éœ€è¦çš„æ˜¯æ§ä»¶çš„ä½ç½®ä¿¡æ¯ï¼Œæ‰€ä»¥å½“endTouchçš„æ—¶å€™å‘é€ä¸€ä¸ª<code>valueChanged</code>äº‹ä»¶ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.sendActionsForControlEvents(.<span class="type">ValueChanged</span>)</span><br></pre></td></tr></table></figure><p></p>
<p>å…¶ä¸­æœ‰ä¸€ä¸ªå°ç»†èŠ‚ï¼Œå½“ç‚¹å‡»åˆ°æŒ‰é’®æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªå˜å¤§çš„åŠ¨ç”»æ•ˆæœï¼Œå…¶å®ä¹Ÿæ˜¯ç”¨åˆ°äº†ä¸€ä¸ªåŸºæœ¬çš„æ‹‰ä¼¸æ•ˆæœï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UIView</span>.animateWithDuration(<span class="number">0.2</span>, delay: <span class="number">0.0</span>, options: .<span class="type">CurveEaseIn</span>, animations: &#123; () -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">                    <span class="keyword">self</span>.thumbButton.transform = <span class="type">CGAffineTransformMakeScale</span>(<span class="number">1.2</span>, <span class="number">1.2</span>)</span><br><span class="line">                &#125;, completion: <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="summary">æ€»ç»“</h2>

<ul>
<li>åˆ©ç”¨CAShapeLayer+è´å¡å°”æ›²çº¿ç”»å‡ºUIã€‚</li>
<li>æ ¹æ®è§’åº¦è®¡ç®—å¼§åº¦ï¼Œå¹¶å¯¼å‡ºæŒ‰é’®å¯¹åº”çš„åæ ‡ç‚¹ã€‚</li>
<li>touchäº‹ä»¶çš„å¤„ç†ã€‚- æ‰‹åŠ¨å‘é€actionã€‚</li>
</ul>
<p>å‚è€ƒä»£ç ï¼š<a href="https://github.com/karthikkeyan/CircularSeek" target="_blank" rel="external">CircularSeek On GitHub</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[NSURLSessionåˆæ¢]]></title>
      <url>http://koalahl.github.io/2016/01/10/NSURLSession%E5%88%9D%E6%8E%A2/</url>
      <content type="html"><![CDATA[<p>NSURLSessionæ˜¯Appleè‡ªiOS7.0ä¹‹ååŠ å…¥åˆ°Cocoa SDKä¸­ï¼Œç”¨ä»¥æ›¿ä»£NSURLConnectionã€‚å®ƒæ‹¥æœ‰æ›´ç®€æ´æ˜“æ‡‚çš„APIæ–¹æ³•ã€‚<br>iOSä¸­å¸¸ç”¨çš„ç½‘ç»œåº“ä¾‹å¦‚AFNetworkingåœ¨3.0ç‰ˆæœ¬ä¸­å°±å…¨éƒ¨æ›¿æ¢ä¸ºäº†NSURLSessionã€‚<br><a id="more"></a><br>ä¹‹å‰é¡¹ç›®ä¸­ä¸€ç›´ä½¿ç”¨çš„AFNetworking2.xç‰ˆæœ¬ï¼Œä¹Ÿæ²¡æœ‰èŠ±æ—¶é—´å»ä»”ç»†ç ”ç©¶NSURLSessionï¼Œç‰¹æ­¤å‘¨æœ«ç²—ç•¥çš„çœ‹äº†çœ‹ï¼Œä¸€äº›æ–¹æ³•ä¹Ÿæ˜¯è¯•äº†è¯•ã€‚</p>
<p>NSURLSessionç»§æ‰¿ç»“æ„ï¼š</p>
<ul>
<li>NSURLSession - sessionå¯¹è±¡ã€‚</li>
<li>NSURLSessionConfiguration - å½“åˆå§‹åŒ–sessionå¯¹è±¡æ—¶è®¾ç½®sessionçš„é…ç½®ä¿¡æ¯ã€‚</li>
<li>NSURLSessoinTask - taskåŸºç±»<ul>
<li>NSURLSessionDataTask - è·å–urlå†…å®¹ï¼Œè¿”å›NSDataå¯¹è±¡ã€‚<ul>
<li>NSURLSessionUploadTask - ä¸Šä¼ æ–‡ä»¶çš„taskï¼Œå¹¶å–å›å¯¹åº”urlå†…å®¹ï¼Œè¿”å›NSDataå¯¹è±¡ã€‚</li>
</ul>
</li>
<li>NSURLSessionDownloadTask - è·å–urlå†…å®¹ï¼Œå¹¶è¿”å›ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶åœ¨æ²™ç›’ä¸­ï¼ˆtmpç›®å½•ä¸‹ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>NSURLSessionä¹Ÿæä¾›äº†å››ç»„ä»£ç†æ–¹æ³•ï¼š</p>
<ul>
<li><p>NSURLSessionDelegate â€” Defines delegate methods to handle session-level events</p>
</li>
<li><p>NSURLSessionTaskDelegate â€” Defines delegate methods to handle task-level events common to all task types</p>
</li>
<li><p>NSURLSessionDataDelegate â€” Defines delegate methods to handle task-level events specific to data and upload tasks</p>
</li>
<li><p>NSURLSessionDownloadDelegate â€” Defines delegate methods to handle task-level events specific to download tasks</p>
</li>
</ul>
<p>é¦–å…ˆæ¥çœ‹çœ‹æ™®é€šçš„sessoinè¯·æ±‚æ–¹æ³•ã€‚åœ¨completionHandlerä¸­è¿”å›çš„æ˜¯NSDataã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSURLSession</span> *session = [<span class="built_in">NSURLSession</span> sharedSession];</span><br><span class="line"><span class="built_in">NSURLSessionDataTask</span> * dataTask = [session dataTaskWithRequest:[<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:url]] completionHandler:^(<span class="built_in">NSData</span> * _Nullable data, <span class="built_in">NSURLResponse</span> * _Nullable response, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.fileName</span> = response<span class="variable">.suggestedFilename</span>;</span><br><span class="line">    [<span class="keyword">self</span> saveToFile];</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.fileHandler</span> seekToEndOfFile];</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.fileHandler</span> writeData:data];</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.fileHandler</span> closeFile];</span><br><span class="line">&#125;];</span><br><span class="line">[dataTask resume];<span class="comment">//å¼€å§‹ä»»åŠ¡ã€‚resumeæœ‰ç»§ç»­ã€æ¢å¤ã€é‡æ–°å¼€å§‹çš„æ„æ€ï¼Œå½“å¤„ç†æ–­ç‚¹ç»­ä¼ æ—¶å°±èƒ½ä½“ä¼šåˆ°æ­¤å«ä¹‰äº†ã€‚</span></span><br></pre></td></tr></table></figure>
<p>å†æ¥çœ‹çœ‹download taskçš„è¯·æ±‚æ–¹å¼ï¼Œä¸Šé¢æåˆ°è¿‡ï¼Œdownload taskæœ€åè¿”å›çš„æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å°†å…¶ä¿å­˜åˆ°å…¶ä»–æ²™ç›’ç›®å½•ä¸­ï¼Œå°±éœ€è¦ç”¨åˆ°NSFileManageräº†ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSURLSessionDownloadTask</span> * downloadTask = [session downloadTaskWithRequest:[<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:url]] completionHandler:^(<span class="built_in">NSURL</span> * _Nullable location, <span class="built_in">NSURLResponse</span> * _Nullable response, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.fileName</span> = response<span class="variable">.suggestedFilename</span>;</span><br><span class="line">    <span class="built_in">NSString</span> * directory = [<span class="built_in">NSSearchPathForDirectoriesInDomains</span>(<span class="built_in">NSDocumentDirectory</span>, <span class="built_in">NSUserDomainMask</span>, <span class="literal">YES</span>) lastObject];</span><br><span class="line">    <span class="built_in">NSString</span> * filePath = [directory stringByAppendingPathComponent:<span class="keyword">self</span><span class="variable">.fileName</span>];</span><br><span class="line">    <span class="built_in">NSFileManager</span> * fileManager = [<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line">    [fileManager moveItemAtPath:location<span class="variable">.path</span> toPath:filePath error:<span class="literal">nil</span>];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"> [downloadTask resume];</span><br></pre></td></tr></table></figure></p>
<p>é‚£æœ‰æ—¶å€™æˆ‘ä»¬æƒ³å–å¾—ä¸‹è½½è¿›åº¦ä¿¡æ¯ï¼Œç”¨blockæ–¹å¼å°±ä¸è¡Œäº†ï¼Œæ‰€ä»¥å°±éœ€è¦ç”¨åˆ°ç³»ç»Ÿæä¾›çš„ä»£ç†æ–¹æ³•äº†ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨<code>NSURLSessionDownloadDelegate</code>.<br>æ­¤æ—¶sessionçš„åˆ›å»ºæ–¹å¼å°±æ˜¯å¦ä¸€ç§æ–¹å¼ï¼Œè®¾ç½®delegateä¸ºselfã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSURLSession</span> * session = [<span class="built_in">NSURLSession</span> sessionWithConfiguration:[<span class="built_in">NSURLSessionConfiguration</span> defaultSessionConfiguration]</span><br><span class="line">                                                           delegate:<span class="keyword">self</span> delegateQueue:[<span class="built_in">NSOperationQueue</span> mainQueue]];</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span><span class="variable">.downloadTask</span> = [session downloadTaskWithRequest:[<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:url]]];</span><br><span class="line">[<span class="keyword">self</span><span class="variable">.downloadTask</span> resume];</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#pragma mark - NSURLSessionDownloadDelegate</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  ä¸‹è½½å®Œæ¯•</span><br><span class="line"> *</span><br><span class="line"> *  @param location     æ–‡ä»¶ä¸´æ—¶åœ°å€</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)URLSession:(<span class="built_in">NSURLSession</span> *)session downloadTask:(<span class="built_in">NSURLSessionDownloadTask</span> *)downloadTask</span><br><span class="line">didFinishDownloadingToURL:(<span class="built_in">NSURL</span> *)location</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"æ–‡ä»¶å­˜æ”¾ä½ç½®%@"</span>,location<span class="variable">.path</span>);</span><br><span class="line"><span class="comment">//    [self.startOrPauseOfSession setTitle:@"å¼€å§‹" forState:UIControlStateNormal];</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span><span class="variable">.fileName</span> = <span class="string">@"QQ4.1.0.dmg"</span>;</span><br><span class="line">    <span class="built_in">NSString</span> * directory = [<span class="built_in">NSSearchPathForDirectoriesInDomains</span>(<span class="built_in">NSDocumentDirectory</span>, <span class="built_in">NSUserDomainMask</span>, <span class="literal">YES</span>) lastObject];</span><br><span class="line">    <span class="built_in">NSString</span> * filePath = [directory stringByAppendingPathComponent:<span class="keyword">self</span><span class="variable">.fileName</span>];</span><br><span class="line">    <span class="built_in">NSFileManager</span> * fileManager = [<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line"></span><br><span class="line">    [fileManager moveItemAtPath:location<span class="variable">.path</span> toPath:filePath error:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  æ¯æ¬¡å†™å…¥æ²™ç›’å®Œæ¯•</span><br><span class="line"> *  åœ¨è¿™é‡Œé¢ç›‘å¬ä¸‹è½½è¿›åº¦ï¼ŒtotalBytesWritten/totalBytesExpectedToWrite</span><br><span class="line"> *</span><br><span class="line"> *  @param bytesWritten              è¿™æ¬¡å†™å…¥çš„å¤§å°</span><br><span class="line"> *  @param totalBytesWritten         å·²ç»å†™å…¥æ²™ç›’çš„å¤§å°</span><br><span class="line"> *  @param totalBytesExpectedToWrite æ–‡ä»¶æ€»å¤§å°</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)URLSession:(<span class="built_in">NSURLSession</span> *)session downloadTask:(<span class="built_in">NSURLSessionDownloadTask</span> *)downloadTask</span><br><span class="line">      didWriteData:(int64_t)bytesWritten</span><br><span class="line"> totalBytesWritten:(int64_t)totalBytesWritten</span><br><span class="line">totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.progressView</span><span class="variable">.progress</span> = (<span class="keyword">double</span>)totalBytesWritten/totalBytesExpectedToWrite;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.progressLabel</span><span class="variable">.text</span> = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%.1f%%"</span>,(<span class="keyword">double</span>)totalBytesWritten/totalBytesExpectedToWrite * <span class="number">100</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  æ¢å¤ä¸‹è½½åè°ƒç”¨ï¼Œ</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)URLSession:(<span class="built_in">NSURLSession</span> *)session downloadTask:(<span class="built_in">NSURLSessionDownloadTask</span> *)downloadTask</span><br><span class="line"> didResumeAtOffset:(int64_t)fileOffset</span><br><span class="line">expectedTotalBytes:(int64_t)expectedTotalBytes</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#pragma mark - PrivateMethod</span></span><br><span class="line">- (<span class="keyword">void</span>)saveToFile&#123;</span><br><span class="line">    <span class="built_in">NSString</span> * cacheDirectory = [<span class="built_in">NSSearchPathForDirectoriesInDomains</span>(<span class="built_in">NSCachesDirectory</span>, <span class="built_in">NSUserDomainMask</span>, <span class="literal">YES</span>) lastObject];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,cacheDirectory);</span><br><span class="line">    <span class="built_in">NSString</span> * filePath = [cacheDirectory stringByAppendingPathComponent:<span class="keyword">self</span><span class="variable">.fileName</span>];</span><br><span class="line">    <span class="built_in">NSFileManager</span> * fileManager = [<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line">    [fileManager createFileAtPath:filePath contents:<span class="literal">nil</span> attributes:<span class="literal">nil</span>];</span><br><span class="line">    <span class="comment">//åˆ›å»ºæ“ä½œæ•°æ®çš„æ–‡ä»¶handler</span></span><br><span class="line">    <span class="keyword">self</span><span class="variable">.fileHandler</span> = [<span class="built_in">NSFileHandle</span> fileHandleForWritingAtPath:filePath];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹<a href="http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLSession_class/index.html" target="_blank" rel="external">NSURLSessionå®˜æ–¹æ–‡æ¡£</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[NS_ENUMä¸NSString]]></title>
      <url>http://koalahl.github.io/2016/01/07/NS-ENUM%E4%B8%8ENSString/</url>
      <content type="html"><![CDATA[<h3>NS_ENUMä¸NSString</h3>

<p>åœ¨é¡¹ç›®ä¸­ç»å¸¸ä¼šä½¿ç”¨åˆ°æšä¸¾ç±»å‹ï¼š<code>NS_ENUM</code>,<code>enum</code>,ä½†æ˜¯ç³»ç»Ÿæä¾›çš„æšä¸¾ç±»å‹åªèƒ½è®¾ç½®ä¸ºNSIntegerç±»å‹ï¼Œä¸èƒ½ä¿å­˜å¯¹è±¡ç±»å‹å…¥<code>NSString</code>ã€‚<br>ä¼ ç»Ÿçš„ç”¨<code>#define</code> æ–¹å¼ï¼Œ<code>Switch case</code> è½¬æ¢æ–¹å¼ï¼Œå¦å¤–è¿˜å‘ç°äº†å¦‚ä¸‹å‡ ç§æ–¹å¼ï¼š</p>
<a id="more"></a>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;value1, value2, value3&#125; myValue;</span><br><span class="line"><span class="preprocessor">#define myValueString(enum) [@[@<span class="title">"value1"</span>,@<span class="title">"value2"</span>,@<span class="title">"value3"</span>] objectAtIndex:enum]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123; a, b, c &#125; FirstThreeAlpha;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span>*) convertToString:(FirstThreeAlpha) whichAlpha &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *result = <span class="literal">nil</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span>(whichAlpha) &#123;</span><br><span class="line">        <span class="keyword">case</span> a:</span><br><span class="line">            result = <span class="string">@"a"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> b:</span><br><span class="line">            result = <span class="string">@"b"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> c:</span><br><span class="line">            result = <span class="string">@"c"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            result = <span class="string">@"unknown"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>,CabinetOperationType)&#123;</span><br><span class="line">    CabinetOperationTypeNothing = <span class="number">0</span>,</span><br><span class="line">    CabinetOperationTypeAdd     = <span class="number">1</span>,    <span class="comment">//åŠ å…¥é…’æŸœ</span></span><br><span class="line">    CabinetOperationTypeTake    = <span class="number">2</span>,       <span class="comment">//ä»é…’æŸœæé…’</span></span><br><span class="line">    CabinetOperationTypeAddAndSend = <span class="number">3</span> <span class="comment">//åŠ å…¥é…’æŸœä»˜æ¬¾å¹¶ç›´æ¥èµ äºˆæŸäºº</span></span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> CabinetOperationTypeString[] = &#123;</span><br><span class="line">    [CabinetOperationTypeNothing]    = <span class="string">@""</span>,</span><br><span class="line">    [CabinetOperationTypeAdd]        = <span class="string">@"1"</span>,</span><br><span class="line">    [CabinetOperationTypeTake]       = <span class="string">@"2"</span>,</span><br><span class="line">    [CabinetOperationTypeAddAndSend] = <span class="string">@"3"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ³•å’Œä¸Šé¢çš„å®šä¹‰NSStringæ•°ç»„ç›¸ä¼¼ï¼Œä½†æ˜¯æ˜¯ç”¨äº†å‡½æ•°æ€æƒ³ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;</span><br><span class="line">    <span class="built_in">UIImageOrientationUp</span> = <span class="number">0</span>,            <span class="comment">// default orientation, set to 0 so that it always starts from 0</span></span><br><span class="line">    <span class="built_in">UIImageOrientationDown</span>,          <span class="comment">// 180 deg rotation</span></span><br><span class="line">    <span class="built_in">UIImageOrientationLeft</span>,          <span class="comment">// 90 deg CCW</span></span><br><span class="line">    <span class="built_in">UIImageOrientationRight</span>,         <span class="comment">// 90 deg CW</span></span><br><span class="line">    <span class="built_in">UIImageOrientationUpMirrored</span>,    <span class="comment">// as above but image mirrored along other axis. horizontal flip</span></span><br><span class="line">    <span class="built_in">UIImageOrientationDownMirrored</span>,  <span class="comment">// horizontal flip</span></span><br><span class="line">    <span class="built_in">UIImageOrientationLeftMirrored</span>,  <span class="comment">// vertical flip</span></span><br><span class="line">    <span class="built_in">UIImageOrientationRightMirrored</span>, <span class="comment">// vertical flip</span></span><br><span class="line">&#125; <span class="built_in">UIImageOrientation</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *stringWith<span class="built_in">UIImageOrientation</span>(<span class="built_in">UIImageOrientation</span> input) &#123;</span><br><span class="line">    <span class="built_in">NSArray</span> *arr = @[</span><br><span class="line">    <span class="string">@"UIImageOrientationUp"</span>,            <span class="comment">// default orientation</span></span><br><span class="line">    <span class="string">@"UIImageOrientationDown"</span>,          <span class="comment">// 180 deg rotation</span></span><br><span class="line">    <span class="string">@"UIImageOrientationLeft"</span>,          <span class="comment">// 90 deg CCW</span></span><br><span class="line">    <span class="string">@"UIImageOrientationRight"</span>,         <span class="comment">// 90 deg CW</span></span><br><span class="line">    <span class="string">@"UIImageOrientationUpMirrored"</span>,    <span class="comment">// as above but image mirrored along other axis. horizontal flip</span></span><br><span class="line">    <span class="string">@"UIImageOrientationDownMirrored"</span>,  <span class="comment">// horizontal flip</span></span><br><span class="line">    <span class="string">@"UIImageOrientationLeftMirrored"</span>,  <span class="comment">// vertical flip</span></span><br><span class="line">    <span class="string">@"UIImageOrientationRightMirrored"</span>, <span class="comment">// vertical flip</span></span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">NSString</span> *)[arr objectAtIndex:input];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç»¼åˆä¼—å¤šæ–¹æ¡ˆå¾—å‡ºï¼Œè¦ç†Ÿç»ƒä½¿ç”¨<code>typedefã€#define</code> å°±å¯ä»¥æé«˜æ•ˆç‡ã€‚<br>æ›´å¤šå¯ä»¥å‚è€ƒstackoverflowï¼š<a href="http://stackoverflow.com/questions/6331762/enum-values-to-nsstring-ios" target="_blank" rel="external">enum Values to NSString (iOS)</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å¦‚ä½•åœ¨swifté¡¹ç›®ä¸­åˆ›å»ºObjective-C Bridging header]]></title>
      <url>http://koalahl.github.io/2015/12/30/%E5%A6%82%E4%BD%95%E5%9C%A8swift%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%88%9B%E5%BB%BAObjective-C-Bridging-header/</url>
      <content type="html"><![CDATA[<p>åœ¨swiftå·¥ç¨‹ä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦ä½¿ç”¨OBJCä»£ç å†™çš„ç¬¬ä¸‰æ–¹åº“æˆ–è€…å·¥å…·ç±»ç­‰ï¼Œè¿™æ—¶å°±éœ€è¦åˆ›å»ºobjcæ–‡ä»¶åˆ°swiftçš„æ¡¥æ¥headerã€‚<br>ç°åœ¨æœ‰ä¸¤ç§æ–¹æ³•åˆ›å»ºObjective-C Bridging Header:<br><a id="more"></a></p>
<p></p><h3 id="header">Create Objective-C File as Header</h3><br>Go to <code>File &gt; New &gt; File</code> and Select Objective-C:<p></p>
<p><img src="/img/Swift-Create-Objective-C-Bridging-Header.png" alt="Create Objective-C File as Header"><br>ç„¶åä¸€ç›´nextï¼Œæœ€åå‡ºç°å¦‚ä¸‹å›¾æ—¶ï¼Œç‚¹å‡»yesï¼š</p>
<p><img src="/img/create-objective-c-bridging-header-question.png" alt=""></p>
<p>è¿™ç§æ–¹å¼ä¼šåˆ›å»ºå‡º.hå’Œ.mæ–‡ä»¶ã€‚</p>
<p></p><h3 id="headerDirectly"> Create Objective-C Header File Directly</h3><br>Go to <code>File &gt; New &gt; File</code> and Select Objective-C Header File:<p></p>
<p><img src="/img/Xcode-Choose-Header-File.png" alt="Create Objective-C Header File Directly"></p>
<p>æœ€åï¼Œä¸¤ç§æ–¹æ³•åˆ›å»ºçš„.hæ–‡ä»¶ä¸­importä½ å°†ä½¿ç”¨çš„ç±»ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">"xxxx"</span></span></span><br></pre></td></tr></table></figure></p>
<p>ä¸€èˆ¬åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ä¿®æ”¹UIBarButtonItemæ ‡é¢˜æ–‡å­—å¤§å°ã€é¢œè‰²ã€é˜´å½±ç­‰]]></title>
      <url>http://koalahl.github.io/2015/12/29/%E4%BF%AE%E6%94%B9UIBarButtonItem%E6%A0%87%E9%A2%98%E6%96%87%E5%AD%97%E5%A4%A7%E5%B0%8F%E3%80%81%E9%A2%9C%E8%89%B2%E3%80%81%E9%98%B4%E5%BD%B1%E7%AD%89/</url>
      <content type="html"><![CDATA[<p></p><h3>ä¿®æ”¹UIBarButtonItemçš„æ ‡é¢˜æ–‡å­—å¤§å°ã€é¢œè‰²ã€é˜´å½±ç­‰</h3><br>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸‹å¯¼èˆªæ å³ä¾§æŒ‰é’®æ ‡é¢˜çš„å¤§å°ã€é¢œè‰²ç­‰ç­‰ï¼Œä½†æ˜¯UIBarButtonItemæ²¡æœ‰ç›´æ¥æä¾›ç›¸å…³æ–¹æ³•ã€‚é€šè¿‡æŸ¥çœ‹UIbarButtonItemå®˜æ–¹æ–‡æ¡£ï¼Œæ€»ç»“å‡ºæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•<br>ç¬¬ä¸€ç§ï¼šä½¿ç”¨<code>initWithCustomView</code>æ–¹æ³•åˆ›å»ºUIBarButtonItemã€‚<br>ç¬¬äºŒç§ï¼šé€šè¿‡KVCæ¥ä¿®æ”¹ç›¸å…³å±æ€§ã€‚<p></p>
<a id="more"></a>
<p>é‚£ä¹ˆå…ˆçœ‹çœ‹ç¬¬ä¸€ç§æ–¹æ³•ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIButton</span> * edit = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">edit<span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">80</span>, <span class="number">30</span>);</span><br><span class="line">[edit setTitle:<span class="string">@"æ‰¹é‡ç®¡ç†"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">[edit setTitleColor:[<span class="built_in">UIColor</span> blackColor] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">[edit addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(edit) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">edit<span class="variable">.titleLabel</span><span class="variable">.font</span> = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">13</span>];</span><br><span class="line">edit<span class="variable">.titleLabel</span><span class="variable">.textAlignment</span> = <span class="built_in">NSTextAlignmentRight</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UIBarButtonItem</span> * rightBtn = [[<span class="built_in">UIBarButtonItem</span> alloc]initWithCustomView:edit];</span><br><span class="line">[rightBtn setTintColor:COLOR(black)];</span><br><span class="line"><span class="keyword">self</span><span class="variable">.navigationItem</span><span class="variable">.rightBarButtonItem</span> = rightBtn;</span><br></pre></td></tr></table></figure></p>
<p>è¿™ç§æ–¹æ³•æ¯”è¾ƒç®€ä¾¿ï¼Œèƒ½å¤Ÿå¿«é€Ÿç†è§£ã€‚</p>
<p>ç¬¬äºŒç§æ–¹æ³•ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIBarButtonItem</span> * submitComment = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithTitle:<span class="string">@"æäº¤è¯„ä»·"</span> </span><br><span class="line">                                    style:<span class="built_in">UIBarButtonItemStylePlain</span> </span><br><span class="line">                                    target:<span class="keyword">self</span> </span><br><span class="line">                                    action:<span class="keyword">@selector</span>(submitComment:)];</span><br><span class="line">submitComment<span class="variable">.tintColor</span> = [<span class="built_in">UIColor</span> darkGrayColor];</span><br><span class="line">[[<span class="built_in">UIBarButtonItem</span> appearance] setTitleTextAttributes:</span><br><span class="line">                                [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:[<span class="built_in">UIFont</span> boldSystemFontOfSize:<span class="number">15</span>], <span class="built_in">NSFontAttributeName</span>, <span class="literal">nil</span>] </span><br><span class="line">                                forState:<span class="built_in">UIControlStateNormal</span>];</span><br></pre></td></tr></table></figure></p>
<p>Also,å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="built_in">UIBarButtonItem</span> appearanceWhenContainedIn:[<span class="built_in">UINavigationController</span> class], <span class="literal">nil</span>] </span><br><span class="line">                                            setTitleTextAttributes:[<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:</span><br><span class="line">                                            [<span class="built_in">UIFont</span> boldSystemFontOfSize:<span class="number">15</span>], <span class="built_in">NSFontAttributeName</span>, <span class="literal">nil</span>] </span><br><span class="line">                                            forState:<span class="built_in">UIControlStateNormal</span>];</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä¸­å¯¹äºè¿™äº›keyéœ€è¦çœ‹ä¸€ä¸‹ï¼Œå¸¸ç”¨çš„å‡ ä¸ªkeyå·²ç»è¢«<code>NSFontAttributeName, NSForegroundColorAttributeName, NSShadowAttributeName</code>ä»£æ›¿:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Keys for text attributes dictionaries.</span><br><span class="line"> These keys are superseded by the corresponding attribute name keys (NSFontAttributeName, NSForegroundColorAttributeName, NSShadowAttributeName)</span><br><span class="line"> in NSAttributedString.h.</span><br><span class="line"> */</span></span><br><span class="line"><span class="comment">// Key to the font in the text attributes dictionary. A UIFont instance is expected. Use a font with size 0.0 to get the default font size for the situation.</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> <span class="built_in">UITextAttributeFont</span> <span class="built_in">NS_DEPRECATED_IOS</span>(<span class="number">5</span>_0, <span class="number">7</span>_0, <span class="string">"Use NSFontAttributeName"</span>) __TVOS_PROHIBITED;</span><br><span class="line"><span class="comment">// Key to the text color in the text attributes dictionary. A UIColor instance is expected.</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> <span class="built_in">UITextAttributeTextColor</span> <span class="built_in">NS_DEPRECATED_IOS</span>(<span class="number">5</span>_0, <span class="number">7</span>_0, <span class="string">"Use NSForegroundColorAttributeName"</span>) __TVOS_PROHIBITED;</span><br><span class="line"><span class="comment">// Key to the text shadow color in the text attributes dictionary.  A UIColor instance is expected.</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> <span class="built_in">UITextAttributeTextShadowColor</span> <span class="built_in">NS_DEPRECATED_IOS</span>(<span class="number">5</span>_0, <span class="number">7</span>_0, <span class="string">"Use NSShadowAttributeName with an NSShadow instance as the value"</span>) __TVOS_PROHIBITED;</span><br><span class="line"><span class="comment">// Key to the offset used for the text shadow in the text attributes dictionary. An NSValue instance wrapping a UIOffset struct is expected.</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> <span class="built_in">UITextAttributeTextShadowOffset</span> <span class="built_in">NS_DEPRECATED_IOS</span>(<span class="number">5</span>_0, <span class="number">7</span>_0, <span class="string">"Use NSShadowAttributeName with an NSShadow instance as the value"</span>) __TVOS_PROHIBITED;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/************************ Attributes ************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Predefined character attributes for text. If the key is not in the dictionary, then use the default values as described below.</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSFontAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);                <span class="comment">// UIFont, default Helvetica(Neue) 12</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSParagraphStyleAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);      <span class="comment">// NSParagraphStyle, default defaultParagraphStyle</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSForegroundColorAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);     <span class="comment">// UIColor, default blackColor</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSBackgroundColorAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);     <span class="comment">// UIColor, default nil: no background</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSLigatureAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);            <span class="comment">// NSNumber containing integer, default 1: default ligatures, 0: no ligatures</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSKernAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);                <span class="comment">// NSNumber containing floating point value, in points; amount to modify default kerning. 0 means kerning is disabled.</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSStrikethroughStyleAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);  <span class="comment">// NSNumber containing integer, default 0: no strikethrough</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSUnderlineStyleAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);      <span class="comment">// NSNumber containing integer, default 0: no underline</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSStrokeColorAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);         <span class="comment">// UIColor, default nil: same as foreground color</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSStrokeWidthAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);         <span class="comment">// NSNumber containing floating point value, in percent of font point size, default 0: no stroke; positive for stroke alone, negative for stroke and fill (a typical value for outlined text would be 3.0)</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSShadowAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">6</span>_0);              <span class="comment">// NSShadow, default nil: no shadow</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> <span class="built_in">NSTextEffectAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_10, <span class="number">7</span>_0);          <span class="comment">// NSString, default nil: no text effect</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSAttachmentAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">7</span>_0);          <span class="comment">// NSTextAttachment, default nil</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSLinkAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">7</span>_0);                <span class="comment">// NSURL (preferred) or NSString</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSBaselineOffsetAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">7</span>_0);      <span class="comment">// NSNumber containing floating point value, in points; offset from baseline, default 0</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSUnderlineColorAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">7</span>_0);      <span class="comment">// UIColor, default nil: same as foreground color</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSStrikethroughColorAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">7</span>_0);  <span class="comment">// UIColor, default nil: same as foreground color</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSObliquenessAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">7</span>_0);         <span class="comment">// NSNumber containing floating point value; skew to be applied to glyphs, default 0: no skew</span></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSExpansionAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_0, <span class="number">7</span>_0);           <span class="comment">// NSNumber containing floating point value; log of expansion factor to be applied to glyphs, default 0: no expansion</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSWritingDirectionAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">7</span>_0);    <span class="comment">// NSArray of NSNumbers representing the nested levels of writing direction overrides as defined by Unicode LRE, RLE, LRO, and RLO characters.  The control characters can be obtained by masking NSWritingDirection and NSTextWritingDirection values.  LRE: NSWritingDirectionLeftToRight|NSWritingDirectionEmbedding, RLE: NSWritingDirectionRightToLeft|NSWritingDirectionEmbedding, LRO: NSWritingDirectionLeftToRight|NSWritingDirectionOverride, RLO: NSWritingDirectionRightToLeft|NSWritingDirectionOverride,</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> <span class="built_in">NSVerticalGlyphFormAttributeName</span> <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_7, <span class="number">6</span>_0);   <span class="comment">// An NSNumber containing an integer value.  0 means horizontal text.  1 indicates vertical text.  If not specified, it could follow higher-level vertical orientation settings.  Currently on iOS, it's always horizontal.  The behavior for any other value is undefined.</span></span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Blockå®ç°åŸç†]]></title>
      <url>http://koalahl.github.io/2015/12/16/Block%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</url>
      <content type="html"><![CDATA[<p>Blockä¸€ç›´æ˜¯iOSå¼€å‘ä¸­å¸¸ç”¨çš„æŠ€å·§ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„æŒ‡é’ˆå‡½æ•°ã€‚å¤šç”¨äºå‚æ•°å›è°ƒï¼Œå¼‚æ­¥åŠ è½½ç­‰ã€‚ä¸‹é¢å°±æ¥æ¢ç©¶ä»¥ä¸‹blockæ˜¯å¦‚ä½•å®ç°çš„ã€‚<br>è¿™ç¯‡æ˜¯è®°å½•æ ¹æ®ç½‘ä¸Šçš„æ–‡ç« è¿›è¡Œçš„å®é™…æ“ä½œã€‚Cå‡½æ•°çš„ç”Ÿæˆä¸­é—´ç¼–è¯‘ä»£ç çš„ç¼–è¯‘æ–¹æ³•æ˜¯clang -rewrite-objc xxxx.cã€‚ç”±äºç¼–è¯‘æ–‡ä»¶ä¸­å†…å®¹è¾ƒå¤šï¼Œè¿™é‡Œæˆ‘ä»¬åªæˆªå–æœ‰å…³blockçš„éƒ¨åˆ†ã€‚</p>
<p>é¦–å…ˆï¼Œçœ‹çœ‹æ²¡æœ‰blockçš„Cå‡½æ•°ä»¥åŠç¼–è¯‘åçš„ç»“æœï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#include <span class="title">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main()&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç¼–è¯‘ä»£ç ä¸­çš„blockï¼šè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªblockçš„Cå®ç°ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#ifndef BLOCK_IMPL</span></span><br><span class="line"><span class="preprocessor">#define BLOCK_IMPL</span></span><br><span class="line"><span class="keyword">struct</span> __block_impl &#123;</span><br><span class="line">  <span class="keyword">void</span> *isa;</span><br><span class="line">  <span class="keyword">int</span> Flags;</span><br><span class="line">  <span class="keyword">int</span> Reserved;</span><br><span class="line">  <span class="keyword">void</span> *FuncPtr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>*isaè¯´æ˜blockä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ä½¿ç”¨ï¼ˆä¾‹å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªmyBlockç±»å‹çš„block1ï¼‰ï¼ŒæŒ‡é’ˆå˜é‡FunPtråº”è¯¥å°±æ˜¯æŒ‡å‘äº†blockä»£ç å—çš„å‡½æ•°é¦–åœ°å€<br><a id="more"></a><br>æ¥ç€æˆ‘ä»¬åŠ ä¸€ä¸ªblockåˆ°.cæ–‡ä»¶ä¸­ï¼Œå¹¶è¿›è¡Œç¼–è¯‘ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#include <span class="title">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main()&#123;</span><br><span class="line"><span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span>(^myBlock)(<span class="keyword">void</span>) = ^(<span class="keyword">void</span>)&#123;</span><br><span class="line">	printf(<span class="string">"hello world! %d\n"</span>,i);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">myBlock();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç¼–è¯‘åï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> __main_block_impl_0 &#123;</span><br><span class="line">  <span class="keyword">struct</span> __block_impl impl;</span><br><span class="line">  <span class="keyword">struct</span> __main_block_desc_0* Desc;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  __main_block_impl_0(<span class="keyword">void</span> *fp, <span class="keyword">struct</span> __main_block_desc_0 *desc, <span class="keyword">int</span> _i, <span class="keyword">int</span> flags=<span class="number">0</span>) : i(_i) &#123;</span><br><span class="line">    impl<span class="variable">.isa</span> = &amp;_<span class="built_in">NSConcreteStackBlock</span>;</span><br><span class="line">    impl<span class="variable">.Flags</span> = flags;</span><br><span class="line">    impl<span class="variable">.FuncPtr</span> = fp;</span><br><span class="line">    Desc = desc;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __main_block_func_0(<span class="keyword">struct</span> __main_block_impl_0 *__cself) &#123;</span><br><span class="line">  <span class="keyword">int</span> i = __cself-&gt;i; <span class="comment">// bound by copy</span></span><br><span class="line"></span><br><span class="line">  printf(<span class="string">"hello world! %d\n"</span>,i);</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">struct</span> __main_block_desc_0 &#123;</span><br><span class="line">  size_t reserved;</span><br><span class="line">  size_t Block_size;</span><br><span class="line">&#125; __main_block_desc_0_DATA = &#123; <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> __main_block_impl_0)&#125;;</span><br><span class="line"><span class="keyword">int</span> main()&#123;</span><br><span class="line"> <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">void</span>(*myBlock)(<span class="keyword">void</span>) = (<span class="keyword">void</span> (*)())&amp;__main_block_impl_0((<span class="keyword">void</span> *)__main_block_func_0, &amp;__main_block_desc_0_DATA, i);</span><br><span class="line"></span><br><span class="line"> ((<span class="keyword">void</span> (*)(__block_impl *))((__block_impl *)myBlock)-&gt;FuncPtr)((__block_impl *)myBlock);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3.å‡å¦‚æˆ‘ä»¬è¦ä¿®æ”¹å‡½æ•°ä¸­å±€éƒ¨å˜é‡çš„å€¼ï¼Œåˆ™éœ€è¦åŠ ä¸Š__blockä¿®é¥°ç¬¦ï¼Œåé¢æˆ‘ä»¬æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆè¿™æ ·æ‰å¯ä»¥ä¿®æ”¹ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#include <span class="title">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main()&#123;</span><br><span class="line">__block <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span>(^myBlock)(<span class="keyword">void</span>) = ^(<span class="keyword">void</span>)&#123;</span><br><span class="line">i = <span class="number">12</span>;</span><br><span class="line">	printf(<span class="string">"hello world! %d\n"</span>,i);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">myBlock();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç¼–è¯‘åçš„cppä»£ç ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> __Block_byref_i_0 &#123;</span><br><span class="line">  <span class="keyword">void</span> *__isa;</span><br><span class="line">__Block_byref_i_0 *__forwarding;</span><br><span class="line"> <span class="keyword">int</span> __flags;</span><br><span class="line"> <span class="keyword">int</span> __size;</span><br><span class="line"> <span class="keyword">int</span> i;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> __main_block_impl_0 &#123;</span><br><span class="line">  <span class="keyword">struct</span> __block_impl impl;</span><br><span class="line">  <span class="keyword">struct</span> __main_block_desc_0* Desc;</span><br><span class="line">  __Block_byref_i_0 *i; <span class="comment">// by ref</span></span><br><span class="line">  __main_block_impl_0(<span class="keyword">void</span> *fp, <span class="keyword">struct</span> __main_block_desc_0 *desc, __Block_byref_i_0 *_i, <span class="keyword">int</span> flags=<span class="number">0</span>) : i(_i-&gt;__forwarding) &#123;</span><br><span class="line">    impl<span class="variable">.isa</span> = &amp;_<span class="built_in">NSConcreteStackBlock</span>;</span><br><span class="line">    impl<span class="variable">.Flags</span> = flags;</span><br><span class="line">    impl<span class="variable">.FuncPtr</span> = fp;</span><br><span class="line">    Desc = desc;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __main_block_func_0(<span class="keyword">struct</span> __main_block_impl_0 *__cself) &#123;</span><br><span class="line">  __Block_byref_i_0 *i = __cself-&gt;i; <span class="comment">// bound by ref</span></span><br><span class="line"></span><br><span class="line">  (i-&gt;__forwarding-&gt;i) = <span class="number">12</span>;</span><br><span class="line">  printf(<span class="string">"hello world! %d\n"</span>,(i-&gt;__forwarding-&gt;i));</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __main_block_copy_0(<span class="keyword">struct</span> __main_block_impl_0*dst, <span class="keyword">struct</span> __main_block_impl_0*src) &#123;_Block_object_assign((<span class="keyword">void</span>*)&amp;dst-&gt;i, (<span class="keyword">void</span>*)src-&gt;i, <span class="number">8</span><span class="comment">/*BLOCK_FIELD_IS_BYREF*/</span>);&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __main_block_dispose_0(<span class="keyword">struct</span> __main_block_impl_0*src) &#123;_Block_object_dispose((<span class="keyword">void</span>*)src-&gt;i, <span class="number">8</span><span class="comment">/*BLOCK_FIELD_IS_BYREF*/</span>);&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">struct</span> __main_block_desc_0 &#123;</span><br><span class="line">  size_t reserved;</span><br><span class="line">  size_t Block_size;</span><br><span class="line">  <span class="keyword">void</span> (*<span class="keyword">copy</span>)(<span class="keyword">struct</span> __main_block_impl_0*, <span class="keyword">struct</span> __main_block_impl_0*);</span><br><span class="line">  <span class="keyword">void</span> (*dispose)(<span class="keyword">struct</span> __main_block_impl_0*);</span><br><span class="line">&#125; __main_block_desc_0_DATA = &#123; <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> __main_block_impl_0), __main_block_copy_0, __main_block_dispose_0&#125;;</span><br><span class="line"><span class="keyword">int</span> main()&#123;</span><br><span class="line"> __attribute__((__blocks__(<span class="keyword">byref</span>))) __Block_byref_i_0 i = &#123;(<span class="keyword">void</span>*)<span class="number">0</span>,(__Block_byref_i_0 *)&amp;i, <span class="number">0</span>, <span class="keyword">sizeof</span>(__Block_byref_i_0), <span class="number">10</span>&#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">void</span>(*myBlock)(<span class="keyword">void</span>) = (<span class="keyword">void</span> (*)())&amp;__main_block_impl_0((<span class="keyword">void</span> *)__main_block_func_0, &amp;__main_block_desc_0_DATA, (__Block_byref_i_0 *)&amp;i, <span class="number">570425344</span>);</span><br><span class="line"></span><br><span class="line"> ((<span class="keyword">void</span> (*)(__block_impl *))((__block_impl *)myBlock)-&gt;FuncPtr)((__block_impl *)myBlock);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TableViewCellæ ¹æ®å†…å®¹è‡ªé€‚åº”é«˜åº¦çš„æ–¹æ³•]]></title>
      <url>http://koalahl.github.io/2015/12/16/TableViewCell%E6%A0%B9%E6%8D%AE%E5%86%85%E5%AE%B9%E8%87%AA%E9%80%82%E5%BA%94%E9%AB%98%E5%BA%A6%E7%9A%84%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡åŒæ—¶å‚è€ƒ <a href="http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/" target="_blank" rel="external">http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/</a> </p>
<h2>ä¸€ï¼šæ ¹æ®cellå†…å®¹æ‰‹åŠ¨è®¡ç®—cellé«˜åº¦</h2>

<p>æ— è®ºä½¿ç”¨xibè¿˜æ˜¯ä»£ç å†™æ§ä»¶ï¼Œæ ¸å¿ƒæ€æƒ³éƒ½æ˜¯æ ¹æ®cellä¸­contentå†…å®¹çš„é«˜åº¦æ¥è®¡ç®—cellçš„é«˜åº¦ã€‚<br>1.åœ¨è·å–åˆ°cellæ•°æ®æºçš„æ—¶å€™è®¡ç®—å†…å®¹é«˜åº¦ã€‚å¯ä»¥è®¾ç½®ä¸€ä¸ªsizeå±æ€§ï¼Œç”¨æ¥è®°å½•ã€‚<br>2.å¦‚æœæ˜¯xibï¼Œå»æ‰autolayout<br>3.åœ¨cellForRowAtIndexPathæ–¹æ³•ä¸­å¡«å……cellæ•°æ®çš„æ—¶å€™ï¼Œæ ¹æ®å†…å®¹é«˜åº¦ï¼Œè®¾ç½®æ§ä»¶é«˜åº¦<br>4.åœ¨heightForRowAtIndexpathæ–¹æ³•ä¸­ï¼Œè®¾ç½®æ¯ä¸€ä¸ªcell çš„é«˜åº¦</p>
<h2>äºŒï¼šSelf sizing cell + autolayout</h2>

<p>Self sizing cell æ˜¯iOS8ä¸­æ·»åŠ ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œç”¨æ¥è‡ªé€‚åº”cellé«˜åº¦ã€‚<br><img src="/img/self sizing cell.jpg" alt="Self Sizing Cell"><br>åŒæ—¶æ‰“å¼€ä»¥ä¸‹å‚æ•°ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span><span class="variable">.tableView</span><span class="variable">.estimatedRowHeight</span> = <span class="number">213</span>;<span class="comment">//æ·»åŠ ä¼°ç®—é«˜åº¦ï¼Œè¦ä¸ç„¶è‡ªåŠ¨ç®—é«˜å¤±æ•ˆï¼Ÿ</span></span><br><span class="line"><span class="keyword">self</span><span class="variable">.tableView</span><span class="variable">.rowHeight</span> = <span class="built_in">UITableViewAutomaticDimension</span>;</span><br></pre></td></tr></table></figure></p>
<h2>ä¸‰ï¼šUITableView+FDTemplateLayoutCell</h2>

<p>ä½¿ç”¨çš„API:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;UITableView+FDTemplateLayoutCell.h&gt;</span> </span></span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath &#123; </span><br><span class="line">	<span class="keyword">return</span> [tableView fd_heightForCellWithIdentifier:<span class="string">@"identifer"</span> cacheByIndexPath:indexPath configuration:^(<span class="keyword">id</span> cell)</span><br><span class="line"> 			&#123;</span><br><span class="line">  			<span class="comment">// é…ç½® cell çš„æ•°æ®æºï¼Œå’Œ "cellForRow" å¹²çš„äº‹ä¸€è‡´ï¼Œæ¯”å¦‚ï¼š </span></span><br><span class="line">			  cell<span class="variable">.entity</span> = <span class="keyword">self</span><span class="variable">.feedEntities</span>[indexPath<span class="variable">.row</span>]; </span><br><span class="line">  			&#125;]; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://github.com/forkingdog/UITableView-FDTemplateLayoutCell" target="_blank" rel="external">https://github.com/forkingdog/UITableView-FDTemplateLayoutCell</a><br><a id="more"></a></p>
<p>ä¸‹é¢ç»™å‡ºç¬¬ä¸€ç§æ‰‹åŠ¨è®¡ç®—é«˜åº¦çš„ä»£ç æ€è·¯ï¼š<br>è¯¦ç»†æ­¥éª¤ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">HLComment *comment = [HLComment new];</span><br><span class="line"></span><br><span class="line"> comment<span class="variable">.floor</span> = obj[<span class="string">@"floor"</span>];</span><br><span class="line"></span><br><span class="line"> comment<span class="variable">.commentId</span> = obj[<span class="string">@"id"</span>];</span><br><span class="line"></span><br><span class="line"> comment<span class="variable">.content</span> = obj[<span class="string">@"content"</span>];</span><br></pre></td></tr></table></figure>
<p> //è®¡ç®—contentå†…å®¹é«˜åº¦<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">NSDictionary</span> *atrri = @&#123;<span class="built_in">NSFontAttributeName</span>: [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">15</span>]&#125;;</span><br><span class="line"></span><br><span class="line"> <span class="built_in">CGRect</span> rect = [comment<span class="variable">.content</span> boundingRectWithSize:<span class="built_in">CGSizeMake</span>(<span class="number">220</span>, <span class="number">1000</span>) options:<span class="built_in">NSStringDrawingUsesLineFragmentOrigin</span> attributes:atrri context:<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line">comment<span class="variable">.size</span> = rect<span class="variable">.size</span>;<span class="comment">//ä¿å­˜è¿™ä¸ªé«˜åº¦</span></span><br></pre></td></tr></table></figure></p>
<p>//å¡«å……cellå†…å®¹æ—¶ï¼Œæ ¹æ®contenté«˜åº¦æ¥è®¾ç½®labelé«˜åº¦<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)fillCellWithModel:(HLItem *)item&#123;</span><br><span class="line"></span><br><span class="line">	â€¦.</span><br><span class="line"></span><br><span class="line">    <span class="built_in">CGRect</span> frame = _content<span class="variable">.frame</span>;<span class="comment">//_content æ˜¯å†…å®¹label</span></span><br><span class="line"></span><br><span class="line">    frame<span class="variable">.size</span> = item<span class="variable">.size</span>;</span><br><span class="line"></span><br><span class="line">    _content<span class="variable">.frame</span> = frame;</span><br><span class="line"></span><br><span class="line">	â€¦..</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¦å¤–åœ¨heightForRowAtIndexPath ä¸­æ·»åŠ ä¸€å®šçš„ä½™é‡ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‡ªé€‚åº”cellé«˜åº¦</span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//NSLog(@"è®¡ç®—cellé«˜åº¦");;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (indexPath<span class="variable">.row</span> == <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">self</span><span class="variable">.item</span><span class="variable">.size</span><span class="variable">.height</span>+<span class="number">140</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    HLComment *item = _dataSource[indexPath<span class="variable">.row</span>-<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> item<span class="variable">.size</span><span class="variable">.height</span>+<span class="number">60</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç†è§£Objective-Cä¸­çš„æ¶ˆæ¯å‘é€]]></title>
      <url>http://koalahl.github.io/2015/12/16/%E7%90%86%E8%A7%A3Objective-C%E4%B8%AD%E7%9A%84%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81/</url>
      <content type="html"><![CDATA[<h2>æ¶ˆæ¯å‘é€</h2><br>é¦–å…ˆæ¥çœ‹çœ‹æ€ä¹ˆç†è§£å‘é€æ¶ˆæ¯çš„å«ä¹‰ï¼š<br><br>é¢å¯¹ç€ Cocoa ä¸­å¤§é‡ APIï¼ŒåªçŸ¥é“ç®€å•çš„æŸ¥æ–‡æ¡£å’Œè°ƒç”¨ã€‚è¿˜è®°å¾—åˆå­¦ Objective-C æ—¶æŠŠ<code>[receiver message]</code>å½“æˆç®€å•çš„æ–¹æ³•è°ƒç”¨ï¼Œè€Œæ— è§†äº†â€œå‘é€æ¶ˆæ¯â€è¿™å¥è¯çš„æ·±åˆ»å«ä¹‰ã€‚äºæ˜¯<code>[receiver message]</code>ä¼šè¢«ç¼–è¯‘å™¨è½¬åŒ–ä¸ºï¼š<br>    <code>objc_msgSend(receiver, selector)</code><br>å¦‚æœæ¶ˆæ¯å«æœ‰å‚æ•°ï¼Œåˆ™ä¸ºï¼š<br>    <code>objc_msgSend(receiver, selector, arg1, arg2, ...)</code><br>å¦‚æœæ¶ˆæ¯çš„æ¥æ”¶è€…èƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”çš„selectorï¼Œé‚£ä¹ˆå°±ç›¸å½“äºç›´æ¥æ‰§è¡Œäº†æ¥æ”¶è€…è¿™ä¸ªå¯¹è±¡çš„ç‰¹å®šæ–¹æ³•ï¼›å¦åˆ™ï¼Œæ¶ˆæ¯è¦ä¹ˆè¢«è½¬å‘ï¼Œæˆ–æ˜¯ä¸´æ—¶å‘æ¥æ”¶è€…åŠ¨æ€æ·»åŠ è¿™ä¸ªselectorå¯¹åº”çš„å®ç°å†…å®¹ï¼Œè¦ä¹ˆå°±å¹²è„†ç©å®Œå´©æºƒæ‰ã€‚<br><br>ç°åœ¨å¯ä»¥çœ‹å‡º[receiver message]çœŸçš„ä¸æ˜¯ä¸€ä¸ªç®€ç®€å•å•çš„æ–¹æ³•è°ƒç”¨ã€‚å› ä¸ºè¿™åªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µç¡®å®šäº†è¦å‘æ¥æ”¶è€…å‘é€messageè¿™æ¡æ¶ˆæ¯ï¼Œè€Œreceiveå°†è¦å¦‚ä½•å“åº”è¿™æ¡æ¶ˆæ¯ï¼Œé‚£å°±è¦çœ‹è¿è¡Œæ—¶å‘ç”Ÿçš„æƒ…å†µæ¥å†³å®šäº†ã€‚<br><br>Objective-C çš„ Runtime é“¸å°±äº†å®ƒåŠ¨æ€è¯­è¨€çš„ç‰¹æ€§ï¼Œè¿™äº›æ·±å±‚æ¬¡çš„çŸ¥è¯†è™½ç„¶å¹³æ—¶å†™ä»£ç ç”¨çš„å°‘ä¸€äº›ï¼Œä½†æ˜¯å´æ˜¯æ¯ä¸ª Objc ç¨‹åºå‘˜éœ€è¦äº†è§£çš„ã€‚<br><br>Objc Runtimeä½¿å¾—Cå…·æœ‰äº†é¢å‘å¯¹è±¡èƒ½åŠ›ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶åˆ›å»ºï¼Œæ£€æŸ¥ï¼Œä¿®æ”¹ç±»ã€å¯¹è±¡å’Œå®ƒä»¬çš„æ–¹æ³•ã€‚å¯ä»¥ä½¿ç”¨runtimeçš„ä¸€ç³»åˆ—æ–¹æ³•å®ç°ã€‚<br><br><h3>Cè¯­è¨€ä¸­çš„åŠ¨æ€æ–¹æ³•</h3><br><br>ç”±äºObjective-Cæ˜¯Cè¯­è¨€çš„è¶…é›†ï¼Œæ‰€ä»¥æœ€å¥½å…ˆç†è§£Cè¯­è¨€çš„å‡½æ•°è°ƒç”¨æ–¹å¼ã€‚Cè¯­è¨€ä½¿ç”¨â€œé™æ€ç»‘å®šï¼ˆstatic bindingï¼‰â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç¼–è¯‘å™¨å°±èƒ½å†³å®šè¿è¡Œæ—¶æ‰€åº”è°ƒç”¨çš„å‡½æ•°ã€‚<br>ç¤ºä¾‹ä»£ç ï¼š<br><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import &lt;stdio.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Hello,world\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printGoodBye</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"GoodBye,world\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doThings</span><span class="params">(<span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(type == <span class="number">0</span>)&#123;</span><br><span class="line">        printHello();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        printGoodBye();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ä»£ç çš„æ—¶å€™å°±çŸ¥é“ç¨‹åºä¸­æœ‰<code>printHello</code>,<code>printGoodBye</code>ä¸¤ä¸ªå‡½æ•°äº†ï¼Œå‡½æ•°åœ°å€ä¹Ÿç¡¬ç¼–ç åœ¨æŒ‡ä»¤ä¹‹ä¸­ã€‚<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import &lt;stdio.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Hello,world\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printGoodBye</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"GoodBye,world\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doThings</span><span class="params">(<span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">void</span> (*func)();</span><br><span class="line">    <span class="keyword">if</span>(type == <span class="number">0</span>)&#123;</span><br><span class="line">        func = printHello;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        func = printGoodBye;</span><br><span class="line">    &#125;</span><br><span class="line">    func();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br>è¿™æ ·å°±æ˜¯åŠ¨æ€ç»‘å®šï¼ˆdynamic bindingï¼‰äº†ï¼Œå› ä¸ºç´¢è¦è°ƒç”¨çš„å‡½æ•°ç›´åˆ°è¿è¡ŒæœŸæ‰èƒ½ç¡®å®šã€‚<br><br><h3>é¡ºä¾¿é™„ä¸ŠOCä¸­ä¸€ä¸ªç±»çš„åº•å±‚æ•°æ®ç»“æ„</h3><br>macç”µè„‘ä¸Šçš„è·¯å¾„/usr/include/objc/runtime.h<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">struct</span> objc_class &#123;</span><br><span class="line">	Class isa OBJC_ISA_<span class="built_in">AVAILABILITY</span>; <span class="comment">//isaæŒ‡é’ˆæŒ‡å‘Meta Classï¼Œå› ä¸ºObjcçš„ç±»çš„æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªObjectï¼Œä¸ºäº†å¤„ç†è¿™ä¸ªå…³ç³»ï¼Œr		untimeå°±åˆ›é€ äº†Meta Classï¼Œå½“ç»™ç±»å‘é€[NSObject alloc]è¿™æ ·æ¶ˆæ¯æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŠŠè¿™ä¸ªæ¶ˆæ¯å‘ç»™äº†Class Object</span></span><br><span class="line"></span><br><span class="line">	<span class="preprocessor">#if !__OBJC2__</span></span><br><span class="line">	Class super_class OBJC2_UN<span class="built_in">AVAILABLE</span>; <span class="comment">// çˆ¶ç±»</span></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span> *name OBJC2_UN<span class="built_in">AVAILABLE</span>; <span class="comment">// ç±»å</span></span><br><span class="line">	<span class="keyword">long</span> version OBJC2_UN<span class="built_in">AVAILABLE</span>; <span class="comment">// ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œé»˜è®¤ä¸º0</span></span><br><span class="line">	<span class="keyword">long</span> info OBJC2_UN<span class="built_in">AVAILABLE</span>; <span class="comment">// ç±»ä¿¡æ¯ï¼Œä¾›è¿è¡ŒæœŸä½¿ç”¨çš„ä¸€äº›ä½æ ‡è¯†</span></span><br><span class="line">	<span class="keyword">long</span> instance_size OBJC2_UN<span class="built_in">AVAILABLE</span>; <span class="comment">// è¯¥ç±»çš„å®ä¾‹å˜é‡å¤§å°</span></span><br><span class="line">	<span class="keyword">struct</span> objc_ivar_list *ivars OBJC2_UN<span class="built_in">AVAILABLE</span>; <span class="comment">// è¯¥ç±»çš„æˆå‘˜å˜é‡é“¾è¡¨</span></span><br><span class="line">	<span class="keyword">struct</span> objc_method_list **methodLists OBJC2_UN<span class="built_in">AVAILABLE</span>; <span class="comment">// æ–¹æ³•å®šä¹‰çš„é“¾è¡¨</span></span><br><span class="line">	<span class="keyword">struct</span> objc_cache *cache OBJC2_UN<span class="built_in">AVAILABLE</span>; <span class="comment">// æ–¹æ³•ç¼“å­˜ï¼Œå¯¹è±¡æ¥åˆ°ä¸€ä¸ªæ¶ˆæ¯ä¼šæ ¹æ®isaæŒ‡é’ˆæŸ¥æ‰¾æ¶ˆæ¯å¯¹è±¡ï¼Œè¿™æ—¶ä¼šåœ¨method		Listsä¸­éå†ï¼Œå¦‚æœcacheäº†ï¼Œå¸¸ç”¨çš„æ–¹æ³•è°ƒç”¨æ—¶å°±èƒ½å¤Ÿæé«˜è°ƒç”¨çš„æ•ˆç‡ã€‚</span></span><br><span class="line">	<span class="keyword">struct</span> objc_protocol_list *protocols OBJC2_UN<span class="built_in">AVAILABLE</span>; <span class="comment">// åè®®é“¾è¡¨</span></span><br><span class="line">	<span class="preprocessor">#endif</span></span><br><span class="line"></span><br><span class="line">&#125; OBJC2_UN<span class="built_in">AVAILABLE</span>;</span><br></pre></td></tr></table></figure><br><br><a id="more"></a><br>OCä¸­ä¸€ä¸ªç±»çš„å¯¹è±¡å®ä¾‹çš„æ•°æ®ç»“æ„ï¼ˆ/usr/include/objc/objc.hï¼‰ï¼Œå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ª<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> objc_class *Class;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// Represents an instance of a class.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> objc_object &#123;</span><br><span class="line"></span><br><span class="line">    Class isa  OBJC_ISA_<span class="built_in">AVAILABILITY</span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// A pointer to an instance of a class.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> objc_object *<span class="keyword">id</span>;</span><br></pre></td></tr></table></figure><br><br>å‘objectå‘é€æ¶ˆæ¯æ—¶ï¼ŒRuntimeåº“ä¼šæ ¹æ®objectçš„isaæŒ‡é’ˆæ‰¾åˆ°è¿™ä¸ªå®ä¾‹objectæ‰€å±äºçš„ç±»ï¼Œç„¶ååœ¨ç±»çš„æ–¹æ³•åˆ—è¡¨ä»¥åŠçˆ¶ç±»æ–¹æ³•åˆ—è¡¨å¯»æ‰¾å¯¹åº”çš„æ–¹æ³•è¿è¡Œã€‚idæ˜¯ä¸€ä¸ªobjc_objectç»“æ„ç±»å‹çš„æŒ‡é’ˆï¼Œè¿™ä¸ªç±»å‹çš„å¯¹è±¡èƒ½å¤Ÿè½¬æ¢æˆä»»ä½•ä¸€ç§å¯¹è±¡ã€‚<br><br><h3>ç„¶åå†æ¥çœ‹çœ‹æ¶ˆæ¯å‘é€çš„å‡½æ•°ï¼š<code>objc_msgSend</code>å‡½æ•°</h3><br><br>åœ¨å¼•è¨€ä¸­å·²ç»å¯¹objc_msgSendè¿›è¡Œäº†ä¸€ç‚¹ä»‹ç»ï¼Œçœ‹èµ·æ¥åƒæ˜¯objc_msgSendè¿”å›äº†æ•°æ®ï¼Œå…¶å®objc_msgSendä»ä¸è¿”å›æ•°æ®è€Œæ˜¯ä½ çš„æ–¹æ³•è¢«è°ƒç”¨åè¿”å›äº†æ•°æ®ã€‚ä¸‹é¢è¯¦ç»†å™è¿°ä¸‹æ¶ˆæ¯å‘é€æ­¥éª¤ï¼š<br><br>1.æ£€æµ‹è¿™ä¸ª selector æ˜¯ä¸æ˜¯è¦å¿½ç•¥çš„ã€‚æ¯”å¦‚ Mac OS X å¼€å‘ï¼Œæœ‰äº†åƒåœ¾å›æ”¶å°±ä¸ç†ä¼š retain,release è¿™äº›å‡½æ•°äº†ã€‚<br>2.æ£€æµ‹è¿™ä¸ª target æ˜¯ä¸æ˜¯ nil å¯¹è±¡ã€‚ObjC çš„ç‰¹æ€§æ˜¯å…è®¸å¯¹ä¸€ä¸ª nil å¯¹è±¡æ‰§è¡Œä»»ä½•ä¸€ä¸ªæ–¹æ³•ä¸ä¼š Crashï¼Œå› ä¸ºä¼šè¢«å¿½ç•¥æ‰ã€‚<br>3.å¦‚æœä¸Šé¢ä¸¤ä¸ªéƒ½è¿‡äº†ï¼Œé‚£å°±å¼€å§‹æŸ¥æ‰¾è¿™ä¸ªç±»çš„ IMPï¼Œå…ˆä» cache é‡Œé¢æ‰¾ï¼Œå®Œäº†        æ‰¾å¾—åˆ°å°±è·³åˆ°å¯¹åº”çš„å‡½æ•°å»æ‰§è¡Œã€‚<br>4.å¦‚æœ cache æ‰¾ä¸åˆ°å°±æ‰¾ä¸€ä¸‹æ–¹æ³•åˆ†å‘è¡¨ã€‚<br>5.å¦‚æœåˆ†å‘è¡¨æ‰¾ä¸åˆ°å°±åˆ°è¶…ç±»çš„åˆ†å‘è¡¨å»æ‰¾ï¼Œä¸€ç›´æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°NSObjectç±»ä¸ºæ­¢ã€‚<br>6.å¦‚æœè¿˜æ‰¾ä¸åˆ°å°±è¦å¼€å§‹è¿›å…¥åŠ¨æ€æ–¹æ³•è§£æäº†ï¼Œåé¢ä¼šæåˆ°ã€‚<br><br>è¿™ä¹ˆä¸€æƒ³ï¼Œè°ƒç”¨ä¸€ä¸ªæ–¹æ³•ä¼¼ä¹éœ€è¦å¾ˆå¤šæ­¥éª¤ã€‚ä¸è¿‡objc_msgSendä¼šå°†åŒ¹é…ç»“æœç¼“å­˜åœ¨<code>fast map</code>å¿«é€Ÿæ˜ å°„è¡¨é‡Œé¢ï¼Œæ¯ä¸ªç±»éƒ½æœ‰è¿™æ ·ä¸€å—ç¼“å­˜ã€‚å½“ç„¶è¿™ç§fast path è¿˜æ˜¯ä¸å¦‚é™æ€ç»‘å®šçš„å‡½æ•°è°ƒç”¨é‚£æ ·è¿…é€Ÿï¼Œä¸è¿‡åªè¦æŠŠSelector<br>ç¼“å­˜èµ·æ¥ï¼Œä¹Ÿå°±ä¸ä¼šæ…¢å¾ˆå¤šï¼Œå®é™…ä¸Šï¼Œè¿™å¹¶ä¸æ˜¯ç“¶é¢ˆã€‚<br><br><h2>æ¶ˆæ¯è½¬å‘æœºåˆ¶</h2>

<p>å½“ä¸€ä¸ªå¯¹è±¡æ¥æ”¶åˆ°æ— æ³•è§£è¯»çš„æ¶ˆæ¯æ—¶ï¼Œå°±ä¼šå¯åŠ¨<code>æ¶ˆæ¯è½¬å‘ï¼ˆmessage forwordingï¼‰</code>æœºåˆ¶ã€‚coderå¯ç»ç”±æ­¤è¿‡ç¨‹å‘Šè¯‰å¯¹è±¡åº”è¯¥å¦‚ä½•å¤„ç†ä½ç½®æ¶ˆæ¯ã€‚<br>ä¾‹å¦‚ç»™æŸä¸€ä¸ªå¯¹è±¡å®ä¾‹å‘é€äº†ä¸€ä¸ªè¯¥å¯¹è±¡ä¸å­˜åœ¨çš„æ–¹æ³•ï¼Œæœ€åå°±ä¼šcrashæ‰ã€‚<br><code>-[NSCFDictionary indexOfObject:]: unrecognized selector sent to instance 0x10773929356</code><br>æ¶ˆæ¯è½¬å‘åˆ†ä¸ºä¸¤å¤§é˜¶æ®µã€‚</p>
<ol>
<li>ç¬¬ä¸€é˜¶æ®µå…ˆè¯¢é—®æ¥å—å¯¹è±¡æ‰€å±çš„ç±»æ˜¯å¦èƒ½å¤ŸåŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œä»¥å¤„ç†è¿™ä¸ªunknown selectorï¼Œè¿™å«åšåŠ¨æ€æ–¹æ³•è§£æï¼ˆdynamic method resolutionï¼‰.</li>
<li>ç¬¬äºŒé˜¶æ®µè®¾è®¡å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼ˆfull forwording mechanismï¼‰ã€‚<br>å¦‚æœåœ¨è¿è¡ŒæœŸï¼Œç³»ç»Ÿå·²ç»æŠŠç¬¬ä¸€é˜¶æ®µæ‰§è¡Œå®Œäº†ï¼Œé‚£ä¹ˆæ¥å—è€…è‡ªå·±å°±æ— æ³•å†ä»¥åŠ¨æ€æ·»åŠ æ–¹æ³•çš„æ–¹å¼æ¥å“åº”åŒ…å«è¯¥unknown selectorçš„æ¶ˆæ¯äº†ã€‚æ­¤æ—¶ï¼Œè¿è¡ŒæœŸç³»ç»Ÿä¼šè¯·æ±‚æ¥å—è€…ä»¥<br>å…¶ä»–æ‰‹æ®µæ¥å¤„ç†ä¸æ¶ˆæ¯ç›¸å…³çš„æ–¹æ³•è°ƒç”¨ã€‚è¿™é‡Œåˆåˆ†ä¸ºä¸¤å°æ­¥ï¼š<br> 2.1 é¦–å…ˆï¼Œæ¥å—è€…æŸ¥çœ‹æ˜¯å¦æœ‰å…¶ä»–å¯¹è±¡èƒ½å¤„ç†è¿™æ¡æ¶ˆæ¯ï¼Œè‹¥æœ‰ï¼Œåˆ™è¿è¡Œæ—¶ç³»ç»Ÿä¼šå°†æ¶ˆæ¯è½¬ç»™é‚£ä¸ªå¯¹è±¡ï¼Œä¸€åˆ‡å¦‚å¸¸ã€‚<br> 2.2 è‹¥æ²¡æœ‰å¯æ›¿ä»£çš„æ¥å—è€…ï¼ˆreplacement receiverï¼‰ï¼Œåˆ™å¯åŠ¨å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šæŠŠä¸æ¶ˆæ¯æœ‰å…³çš„å…¨éƒ¨ç»†èŠ‚éƒ½å°è£…åˆ°NSInvocationå¯¹è±¡ä¸­ï¼Œå†ç»™æ¥å—è€…æœ€åä¸€æ¬¡æœºä¼šï¼Œä»¤å…¶è®¾æ³•è§£å†³å½“å‰è¿˜æœªå¤„ç†çš„æ¶ˆæ¯ã€‚</li>
</ol>
<p>a.åŠ¨æ€æ–¹æ³•è§£æ<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+ (Bool)resolveInstanceMethod:(SEL)Selector</span><br><span class="line">+ (Bool)resolveClassMethod:(SEL)Selector</span><br></pre></td></tr></table></figure></p>
<p>b.æ¶ˆæ¯è½¬å‘ç»™å¯æ›¿ä»£æ¥å—è€…ï¼ˆreplacement receiverï¼‰<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (id)forwardingTargetForSelector:(SEL)Selector</span><br></pre></td></tr></table></figure></p>
<p>c.å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œæ„é€ NSInvocationå¯¹è±¡</p>
<ul>
<li>(id)forwardInvocation:(NSInvocation *)invocation</li>
</ul>
<p><img src="/img/message forwarding.png" alt="å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æµç¨‹å›¾"></p>
<p></p><h2>æ€»ç»“</h2><p></p>
<ul>
<li>æ¶ˆæ¯ç”±æ¥å—è€…ã€é€‰æ‹©å™¨åŠå‚æ•°æ„æˆã€‚ç»™æŸå¯¹è±¡å‘é€æ¶ˆæ¯ï¼ˆinvoke a messageï¼‰ï¼Œä¹Ÿå°±ç›¸å½“äºåœ¨è¯¥å¯¹è±¡ä¸Šè°ƒç”¨æ–¹æ³•ï¼ˆcalla methodï¼‰</li>
<li><p>å‘ç»™æŸå¯¹è±¡çš„å…¨éƒ¨æ¶ˆæ¯éƒ½è¦æœ‰åŠ¨æ€æ¶ˆæ¯æ´¾å‘ç³»ç»Ÿï¼ˆdynamic message dispatch systemï¼‰æ¥å¤„ç†ï¼Œè¯¥ç³»ç»Ÿä¼šæŸ¥å‡ºå¯¹åº”çš„æ–¹æ³•ï¼Œå¹¶æ‰§è¡Œå…¶ä»£ç ã€‚</p>
</li>
<li><p>è‹¥å¯¹è±¡æ— æ³•å“åº”æŸä¸ªé€‰æ‹©å™¨ä¸­çš„æ¶ˆæ¯ï¼Œåˆ™è¿›å…¥æ¶ˆæ¯è½¬å‘è¿‡ç¨‹ã€‚</p>
</li>
<li>é€šè¿‡è¿è¡ŒæœŸçš„åŠ¨æ€æ–¹æ³•è§£ææœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦ç”¨åˆ°æŸä¸ªæ–¹æ³•æ—¶å†å°†å…¶åŠ å…¥ç±»ä¸­ã€‚</li>
<li>å¯¹è±¡å¯ä»¥æŠŠå…¶æ— æ³•è§£è¯»çš„æ¶ˆæ¯è½¬äº¤ç»™å…¶ä»–å¯¹è±¡æ¥å¤„ç†ã€‚</li>
<li>è‹¥ç»è¿‡ä¸Šè¿°ä¸¤æ­¥è¿˜æ˜¯æ²¡åŠæ³•å¤„ç†æ¶ˆæ¯ï¼Œåˆ™å¯åŠ¨å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€‚</li>
</ul>
<p>è¯¦æƒ…å¯å‚è€ƒ  <a href="http://blog.jobbole.com/79545/" title="Objective-C Runtime" target="_blank" rel="external">Objective-C Runtime</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å…³äºCoreDataå’ŒSQLiteå¤šçº¿ç¨‹è®¿é—®æ—¶çš„çº¿ç¨‹å®‰å…¨é—®é¢˜]]></title>
      <url>http://koalahl.github.io/2015/12/14/%E5%85%B3%E4%BA%8ECoreData%E5%92%8CSQLite%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%AE%BF%E9%97%AE%E6%97%B6%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>æ•°æ®åº“è¯»å–æ“ä½œä¸€èˆ¬éƒ½æ˜¯å¤šçº¿ç¨‹è®¿é—®çš„ã€‚åœ¨å¯¹æ•°æ®è¿›è¡Œè¯»å–æ—¶ï¼Œæˆ‘ä»¬è¦ä¿è¯å…¶å½“å‰çŠ¶æ€ä¸èƒ½è¢«ä¿®æ”¹ï¼Œå³è¯»å–æ—¶åŠ é”ï¼Œå¦åˆ™å°±ä¼šå‡ºç°æ•°æ®é”™è¯¯æ··ä¹±ã€‚<br>IOSä¸­å¸¸ç”¨çš„ä¸¤ç§æ•°æ®æŒä¹…åŒ–å­˜å‚¨æ–¹å¼ï¼šCoreDataå’ŒSQLiteï¼Œä¸¤è€…éƒ½éœ€è¦è®¾ç½®çº¿ç¨‹å®‰å…¨ï¼Œåœ¨è¿™é‡Œä»¥FMDBæ¥è§£é‡Šå¯¹SQLiteçš„çº¿ç¨‹å®‰å…¨è®¿é—®ã€‚</p>
<a id="more"></a>
<h3>ä¸€:FMDBçš„çº¿ç¨‹å®‰å…¨ï¼šï¼ˆä»¥è¯»å–å›¾ç‰‡ä¸ºä¾‹ï¼‰</h3>

<p>1.æ²¡æœ‰çº¿ç¨‹å®‰å…¨çš„æ‰§è¡Œæ–¹å¼ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//************** æ•°æ®åº“ä¿å­˜å›¾ç‰‡  ******************//</span></span><br><span class="line"></span><br><span class="line"> FMDatabase *database = [FMDatabase databaseWithPath:[<span class="keyword">self</span> getDatabasePath]];</span><br><span class="line"></span><br><span class="line"> <span class="comment">//æ‰“å¼€æ•°æ®åº“</span></span><br><span class="line"></span><br><span class="line"> [database open];</span><br><span class="line"></span><br><span class="line"> <span class="built_in">NSString</span> *sql = <span class="string">@"create table if not exists Test (id integer primary key autoincrement,name text,image blob);"</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//åˆ›å»ºè¡¨</span></span><br><span class="line"></span><br><span class="line"> [database executeUpdate:sql];</span><br><span class="line"></span><br><span class="line"> <span class="comment">//æŠŠUIImageå¯¹è±¡è½¬åŒ–ä¸ºNSData</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">NSData</span> *data = <span class="built_in">UIImagePNGRepresentation</span>([<span class="built_in">UIImage</span> imageNamed:<span class="string">@"user_browse"</span>]);    </span><br><span class="line"></span><br><span class="line"> <span class="comment">//å†™å…¥æ•°æ®</span></span><br><span class="line"></span><br><span class="line"> sql = <span class="string">@"insert into Test (name,image) values (?,?)"</span>;</span><br><span class="line"></span><br><span class="line"> [database executeUpdate:sql,<span class="string">@"å¼ ä¸‰"</span>,data];</span><br><span class="line"></span><br><span class="line"> <span class="comment">//è¯»å–æ˜¾ç¤º</span></span><br><span class="line"></span><br><span class="line"> sql = <span class="string">@"select * from Test;"</span>;</span><br><span class="line"></span><br><span class="line"> FMResultSet *resultSet = [database executeQuery:sql];</span><br><span class="line"></span><br><span class="line"> <span class="keyword">while</span> (resultSet<span class="variable">.next</span>)</span><br><span class="line"></span><br><span class="line"> &#123;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//[resultSet dataForColumn:@"image"];</span></span><br><span class="line"></span><br><span class="line">     <span class="built_in">NSData</span> *imageData = [resultSet dataForColumnIndex:<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">     <span class="built_in">UIImageView</span> *imageView = [[<span class="built_in">UIImageView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">300</span>)];</span><br><span class="line"></span><br><span class="line">     imageView<span class="variable">.image</span> = [<span class="built_in">UIImage</span> imageWithData:imageData];</span><br><span class="line"></span><br><span class="line">     [<span class="keyword">self</span><span class="variable">.view</span> addSubview:imageView];</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><br>2ï¼Œä½¿ç”¨çº¿ç¨‹é˜Ÿåˆ—<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//************** æ•°æ®åº“çº¿ç¨‹å®‰å…¨ ***********//</span></span><br><span class="line">    FMDatabaseQueue *queue = [[FMDatabaseQueue alloc] initWithPath:[<span class="keyword">self</span> getDatabasePath]];</span><br><span class="line"></span><br><span class="line">    [queue inDatabase:^(FMDatabase *db) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//çº¿ç¨‹å®‰å…¨çš„</span></span><br><span class="line"></span><br><span class="line">        __block <span class="built_in">NSString</span> *sql = <span class="string">@"create table if not exists Test (id integer primary key autoincrement,name text,image blob);"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºè¡¨</span></span><br><span class="line"></span><br><span class="line">        [database executeUpdate:sql];</span><br><span class="line"></span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ’å…¥æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    [queue inDatabase:^(FMDatabase *db) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å†™å…¥æ•°æ®</span></span><br><span class="line"></span><br><span class="line">        sql = <span class="string">@"insert into Test (name,image) values (?,?)"</span>;</span><br><span class="line"></span><br><span class="line">        [database executeUpdate:sql,<span class="string">@"å¼ ä¸‰"</span>,data];</span><br><span class="line"></span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¯»å–</span></span><br><span class="line">    [queue inDatabase:^(FMDatabase *db) &#123;</span><br><span class="line">        <span class="comment">//è¯»å–æ˜¾ç¤º</span></span><br><span class="line">        sql = <span class="string">@"select * from Test;"</span>;</span><br><span class="line">        FMResultSet *resultSet = [database executeQuery:sql];</span><br><span class="line">        <span class="keyword">while</span> (resultSet<span class="variable">.next</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//[resultSet dataForColumn:@"image"];</span></span><br><span class="line"></span><br><span class="line">            <span class="built_in">NSData</span> *imageData = [resultSet dataForColumnIndex:<span class="number">2</span>];</span><br><span class="line">            <span class="built_in">UIImageView</span> *imageView = [[<span class="built_in">UIImageView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">300</span>)];</span><br><span class="line"></span><br><span class="line">            imageView<span class="variable">.image</span> = [<span class="built_in">UIImage</span> imageWithData:imageData];</span><br><span class="line">            [<span class="keyword">self</span><span class="variable">.view</span> addSubview:imageView];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure></p>
<p>åˆ†æä¸€ä¸‹çº¿ç¨‹å®‰å…¨ä¸‹çš„FMDBçš„å®ç°ï¼š<br>åœ¨å½“ä½¿ç”¨FMDBDatabaseQueueåˆ›å»ºæ•°æ®åº“æ—¶ï¼Œä¼šä½¿ç”¨GCDåˆ›å»ºä¸€ä¸ªçº¿ç¨‹é˜Ÿåˆ—ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ã€‚ã€‚ã€‚</span><br><span class="line"> _queue = dispatch_queue_create([[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"fmdb.%@"</span>, <span class="keyword">self</span>] UTF8String], <span class="literal">NULL</span>);</span><br><span class="line">        dispatch_queue_set_specific(_queue, kDispatchQueueSpecificKey, (__bridge <span class="keyword">void</span> *)<span class="keyword">self</span>, <span class="literal">NULL</span>);</span><br><span class="line">        _openFlags = openFlags;</span><br><span class="line">ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨è¯»å–æ—¶è°ƒç”¨<code>[queue inDatabase:^(FMDatabase *db)</code>æ–¹æ³•ï¼Œåœ¨blockä¸­ä¼šé”å®šå½“å‰æ•°æ®åº“<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dispatch_sync</span>(_queue, ^() &#123;</span><br><span class="line">        FMDatabase *db = [<span class="keyword">self</span> database];</span><br><span class="line">        block(db);</span><br><span class="line">	â€¦â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®é™…ä¸Šè¿™é‡Œæ˜¯å¯¹æ•´ä¸ªæ•°æ®åº“è¿›è¡ŒåŠ é”ï¼Œä»¥æ­¤æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<h3>äºŒã€CoreDataçš„çº¿ç¨‹å®‰å…¨</h3>

<p>1.æ²¡æœ‰çº¿ç¨‹å®‰å…¨çš„coredataæ•°æ®è¯»å–ï¼š</p>
<p>NSManagedObjectContextå¯¹è±¡çš„åˆ›å»ºï¼š<code>_managedObjectContext = [[NSManagedObjectContext alloc] init];</code></p>
<p>æ’å…¥æ•°æ®æ“ä½œï¼šï¼ˆAppDetailModalä¸ºæ•°æ®æ¨¡å‹ï¼‰</p>
<p>context ä¸ºè¿”å›çš„ _managedObjectContext<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AppDetailModal *newapp = [<span class="built_in">NSEntityDescription</span> insertNewObjectForEntityForName:TableName inManagedObjectContext:context];</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä»–æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤æ“ä½œ<br>//è·å–Entity<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSEntityDescription</span> *entity = [<span class="built_in">NSEntityDescription</span> entityForName:TableName inManagedObjectContext:context];</span><br></pre></td></tr></table></figure></p>
<p>2.çº¿ç¨‹å®‰å…¨çš„coreDataæ“ä½œï¼š</p>
<p>é¦–å…ˆåˆ›å»ºå¹¶è¡Œçš„NSManagedObjectContextå¯¹è±¡<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSManagedObjectContext</span>* context=[[<span class="built_in">NSManagedObjectContext</span> alloc] initWithConcurrencyType:<span class="built_in">NSPrivateQueueConcurrencyType</span>];</span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨æ‰§è¡Œè¯»å–æ“ä½œæ—¶ä½¿ç”¨ä¸€ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><p>-(void)performBlock:(void (^)(void))block</p>
</li>
<li><p>-(void)performBlockAndWait:(void (^)(void))block   </p>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[context performBlock:^&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¦æ‰§è¡Œçš„è¯»å–æ“ä½œ</span></span><br><span class="line"></span><br><span class="line"> &#125;];</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ã€ŠiOSå¼€å‘è¿›é˜¶ã€‹é˜…è¯»ç¬”è®°ï¼ˆäºŒï¼‰â€”â€”å¼€å‘æŠ€å·§]]></title>
      <url>http://koalahl.github.io/2015/12/13/%E3%80%8AiOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<h3 id="keyboard">æ”¶èµ·é”®ç›˜</h3>

<p>åœ¨UIViewControllerä¸­æ”¶èµ·é”®ç›˜ï¼Œå¤„äº†è°ƒç”¨ç›¸åº”æ§ä»¶çš„resignFirstResponderæ–¹æ³•å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸‰ç§æ–¹æ³•ï¼š</p>
<ul>
<li>é‡è½½UIViewControllerçš„touchBeginæ–¹æ³•ï¼Œç„¶ååœ¨é‡Œé¢æ‰§è¡Œ<code>[self.view endEditing:YES];</code>,è¿™æ ·å•å‡»UIViewControllerçš„ä»»æ„åœ°æ–¹ï¼Œå°±å¯ä»¥æ”¶èµ·é”®ç›˜ï¼›</li>
<li>ç›´æ¥æ‰§è¡Œ<code>[[UIApplicatoin sharedApplication] sendAction:@selector(resignFirstResponder) to:nil from:nil forEvent:nil];</code>,ç”¨äºåœ¨è·å¾—å½“å‰UIViewControlleræ¯”è¾ƒå›°éš¾çš„æ—¶å€™ä½¿ç”¨ã€‚</li>
<li>ç›´æ¥æ‰§è¡Œ<code>[[[UIApplicatoin sharedApplication] keyWindow] endEditing:YES];</code>ã€‚</li>
</ul>
<a id="more"></a>
<h3 id="json">NSJSONSerializationæ¯”NSKeyedArchiveræ›´å¥½</h3>

<p>åœ¨é€‰æ‹©æŒä¹…åŒ–æ–¹æ¡ˆæ—¶ï¼Œç³»ç»Ÿæä¾›çš„<code>NSJSONSerialization</code>æ¯”<code>NSKeyedArchiver</code>åœ¨æ•ˆç‡å’Œä½“ç§¯ä¸Šéƒ½æ›´ä¼˜ï¼Œæ›´è¯¦ç»†çš„æµ‹è¯•å‚è€ƒï¼š<a href="https://github.com/randomsequence/NSSerialisationTests" target="_blank" rel="external">https://github.com/randomsequence/NSSerialisationTests</a>;</p>
<h3 id="language">è®¾ç½®åº”ç”¨å†…çš„ç³»ç»Ÿæ§ä»¶è¯­è¨€</h3>

<p>åœ¨å·¥ç¨‹çš„info.plistæ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">key</span>&gt;</span>CFBundleLocalizations<span class="tag">&lt;/<span class="title">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">array</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">string</span>&gt;</span>zh_CN<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">string</span>&gt;</span>en<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">array</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="snapshot">å·§ç”¨ç³»ç»Ÿçš„æˆªå±åŠŸèƒ½</h3>

<p>iOS7ä»¥åï¼Œappleæä¾›çš„ç³»ç»Ÿçš„æˆªå±APIï¼š<code>- (UIView *)snapshotViewAfterScreenUpdates:(BOOL)afterUpdates</code>æ¥å®ç°æˆªå±åŠŸèƒ½ã€‚è€Œå¯¹äºiOS7ä»¥å‰çš„ç³»ç»Ÿï¼Œå¯ä»¥ç”¨è¿‡ä»£ç æ¥å®ç°æˆªå±åŠŸèƒ½ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">UIImage</span> *)captureImageFromView:(<span class="built_in">UIView</span> *)view&#123;</span><br><span class="line">	<span class="built_in">CGRect</span> screenRect = [view bounds];</span><br><span class="line">	<span class="built_in">UIGraphicsBeginImageContext</span>(screenRect<span class="variable">.size</span>);</span><br><span class="line">	<span class="built_in">CGContextRef</span> ctx = <span class="built_in">UIGraphicsGetCurrentContext</span>();</span><br><span class="line">	[view<span class="variable">.layer</span> renderInContext:ctx];</span><br><span class="line">	<span class="built_in">UIImage</span> *image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</span><br><span class="line">	<span class="built_in">UIGraphicsEndImageContext</span>();</span><br><span class="line">	<span class="keyword">return</span> image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="js">Javascriptæ–‡ä»¶è®¾ç½®è°ƒæ•´</h3>

<p>Javascriptçš„jsåç¼€çš„æ–‡ä»¶é»˜è®¤è¢«æ‹–åŠ¨åˆ°å·¥ç¨‹ä¸­åï¼Œæ˜¯åœ¨ç¼–è¯‘åˆ—è¡¨ä¸­ï¼Œè€Œä¸æ˜¯èµ„æºåˆ—è¡¨ä¸­ã€‚éœ€è¦æ‰‹åŠ¨è°ƒæ•´æœŸä½ç½®ï¼Œå¦åˆ™å®ƒå°±ä¸èƒ½æ‰“åŒ…åˆ°ipaæ–‡ä»¶ä¸­ã€‚</p>
<p>æ³¨ï¼šxcode7å·²ç»ä¿®æ”¹æ­¤é—®é¢˜ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/img/xcode7_js.png" alt="xcode7_js"></p>
<h3 id="warning">å¿½ç•¥ç¼–è¯‘è­¦å‘Š</h3>

<p>åœ¨Build Phaseä¸­å¯¹åº”çš„æ–‡ä»¶ä¸­æ·»åŠ  <code>-w</code>å‚æ•°ã€‚</p>
<p></p><h3 id="NSLog">å®šåˆ¶NSLog</h3><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#ifdef DEBUG</span></span><br><span class="line"><span class="preprocessor">#define NSLog(args,...) NSLog(@<span class="title">"-%d%s:%@"</span>,__LINE__,__FUNCTION__,[NSString stringWithFormat:(args), ##__VA_ARGS__])</span></span><br><span class="line"><span class="preprocessor">#else</span></span><br><span class="line"><span class="preprocessor">#define NSLog(...)</span></span><br><span class="line"><span class="preprocessor">#endif</span></span><br></pre></td></tr></table></figure><p></p>
<p></p><h3 id="hideNav">å¯¼èˆªæ ä¸Šçš„ä¸€äº›è®¾ç½®</h3><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#21435;&#25481;&#23548;&#33322;&#26639;&#38452;&#24433;&#40657;&#32447;&#12290;setBackGroundImage&#20013;&#20063;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;[UIImage new]&#10;UINavigationBar *navBar = self.navigationController.navigationBar;&#10;[navBar setBackgroundImage:[UIImage imageNamed:@&#34;white_backgroud&#34;] forBarPosition:UIBarPositionAny barMetrics:UIBarMetricsDefault];&#10;[navBar setShadowImage:[UIImage new]];&#10;&#10;&#21435;&#25481;searchBar&#30340;&#38452;&#24433;&#10;[self.searchBar setBackgroundImage:[UIImage new]];</span><br></pre></td></tr></table></figure><p></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ã€ŠiOSå¼€å‘è¿›é˜¶ã€‹é˜…è¯»ç¬”è®°ï¼ˆä¸€ï¼‰å†…å­˜ç®¡ç†é‡Šç–‘]]></title>
      <url>http://koalahl.github.io/2015/12/12/%E3%80%8AiOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E9%87%8A%E7%96%91/</url>
      <content type="html"><![CDATA[<h3 id="arc">ARC</h3>

<p>ARCèƒ½å¤Ÿè§£å†³iOSå¼€å‘ä¸­90%çš„å†…å­˜ç®¡ç†é—®é¢˜ï¼Œä½†æ˜¯å¦å¤–è¿˜æœ‰10%çš„å†…å­˜ç®¡ç†æ˜¯éœ€è¦æ‰‹åŠ¨ç®¡ç†çš„ï¼Œä¸»è¦å°±æ˜¯ä¸åº•å±‚Core Foundationå¯¹è±¡äº¤äº’çš„éƒ¨åˆ†ï¼Œå› ä¸ºåº•å±‚Core Foundationå¯¹è±¡ç”±äºä¸åœ¨ARCçš„ç®¡ç†ä¸‹ã€‚</p>
<p>ä½¿ç”¨ARCéœ€è¦é¢å¤–æ³¨æ„çš„ä¸¤ä¸ªé—®é¢˜ï¼š<br>    1.è¿‡åº¦ä½¿ç”¨blockäº§ç”Ÿçš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚<br>    2.åº•å±‚Core Foundationå¯¹è±¡éœ€è¦æ‰‹åŠ¨è¿›è¡Œå†…å­˜ç®¡ç†ã€‚<br><a id="more"></a></p>
<h3 id="corefoundation">Core Foundationå¯¹è±¡çš„å†…å­˜ç®¡ç†</h3>

<p>åº•å±‚çš„Core Foundationå¯¹è±¡çš„åˆ›å»ºï¼Œå¤§å¤šæ•°ä»¥XxxCreateWithXxxè¿™æ ·çš„æ–¹å¼åˆ›å»ºï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªCFStringRefå¯¹è±¡</span></span><br><span class="line">	<span class="built_in">CFStringRef</span> str = <span class="built_in">CFStringCreateWithCString</span>(k<span class="built_in">CFAllocatorDefault</span>,<span class="string">"hello world"</span>,k<span class="built_in">CFStringEncodingUTF8</span>);</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®å­—é—´è·</span></span><br><span class="line">+ (<span class="built_in">NSAttributedString</span> *)setLabelAttributeString:(<span class="built_in">NSString</span>*)labelText withCharactorSpace:(<span class="built_in">CGFloat</span>)charactorSpace&#123;</span><br><span class="line">    <span class="built_in">NSMutableAttributedString</span> * string =[[<span class="built_in">NSMutableAttributedString</span> alloc]initWithString:labelText];</span><br><span class="line">    <span class="keyword">long</span> number = charactorSpace;</span><br><span class="line">    <span class="built_in">CFNumberRef</span> num = <span class="built_in">CFNumberCreate</span>(k<span class="built_in">CFAllocatorDefault</span>,k<span class="built_in">CFNumberSInt8Type</span>,&amp;number);</span><br><span class="line">    [string addAttribute:(<span class="keyword">id</span>)kCTKernAttributeName value:(__bridge <span class="keyword">id</span>)num range:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>,[string length])];</span><br><span class="line">    <span class="built_in">CFRelease</span>(num);</span><br><span class="line">    <span class="keyword">return</span> string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¯¹äºè¿™ç§å¯¹è±¡çš„ä¿®æ”¹å’Œé‡Šæ”¾ï¼Œéœ€è¦ç›¸åº”çš„ä½¿ç”¨CFRetainå’ŒCFReleaseã€‚<br>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚åœ¨ARCä¸‹ï¼Œæˆ‘ä»¬æœ‰æ—¶éœ€è¦å°†ä¸€ä¸ªCore Foundationå¯¹è±¡è½¬æ¢æˆObjective-Cå¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè½¬æ¢è¿‡ç¨‹ä¸­çš„å¼•ç”¨è®¡æ•°å¦‚ä½•è°ƒæ•´ã€‚è¿™å°±å¼•å…¥äº†ä¸bridgeç›¸å…³çš„å…³é”®å­—ï¼š</p>
<ul>
<li><code>__bridge</code>:åªåšç±»å‹è½¬æ¢ï¼Œä¸ä¿®æ”¹ç›¸å…³å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼ŒåŸæ¥çš„Core Foundationå¯¹è±¡åœ¨ä¸ç”¨æ—¶ï¼Œéœ€è¦è°ƒç”¨CFReleaseæ–¹æ³•ã€‚</li>
<li><code>__bridge_retained</code>:ç±»å‹è½¬æ¢åï¼Œå°†ç›¸å…³å¯¹è±¡çš„å¼•ç”¨è®¡æ•°+1ï¼ŒåŸæ¥çš„Core Foundationå¯¹è±¡åœ¨ä¸ç”¨æ—¶ï¼Œéœ€è¦è°ƒç”¨CFReleaseæ–¹æ³•ã€‚</li>
<li><code>__bridge_transfer</code>:ç±»å‹è½¬æ¢åï¼Œå°†è¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°äº¤ç»™ARCç®¡ç†ï¼ŒCore Foundationå¯¹è±¡åœ¨ä¸ç”¨æ—¶ï¼Œä¸å†éœ€è¦è°ƒç”¨CFReleaseæ–¹æ³•ã€‚</li>
</ul>
<p>æˆ‘ä»¬æ ¹æ®ä¸šåŠ¡é€»è¾‘ï¼Œåˆç†ä½¿ç”¨ä¸Šé¢ä¸‰ç§è½¬æ¢å…³é”®å­—ï¼Œå°±å¯ä»¥è§£å†³Core Foundationå¯¹è±¡ä¸Objcå¯¹è±¡ç›¸äº’è½¬æ¢çš„é—®é¢˜äº†ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘æŠ€æœ¯æ ˆ]]></title>
      <url>http://koalahl.github.io/2015/12/05/iOS%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E6%A0%88/</url>
      <content type="html"><![CDATA[<p>æé†’è‡ªå·±ï¼š</p>
<p></p><h3 id="objc">Objective-C</h3><br>â€¢ objective-cè¯­è¨€åŸºç¡€<br>â€¢ library,frameworkçš„åˆ¶ä½œ<br>â€¢ Runtimeç¼–ç¨‹<br>â€¢ LLVMåŸç†å’Œè°ƒä¼˜<p></p>
<a id="more"></a>
<p></p><h3 id="OS">æ“ä½œç³»ç»Ÿ</h3><br>â€¢ iOSå†…å­˜ç®¡ç†å’Œè°ƒä¼˜<br>â€¢ iOSçš„æ–‡ä»¶ç³»ç»Ÿå’Œæ²™ç›’æœºåˆ¶<br>â€¢ iOSå¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆThread,GCD,NSOperationï¼‰<br>â€¢ iOSç½‘ç»œå’ŒæœåŠ¡å™¨ç¼–ç¨‹ï¼ˆNSURLConnection,NSURLSessionï¼‰<br>â€¢ iOSç³»ç»Ÿçš„å„ç§å®‰å…¨æœºåˆ¶<p></p>
<p></p><h3 id="netpro">ç½‘ç»œç¼–ç¨‹</h3><br>â€¢ iOSç½‘ç»œå‘é€æœºåˆ¶è°ƒæ•´å’Œä¼˜åŒ–ï¼ˆNSURLSessionï¼‰<br>â€¢ Socketç¼–ç¨‹<br>â€¢ç½‘ç»œä¼ è¾“ä¸­çš„å„ç§ä¿éšœ<br>â€¢å¯¹ä¼ è¾“åè®®çš„è°ƒæ•´ä¼˜åŒ–<p></p>
<p></p><h3 id="sql">æ•°æ®åº“&amp;æŒä¹…åŒ–æ–¹æ¡ˆ</h3><br>â€¢ å¸¸è§„æŒä¹…åŒ–æ–¹æ¡ˆï¼ˆKeychain,NSUserDefaults,Sqlite,CoreDataï¼‰<br>â€¢æ•°æ®åº“çš„ä½¿ç”¨å’Œè®¾è®¡ï¼ˆSqliteï¼‰<br>â€¢æ•°æ®ç»“æ„ä¼˜åŒ–ï¼ŒSqlè°ƒä¼˜<p></p>
<p></p><h3 id="graphic">å›¾å½¢å›¾åƒç¼–ç¨‹</h3><br>â€¢ UIKit,Core Animationå’ŒCore Textçš„ç»˜åˆ¶<br>â€¢ Core Graphics, Quartz 2D, Media Player, AV Foundation<br>â€¢ OpenGL ES, GLKit, SpriteKit, SceneKit, Metal<p></p>
<p></p><h3 id="alog">æ•°æ®ç»“æ„ &amp; ç®—æ³•</h3><br>â€¢åŸºæœ¬çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼ˆæ’åºæœç´¢ç®—æ³•, æ•°ç»„, é˜Ÿåˆ—ï¼‰<br>â€¢è¾ƒå¤æ‚æ•°æ®ç»“æ„çš„çµæ´»åº”ç”¨ï¼ˆäºŒå‰æ ‘, å›¾ç­‰ï¼‰<br>â€¢å¤æ‚çš„ä¸“é¡¹ç®—æ³•ï¼ˆå›¾åƒè¯†åˆ«ç®—æ³•, æ‹“æ‰‘å®šä½ç­‰ç­‰ï¼‰<p></p>
<p></p><h3 id="safe">å®‰å…¨æ–¹æ¡ˆ</h3><br>â€¢ æœ¬åœ°æ•°æ®å­˜å‚¨å®‰å…¨ï¼ˆKeychainï¼‰<br>â€¢æˆæƒå’Œèº«ä»½éªŒè¯<br>â€¢ä¼ è¾“å®‰å…¨ï¼ˆå¯¹ç§°, éå¯¹ç§°, SSLï¼‰<br>â€¢ Appä»£ç å®‰å…¨<p></p>
<p></p><h3 id="bussiness">ä¸šåŠ¡èƒ½åŠ›</h3><br>â€¢ä¸€èˆ¬æ€§ä¸šåŠ¡åŠŸèƒ½éœ€æ±‚åˆ†æåŠå®ç°<br>â€¢é‡è¦ä¸šåŠ¡æ¨¡å—çš„éœ€æ±‚åˆ†æåŠå®ç°<br>â€¢ä¸­å°è§„æ¨¡äº§å“çš„æ¶æ„ï¼Œç³»ç»Ÿè®¾è®¡å’Œå®ç°<br>â€¢å¤§è§„æ¨¡äº§å“æˆ–äº§å“çº¿çš„æ¶æ„ï¼Œç³»ç»Ÿè®¾è®¡å’Œå®ç°<br>â€¢å¹³å°çº§äº§å“çš„æ¶æ„ï¼Œç³»ç»Ÿè®¾è®¡å’Œå®ç°<p></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSä¸­å¤„ç†å››èˆäº”å…¥çš„é—®é¢˜]]></title>
      <url>http://koalahl.github.io/2015/12/05/iOS%E4%B8%AD%E5%A4%84%E7%90%86%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>å¤„ç†å››èˆäº”å…¥ä¸»è¦ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="built_in">NSString</span> *)notRounding:(<span class="keyword">float</span>)price afterPoint:(<span class="keyword">int</span>)position&#123;</span><br><span class="line">Â Â Â Â <span class="built_in">NSDecimalNumberHandler</span>* roundingBehavior = [<span class="built_in">NSDecimalNumberHandler</span> decimalNumberHandlerWithRoundingMode:<span class="built_in">NSRoundDown</span> scale:position raiseOnExactness:<span class="literal">NO</span> raiseOnOverflow:<span class="literal">NO</span> raiseOnUnderflow:<span class="literal">NO</span> raiseOnDivideByZero:<span class="literal">NO</span>];</span><br><span class="line">Â Â Â Â <span class="built_in">NSDecimalNumber</span> *ouncesDecimal;</span><br><span class="line">Â Â Â Â <span class="built_in">NSDecimalNumber</span> *roundedOunces;</span><br><span class="line">Â Â Â Â </span><br><span class="line">Â Â Â Â ouncesDecimal = [[<span class="built_in">NSDecimalNumber</span> alloc] initWithFloat:price];</span><br><span class="line">Â Â Â Â roundedOunces = [ouncesDecimal decimalNumberByRoundingAccordingToBehavior:roundingBehavior];</span><br><span class="line">Â Â Â Â [ouncesDecimal release];</span><br><span class="line">Â Â Â Â <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@"</span>,roundedOunces];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä»‹ç»ä¸€ä¸‹å‚æ•°ï¼š<br><code>price</code>:éœ€è¦å¤„ç†çš„æ•°å­—ï¼Œ<br><code>position</code>ï¼šä¿ç•™å°æ•°ç‚¹ç¬¬å‡ ä½ï¼Œ<br>ç„¶åè°ƒç”¨<br><blockquote><p>float s =0.126;<br>    NSString *sb = [self notRounding:s afterPoint:2];<br>    NSLog(@â€sb = %@â€,sb);<br>è¾“å‡ºç»“æœä¸ºï¼šsb = 0.12</p>
</blockquote><br>æ¥ä¸‹æ¥ä»‹ç»NSDecimalNumberHandleråˆå§‹åŒ–æ—¶çš„å…³é”®å‚æ•°ï¼šdecimalNumberHandlerWithRoundingModeï¼šNSRoundDownï¼Œ<br><code>NSRoundDown</code>ä»£è¡¨çš„å°±æ˜¯ åªèˆä¸å…¥ã€‚<br>scaleçš„å‚æ•°<code>position</code>ä»£è¡¨ä¿ç•™å°æ•°ç‚¹åå‡ ä½ã€‚</p>
<a id="more"></a>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Categoryæ·»åŠ å±æ€§æ‰€æƒ³åˆ°çš„]]></title>
      <url>http://koalahl.github.io/2015/12/03/Category%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7%E6%89%80%E6%83%B3%E5%88%B0%E7%9A%84/</url>
      <content type="html"><![CDATA[<p>iOSä¸­categoryå’Œextensionç›¸è¾…ç›¸æˆï¼Œé•¿å¾—ä¹Ÿå¾ˆç›¸ä¼¼ã€‚categoryä¸extensionçš„ä¸»è¦åŒºåˆ«ï¼š</p>
<p>Categoryï¼šåˆ†ç±»ã€ç±»åˆ«</p>
<ul>
<li>categoryä¸»è¦ç”¨æ¥å¢åŠ ç±»çš„æ–¹æ³•ï¼Œå¹¶ä¸”é€‚ç”¨äºå­ç±»ã€‚</li>
<li>categoryä¸èƒ½æ·»åŠ å®ä¾‹å˜é‡ï¼ˆè¿™ä¸ªå¹¶ä¸æ˜¯å±æ€§ï¼‰ï¼Œå¯ä»¥æ·»åŠ readonlyçš„å±æ€§ã€‚</li>
<li>å¦‚æœè¦æ·»åŠ readwriteçš„å±æ€§çš„è¯ï¼Œéœ€è¦ç”¨åˆ°runtimeæ–¹æ³•ã€‚</li>
</ul>
<p>Extensionï¼šæ‰©å±•</p>
<ul>
<li>å¯ä»¥å¢åŠ è¢«æ‰©å±•ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚</li>
<li>Extensionå¯ä»¥ç†è§£ä¸ºåŒ¿åç±»åˆ«ã€‚</li>
<li>å®šä¹‰çš„æ–¹æ³•å¿…é¡»åœ¨implementationä¸­å®ç°ã€‚</li>
</ul>
<a id="more"></a>
<p>ä¸‹é¢ä¸»è¦çœ‹çœ‹categoryçš„ä½¿ç”¨ï¼š<br>1.æ·»åŠ readonlyå±æ€§</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UITableViewCell</span> (<span class="title">AccessoryView</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">///åœ¨Cellå³ä¾§æ·»åŠ çš„ä¸€ä¸ªè‡ªå®šä¹‰label</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>,<span class="keyword">readonly</span>)<span class="built_in">UILabel</span> *accessoryLabel;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>,<span class="keyword">readonly</span>)<span class="built_in">UIImageView</span> *accessoryImageView;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>.mæ–‡ä»¶ä¸­é‡å†™getteræ–¹æ³•</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UITableViewCell</span> (<span class="title">AccessoryView</span>)</span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *)accessoryLabel&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">id</span> obj <span class="keyword">in</span> <span class="keyword">self</span><span class="variable">.subviews</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([obj class] == [<span class="built_in">UILabel</span> class]) &#123;</span><br><span class="line">            [obj removeFromSuperview];<span class="comment">//å› ä¸ºaccessoryLabelæ˜¯æ·»åŠ åœ¨cellä¸Šçš„ï¼Œè€Œæ²¡æœ‰åœ¨cell.contentViewä¸Šã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">UILabel</span> * accessoryLabel = [[<span class="built_in">UILabel</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(kWidth-<span class="number">200</span>, <span class="number">0</span>, <span class="number">160</span>, <span class="built_in">CGRectGetHeight</span>(<span class="keyword">self</span><span class="variable">.frame</span>))];</span><br><span class="line">    accessoryLabel<span class="variable">.textColor</span> = [<span class="built_in">UIColor</span> lightGrayColor];</span><br><span class="line">    accessoryLabel<span class="variable">.font</span>      = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">12</span>];</span><br><span class="line">    accessoryLabel<span class="variable">.textAlignment</span> = <span class="built_in">NSTextAlignmentRight</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:accessoryLabel];</span><br><span class="line">    <span class="keyword">return</span>  accessoryLabel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIImageView</span> *)accessoryImageView&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">id</span> obj <span class="keyword">in</span> <span class="keyword">self</span><span class="variable">.subviews</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([obj class] == [<span class="built_in">UIImageView</span> class]) &#123;</span><br><span class="line">            [obj removeFromSuperview];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">UIImageView</span> *accessoryImageView = [[<span class="built_in">UIImageView</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(kWidth-<span class="number">100</span>, <span class="number">10</span>, <span class="number">60</span>, <span class="number">60</span>)];</span><br><span class="line">    accessoryImageView<span class="variable">.layer</span><span class="variable">.cornerRadius</span> = <span class="number">30</span>;</span><br><span class="line">    accessoryImageView<span class="variable">.layer</span><span class="variable">.masksToBounds</span> = <span class="literal">YES</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:accessoryImageView];</span><br><span class="line">    <span class="keyword">return</span> accessoryImageView;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ™®é€šçš„å±æ€§<code>@property (nonatomic,strong)NSString * name;</code>,é‚£ä¹ˆimplementationä¸­ä¼šæŠ¥warningï¼š</p>
<p><img src="/img/category_1.png" alt="category"></p>
<p>2.è¿è¡Œæ—¶æ·»åŠ å±æ€§ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSError</span> (<span class="title">Message</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">copy</span>)<span class="built_in">NSString</span> * errorMsg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>.m</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> * strKey = &amp;strKey;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSError</span> (<span class="title">Message</span>)</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setErrorMsg:(<span class="built_in">NSString</span> *)errorMsg&#123;</span><br><span class="line">    objc_setAssociatedObject(<span class="keyword">self</span>, &amp; strKey, errorMsg, OBJC_ASSO<span class="built_in">CIATION_COPY_NONATOMIC</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)errorMsg&#123;</span><br><span class="line">    <span class="keyword">return</span> objc_getAssociatedObject(<span class="keyword">self</span>, &amp;strKey);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¤§å¤šæ•°æ—¶å€™è¿˜æ˜¯ç”¨çš„categoryè¾ƒå¤šã€‚åé¢ä¼šç»™å‡ºä¸€äº›å¸¸ç”¨çš„ç±»çš„categoryã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Markdownè¯­æ³•å‚è€ƒ]]></title>
      <url>http://koalahl.github.io/2015/11/30/Markdown%E8%AF%AD%E6%B3%95%E5%8F%82%E8%80%83/</url>
      <content type="html"><![CDATA[<p>&lt;&lt; <a href="http://wowubuntu.com" target="_blank" rel="external">è®¿é—® Wow!Ubuntu</a></p>
<p><strong>NOTE:</strong> This is Simplelified  Chinese Edition Document of Markdown Syntax. If you are seeking for English Edition Document. Please refer to <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank" rel="external">Markdown: Syntax</a>.</p>
<p><strong>å£°æ˜ï¼š</strong> è¿™ä»½æ–‡æ¡£æ´¾ç”Ÿ(fork)äº<a href="http://markdown.tw/" target="_blank" rel="external">ç¹ä½“ä¸­æ–‡ç‰ˆ</a>ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†ç¹ä½“è½¬ç®€ä½“å·¥ä½œï¼Œå¹¶è¿›è¡Œäº†é€‚å½“çš„æ¶¦è‰²ã€‚æ­¤æ–‡æ¡£ç”¨ Markdown è¯­æ³•ç¼–å†™ï¼Œä½ å¯ä»¥åˆ°è¿™é‡Œ<a href="http://gitcafe.com/riku/Markdown-Syntax-CN/blob/master/syntax.md" target="_blank" rel="external">æŸ¥çœ‹å®ƒçš„æºæ–‡ä»¶</a>ã€‚ã€Œç¹ä½“ä¸­æ–‡ç‰ˆçš„åŸå§‹æ–‡ä»¶å¯ä»¥<a href="https://github.com/othree/markdown-syntax-zhtw/blob/master/syntax.md" target="_blank" rel="external">æŸ¥çœ‹è¿™é‡Œ</a> ã€‚ã€â€“By @<a href="http://twitter.com/riku" target="_blank" rel="external">riku</a></p>
<p><strong>æ³¨ï¼š</strong> æœ¬é¡¹ç›®æ‰˜ç®¡äº <a href="http://gitcafe.com/riku/Markdown-Syntax-CN/" target="_blank" rel="external">GitCafe</a>ä¸Šï¼Œè¯·é€šè¿‡â€æ´¾ç”Ÿâ€å’Œâ€åˆå¹¶è¯·æ±‚â€æ¥å¸®å¿™æ”¹è¿›æœ¬é¡¹ç›®ã€‚</p>
<h1 id="Markdown_è¯­æ³•è¯´æ˜_(ç®€ä½“ä¸­æ–‡ç‰ˆ)_/_(ç‚¹å‡»æŸ¥çœ‹å¿«é€Ÿå…¥é—¨)">Markdown è¯­æ³•è¯´æ˜ (ç®€ä½“ä¸­æ–‡ç‰ˆ) / (<a href="./basic.html">ç‚¹å‡»æŸ¥çœ‹å¿«é€Ÿå…¥é—¨</a>)</h1><ul>
<li><a href="#overview">æ¦‚è¿°</a><ul>
<li><a href="#philosophy">å®—æ—¨</a></li>
<li><a href="#html">å…¼å®¹ HTML</a></li>
<li><a href="#autoescape">ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬æ¢</a></li>
</ul>
</li>
<li><a href="#block">åŒºå—å…ƒç´ </a><ul>
<li><a href="#p">æ®µè½å’Œæ¢è¡Œ</a></li>
<li><a href="#header">æ ‡é¢˜</a></li>
<li><a href="#blockquote">åŒºå—å¼•ç”¨</a></li>
<li><a href="#list">åˆ—è¡¨</a></li>
<li><a href="#precode">ä»£ç åŒºå—</a></li>
<li><a href="#hr">åˆ†éš”çº¿</a></li>
</ul>
</li>
<li><a href="#span">åŒºæ®µå…ƒç´ </a><ul>
<li><a href="#link">é“¾æ¥</a></li>
<li><a href="#em">å¼ºè°ƒ</a></li>
<li><a href="#code">ä»£ç </a></li>
<li><a href="#img">å›¾ç‰‡</a></li>
</ul>
</li>
<li><a href="#misc">å…¶å®ƒ</a><ul>
<li><a href="#backslash">åæ–œæ </a></li>
<li><a href="#autolink">è‡ªåŠ¨é“¾æ¥</a></li>
</ul>
</li>
<li><a href="#acknowledgement">æ„Ÿè°¢</a></li>
<li><a href="#editor">Markdown å…è´¹ç¼–è¾‘å™¨</a></li>
</ul>
<hr>
<a id="more"></a>
<h2 id="overview">æ¦‚è¿°</h2>

<h3 id="philosophy">å®—æ—¨</h3>

<p>Markdown çš„ç›®æ ‡æ˜¯å®ç°ã€Œæ˜“è¯»æ˜“å†™ã€ã€‚</p>
<p>å¯è¯»æ€§ï¼Œæ— è®ºå¦‚ä½•ï¼Œéƒ½æ˜¯æœ€é‡è¦çš„ã€‚ä¸€ä»½ä½¿ç”¨ Markdown æ ¼å¼æ’°å†™çš„æ–‡ä»¶åº”è¯¥å¯ä»¥ç›´æ¥ä»¥çº¯æ–‡æœ¬å‘å¸ƒï¼Œå¹¶ä¸”çœ‹èµ·æ¥ä¸ä¼šåƒæ˜¯ç”±è®¸å¤šæ ‡ç­¾æˆ–æ˜¯æ ¼å¼æŒ‡ä»¤æ‰€æ„æˆã€‚Markdown è¯­æ³•å—åˆ°ä¸€äº›æ—¢æœ‰ text-to-HTML æ ¼å¼çš„å½±å“ï¼ŒåŒ…æ‹¬ <a href="http://docutils.sourceforge.net/mirror/setext.html" target="_blank" rel="external">Setext</a>ã€<a href="http://www.aaronsw.com/2002/atx/" target="_blank" rel="external">atx</a>ã€<a href="http://textism.com/tools/textile/" target="_blank" rel="external">Textile</a>ã€<a href="http://docutils.sourceforge.net/rst.html" target="_blank" rel="external">reStructuredText</a>ã€<a href="http://www.triptico.com/software/grutatxt.html" target="_blank" rel="external">Grutatext</a> å’Œ <a href="http://ettext.taint.org/doc/" target="_blank" rel="external">EtText</a>ï¼Œè€Œæœ€å¤§çµæ„Ÿæ¥æºå…¶å®æ˜¯çº¯æ–‡æœ¬ç”µå­é‚®ä»¶çš„æ ¼å¼ã€‚</p>
<p>æ€»ä¹‹ï¼Œ Markdown çš„è¯­æ³•å…¨ç”±ä¸€äº›ç¬¦å·æ‰€ç»„æˆï¼Œè¿™äº›ç¬¦å·ç»è¿‡ç²¾æŒ‘ç»†é€‰ï¼Œå…¶ä½œç”¨ä¸€ç›®äº†ç„¶ã€‚æ¯”å¦‚ï¼šåœ¨æ–‡å­—ä¸¤æ—åŠ ä¸Šæ˜Ÿå·ï¼Œçœ‹èµ·æ¥å°±åƒ*å¼ºè°ƒ*ã€‚Markdown çš„åˆ—è¡¨çœ‹èµ·æ¥ï¼Œå—¯ï¼Œå°±æ˜¯åˆ—è¡¨ã€‚Markdown çš„åŒºå—å¼•ç”¨çœ‹èµ·æ¥å°±çœŸçš„åƒæ˜¯å¼•ç”¨ä¸€æ®µæ–‡å­—ï¼Œå°±åƒä½ æ›¾åœ¨ç”µå­é‚®ä»¶ä¸­è§è¿‡çš„é‚£æ ·ã€‚</p>
<h3 id="html">å…¼å®¹ HTML</h3>

<p>Markdown è¯­æ³•çš„ç›®æ ‡æ˜¯ï¼šæˆä¸ºä¸€ç§é€‚ç”¨äºç½‘ç»œçš„<em>ä¹¦å†™</em>è¯­è¨€ã€‚</p>
<p>Markdown å¹¶ä¸æ˜¯æƒ³å–ä»£ HTMLçš„åœ°ä½ï¼Œç”šè‡³æ¥è¿‘å®ƒã€‚å®ƒçš„è¯­æ³•ç§ç±»å¾ˆå°‘ï¼Œåªå¯¹åº” HTML æ ‡è®°çš„ä¸€å°éƒ¨åˆ†ã€‚Markdown çš„æ„æƒ³<em>ä¸æ˜¯</em>è¦ä½¿å¾— HTML æ–‡æ¡£æ›´å®¹æ˜“ä¹¦å†™ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œ HTML å·²ç»å¾ˆå®¹æ˜“å†™äº†ã€‚Markdown çš„ç†å¿µæ˜¯ï¼Œèƒ½è®©æ–‡æ¡£æ›´å®¹æ˜“è¯»ã€å†™å’Œéšæ„æ”¹ã€‚HTML æ˜¯ä¸€ç§<em>å‘å¸ƒ</em>çš„æ ¼å¼ï¼ŒMarkdown æ˜¯ä¸€ç§<em>ä¹¦å†™</em>çš„æ ¼å¼ã€‚å°±è¿™æ ·ï¼ŒMarkdown çš„æ ¼å¼è¯­æ³•åªæ¶µç›–çº¯æ–‡æœ¬å¯ä»¥æ¶µç›–çš„èŒƒå›´ã€‚</p>
<p>ä¸åœ¨ Markdown æ¶µç›–èŒƒå›´ä¹‹å†…çš„æ ‡ç­¾ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£é‡Œé¢ç”¨ HTML æ’°å†™ã€‚ä¸éœ€è¦é¢å¤–æ ‡æ³¨è¿™æ˜¯ HTML æˆ–æ˜¯ Markdownï¼›åªè¦ç›´æ¥åŠ æ ‡ç­¾å°±å¯ä»¥äº†ã€‚</p>
<p>è¦åˆ¶çº¦çš„åªæœ‰ä¸€äº› HTML åŒºå—å…ƒç´ â€•â€•æ¯”å¦‚ <code>&lt;div&gt;</code>ã€<code>&lt;table&gt;</code>ã€<code>&lt;pre&gt;</code>ã€<code>&lt;p&gt;</code> ç­‰æ ‡ç­¾ï¼Œå¿…é¡»åœ¨å‰ååŠ ä¸Šç©ºè¡Œä¸å…¶å®ƒå†…å®¹åŒºéš”å¼€ï¼Œè¿˜è¦æ±‚å®ƒä»¬çš„å¼€å§‹æ ‡ç­¾ä¸ç»“å°¾æ ‡ç­¾ä¸èƒ½ç”¨åˆ¶è¡¨ç¬¦æˆ–ç©ºæ ¼æ¥ç¼©è¿›ã€‚Markdown çš„ç”Ÿæˆå™¨æœ‰è¶³å¤Ÿæ™ºèƒ½ï¼Œä¸ä¼šåœ¨ HTML åŒºå—æ ‡ç­¾å¤–åŠ ä¸Šä¸å¿…è¦çš„ <code>&lt;p&gt;</code> æ ‡ç­¾ã€‚</p>
<p>ä¾‹å­å¦‚ä¸‹ï¼Œåœ¨ Markdown æ–‡ä»¶é‡ŒåŠ ä¸Šä¸€æ®µ HTML è¡¨æ ¼ï¼š</p>
<pre><code>è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ã€‚

<span class="tag">&lt;<span class="title">table</span>&gt;</span>
    <span class="tag">&lt;<span class="title">tr</span>&gt;</span>
        <span class="tag">&lt;<span class="title">td</span>&gt;</span>Foo<span class="tag">&lt;/<span class="title">td</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">tr</span>&gt;</span>
<span class="tag">&lt;/<span class="title">table</span>&gt;</span>

è¿™æ˜¯å¦ä¸€ä¸ªæ™®é€šæ®µè½ã€‚
</code></pre><p>è¯·æ³¨æ„ï¼Œåœ¨ HTML åŒºå—æ ‡ç­¾é—´çš„ Markdown æ ¼å¼è¯­æ³•å°†ä¸ä¼šè¢«å¤„ç†ã€‚æ¯”å¦‚ï¼Œä½ åœ¨ HTML åŒºå—å†…ä½¿ç”¨ Markdown æ ·å¼çš„<code>*å¼ºè°ƒ*</code>ä¼šæ²¡æœ‰æ•ˆæœã€‚</p>
<p>HTML çš„åŒºæ®µï¼ˆè¡Œå†…ï¼‰æ ‡ç­¾å¦‚ <code>&lt;span&gt;</code>ã€<code>&lt;cite&gt;</code>ã€<code>&lt;del&gt;</code> å¯ä»¥åœ¨ Markdown çš„æ®µè½ã€åˆ—è¡¨æˆ–æ˜¯æ ‡é¢˜é‡Œéšæ„ä½¿ç”¨ã€‚ä¾ç…§ä¸ªäººä¹ æƒ¯ï¼Œç”šè‡³å¯ä»¥ä¸ç”¨ Markdown æ ¼å¼ï¼Œè€Œç›´æ¥é‡‡ç”¨ HTML æ ‡ç­¾æ¥æ ¼å¼åŒ–ã€‚ä¸¾ä¾‹è¯´æ˜ï¼šå¦‚æœæ¯”è¾ƒå–œæ¬¢ HTML çš„ <code>&lt;a&gt;</code> æˆ– <code>&lt;img&gt;</code> æ ‡ç­¾ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ ‡ç­¾ï¼Œè€Œä¸ç”¨ Markdown æä¾›çš„é“¾æ¥æˆ–æ˜¯å›¾åƒæ ‡ç­¾è¯­æ³•ã€‚</p>
<p>å’Œå¤„åœ¨ HTML åŒºå—æ ‡ç­¾é—´ä¸åŒï¼ŒMarkdown è¯­æ³•åœ¨ HTML åŒºæ®µæ ‡ç­¾é—´æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<h3 id="autoescape">ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬æ¢</h3>

<p>åœ¨ HTML æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªå­—ç¬¦éœ€è¦ç‰¹æ®Šå¤„ç†ï¼š <code>&lt;</code> å’Œ <code>&amp;</code> ã€‚ <code>&lt;</code> ç¬¦å·ç”¨äºèµ·å§‹æ ‡ç­¾ï¼Œ<code>&amp;</code> ç¬¦å·åˆ™ç”¨äºæ ‡è®° HTML å®ä½“ï¼Œå¦‚æœä½ åªæ˜¯æƒ³è¦æ˜¾ç¤ºè¿™äº›å­—ç¬¦çš„åŸå‹ï¼Œä½ å¿…é¡»è¦ä½¿ç”¨å®ä½“çš„å½¢å¼ï¼Œåƒæ˜¯ <code>&amp;lt;</code> å’Œ <code>&amp;amp;</code>ã€‚</p>
<p><code>&amp;</code> å­—ç¬¦å°¤å…¶è®©ç½‘ç»œæ–‡æ¡£ç¼–å†™è€…å—æŠ˜ç£¨ï¼Œå¦‚æœä½ è¦æ‰“ã€Œ<code>AT&amp;T</code>ã€ ï¼Œä½ å¿…é¡»è¦å†™æˆã€Œ<code>AT&amp;amp;T</code>ã€ã€‚è€Œç½‘å€ä¸­çš„ <code>&amp;</code> å­—ç¬¦ä¹Ÿè¦è½¬æ¢ã€‚æ¯”å¦‚ä½ è¦é“¾æ¥åˆ°ï¼š</p>
<pre><code><span class="string">http:</span><span class="comment">//images.google.com/images?num=30&amp;q=larry+bird</span>
</code></pre><p>ä½ å¿…é¡»è¦æŠŠç½‘å€è½¬æ¢å†™ä¸ºï¼š</p>
<pre><code><span class="string">http:</span><span class="comment">//images.google.com/images?num=30&amp;amp;q=larry+bird</span>
</code></pre><p>æ‰èƒ½æ”¾åˆ°é“¾æ¥æ ‡ç­¾çš„ <code>href</code> å±æ€§é‡Œã€‚ä¸ç”¨è¯´ä¹ŸçŸ¥é“è¿™å¾ˆå®¹æ˜“å¿½ç•¥ï¼Œè¿™ä¹Ÿå¯èƒ½æ˜¯ HTML æ ‡å‡†æ£€éªŒæ‰€æ£€æŸ¥åˆ°çš„é”™è¯¯ä¸­ï¼Œæ•°é‡æœ€å¤šçš„ã€‚</p>
<p>Markdown è®©ä½ å¯ä»¥è‡ªç„¶åœ°ä¹¦å†™å­—ç¬¦ï¼Œéœ€è¦è½¬æ¢çš„ç”±å®ƒæ¥å¤„ç†å¥½äº†ã€‚å¦‚æœä½ ä½¿ç”¨çš„ <code>&amp;</code> å­—ç¬¦æ˜¯ HTML å­—ç¬¦å®ä½“çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä¼šä¿ç•™åŸçŠ¶ï¼Œå¦åˆ™å®ƒä¼šè¢«è½¬æ¢æˆ <code>&amp;amp</code>;ã€‚</p>
<p>æ‰€ä»¥ä½ å¦‚æœè¦åœ¨æ–‡æ¡£ä¸­æ’å…¥ä¸€ä¸ªç‰ˆæƒç¬¦å· <code>Â©</code>ï¼Œä½ å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code>&amp;<span class="keyword">copy</span>;
</code></pre><p>Markdown ä¼šä¿ç•™å®ƒä¸åŠ¨ã€‚è€Œè‹¥ä½ å†™ï¼š</p>
<pre><code><span class="built_in">AT</span>&amp;T
</code></pre><p>Markdown å°±ä¼šå°†å®ƒè½¬ä¸ºï¼š</p>
<pre><code>AT&amp;amp<span class="comment">;T</span>
</code></pre><p>ç±»ä¼¼çš„çŠ¶å†µä¹Ÿä¼šå‘ç”Ÿåœ¨ <code>&lt;</code> ç¬¦å·ä¸Šï¼Œå› ä¸º Markdown å…è®¸ <a href="#html">å…¼å®¹ HTML</a> ï¼Œå¦‚æœä½ æ˜¯æŠŠ <code>&lt;</code> ç¬¦å·ä½œä¸º HTML æ ‡ç­¾çš„å®šç•Œç¬¦ä½¿ç”¨ï¼Œé‚£ Markdown ä¹Ÿä¸ä¼šå¯¹å®ƒåšä»»ä½•è½¬æ¢ï¼Œä½†æ˜¯å¦‚æœä½ å†™ï¼š</p>
<pre><code><span class="number">4</span> &lt; <span class="number">5</span>
</code></pre><p>Markdown å°†ä¼šæŠŠå®ƒè½¬æ¢ä¸ºï¼š</p>
<pre><code><span class="number">4</span> &amp;lt; <span class="number">5</span>
</code></pre><p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œcode èŒƒå›´å†…ï¼Œä¸è®ºæ˜¯è¡Œå†…è¿˜æ˜¯åŒºå—ï¼Œ <code>&lt;</code> å’Œ <code>&amp;</code> ä¸¤ä¸ªç¬¦å·éƒ½<em>ä¸€å®š</em>ä¼šè¢«è½¬æ¢æˆ HTML å®ä½“ï¼Œè¿™é¡¹ç‰¹æ€§è®©ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ Markdown å†™ HTML code ï¼ˆå’Œ HTML ç›¸å¯¹è€Œè¨€ï¼Œ HTML è¯­æ³•ä¸­ï¼Œä½ è¦æŠŠæ‰€æœ‰çš„ <code>&lt;</code> å’Œ <code>&amp;</code> éƒ½è½¬æ¢ä¸º HTML å®ä½“ï¼Œæ‰èƒ½åœ¨ HTML æ–‡ä»¶é‡Œé¢å†™å‡º HTML codeã€‚ï¼‰</p>
<hr>
<h2 id="block">åŒºå—å…ƒç´ </h2>


<h3 id="p">æ®µè½å’Œæ¢è¡Œ</h3>

<p>ä¸€ä¸ª Markdown æ®µè½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„æ–‡æœ¬è¡Œç»„æˆï¼Œå®ƒçš„å‰åè¦æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç©ºè¡Œï¼ˆç©ºè¡Œçš„å®šä¹‰æ˜¯æ˜¾ç¤ºä¸Šçœ‹èµ·æ¥åƒæ˜¯ç©ºçš„ï¼Œä¾¿ä¼šè¢«è§†ä¸ºç©ºè¡Œã€‚æ¯”æ–¹è¯´ï¼Œè‹¥æŸä¸€è¡ŒåªåŒ…å«ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œåˆ™è¯¥è¡Œä¹Ÿä¼šè¢«è§†ä¸ºç©ºè¡Œï¼‰ã€‚æ™®é€šæ®µè½ä¸è¯¥ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦æ¥ç¼©è¿›ã€‚</p>
<p>ã€Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„æ–‡æœ¬è¡Œç»„æˆã€è¿™å¥è¯å…¶å®æš—ç¤ºäº† Markdown å…è®¸æ®µè½å†…çš„å¼ºè¿«æ¢è¡Œï¼ˆæ’å…¥æ¢è¡Œç¬¦ï¼‰ï¼Œè¿™ä¸ªç‰¹æ€§å’Œå…¶ä»–å¤§éƒ¨åˆ†çš„ text-to-HTML æ ¼å¼ä¸ä¸€æ ·ï¼ˆåŒ…æ‹¬ Movable Type çš„ã€ŒConvert Line Breaksã€é€‰é¡¹ï¼‰ï¼Œå…¶å®ƒçš„æ ¼å¼ä¼šæŠŠæ¯ä¸ªæ¢è¡Œç¬¦éƒ½è½¬æˆ <code>&lt;br /&gt;</code> æ ‡ç­¾ã€‚</p>
<p>å¦‚æœä½ <em>ç¡®å®</em>æƒ³è¦ä¾èµ– Markdown æ¥æ’å…¥ <code>&lt;br /&gt;</code> æ ‡ç­¾çš„è¯ï¼Œåœ¨æ’å…¥å¤„å…ˆæŒ‰å…¥ä¸¤ä¸ªä»¥ä¸Šçš„ç©ºæ ¼ç„¶åå›è½¦ã€‚</p>
<p>çš„ç¡®ï¼Œéœ€è¦å¤šè´¹ç‚¹äº‹ï¼ˆå¤šåŠ ç©ºæ ¼ï¼‰æ¥äº§ç”Ÿ <code>&lt;br /&gt;</code> ï¼Œä½†æ˜¯ç®€å•åœ°ã€Œæ¯ä¸ªæ¢è¡Œéƒ½è½¬æ¢ä¸º <code>&lt;br /&gt;</code>ã€çš„æ–¹æ³•åœ¨ Markdown ä¸­å¹¶ä¸é€‚åˆï¼Œ Markdown ä¸­ email å¼çš„ <a href="#blockquote">åŒºå—å¼•ç”¨</a> å’Œå¤šæ®µè½çš„ <a href="#list">åˆ—è¡¨</a> åœ¨ä½¿ç”¨æ¢è¡Œæ¥æ’ç‰ˆçš„æ—¶å€™ï¼Œä¸ä½†æ›´å¥½ç”¨ï¼Œè¿˜æ›´æ–¹ä¾¿é˜…è¯»ã€‚</p>
<h3 id="header">æ ‡é¢˜</h3>

<p>Markdown æ”¯æŒä¸¤ç§æ ‡é¢˜çš„è¯­æ³•ï¼Œç±» <a href="http://docutils.sourceforge.net/mirror/setext.html" target="_blank" rel="external">Setext</a> å’Œç±» <a href="http://www.aaronsw.com/2002/atx/" target="_blank" rel="external">atx</a> å½¢å¼ã€‚</p>
<p>ç±» Setext å½¢å¼æ˜¯ç”¨åº•çº¿çš„å½¢å¼ï¼Œåˆ©ç”¨ <code>=</code> ï¼ˆæœ€é«˜é˜¶æ ‡é¢˜ï¼‰å’Œ <code>-</code> ï¼ˆç¬¬äºŒé˜¶æ ‡é¢˜ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code><span class="header">This is an H1
=============</span>

<span class="header">This is an H2
-------------</span>
</code></pre><p>ä»»ä½•æ•°é‡çš„ <code>=</code> å’Œ <code>-</code> éƒ½å¯ä»¥æœ‰æ•ˆæœã€‚</p>
<p>ç±» Atx å½¢å¼åˆ™æ˜¯åœ¨è¡Œé¦–æ’å…¥ 1 åˆ° 6 ä¸ª <code>#</code> ï¼Œå¯¹åº”åˆ°æ ‡é¢˜ 1 åˆ° 6 é˜¶ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code><span class="preprocessor"># è¿™æ˜¯ H1</span>

<span class="preprocessor">## è¿™æ˜¯ H2</span>

<span class="preprocessor">###### è¿™æ˜¯ H6</span>
</code></pre><p>ä½ å¯ä»¥é€‰æ‹©æ€§åœ°ã€Œé—­åˆã€ç±» atx æ ·å¼çš„æ ‡é¢˜ï¼Œè¿™çº¯ç²¹åªæ˜¯ç¾è§‚ç”¨çš„ï¼Œè‹¥æ˜¯è§‰å¾—è¿™æ ·çœ‹èµ·æ¥æ¯”è¾ƒèˆ’é€‚ï¼Œä½ å°±å¯ä»¥åœ¨è¡Œå°¾åŠ ä¸Š <code>#</code>ï¼Œè€Œè¡Œå°¾çš„ <code>#</code> æ•°é‡ä¹Ÿä¸ç”¨å’Œå¼€å¤´ä¸€æ ·ï¼ˆè¡Œé¦–çš„äº•å­—ç¬¦æ•°é‡å†³å®šæ ‡é¢˜çš„é˜¶æ•°ï¼‰ï¼š</p>
<pre><code><span class="preprocessor"># è¿™æ˜¯ H1 #</span>

<span class="preprocessor">## è¿™æ˜¯ H2 ##</span>

<span class="preprocessor">### è¿™æ˜¯ H3 ######</span>
</code></pre><h3 id="blockquote">åŒºå—å¼•ç”¨ Blockquotes</h3>

<p>Markdown æ ‡è®°åŒºå—å¼•ç”¨æ˜¯ä½¿ç”¨ç±»ä¼¼ email ä¸­ç”¨ <code>&gt;</code> çš„å¼•ç”¨æ–¹å¼ã€‚å¦‚æœä½ è¿˜ç†Ÿæ‚‰åœ¨ email ä¿¡ä»¶ä¸­çš„å¼•è¨€éƒ¨åˆ†ï¼Œä½ å°±çŸ¥é“æ€ä¹ˆåœ¨ Markdown æ–‡ä»¶ä¸­å»ºç«‹ä¸€ä¸ªåŒºå—å¼•ç”¨ï¼Œé‚£ä¼šçœ‹èµ·æ¥åƒæ˜¯ä½ è‡ªå·±å…ˆæ–­å¥½è¡Œï¼Œç„¶ååœ¨æ¯è¡Œçš„æœ€å‰é¢åŠ ä¸Š <code>&gt;</code> ï¼š</p>
<pre><code>&gt; This is a blockquote with two paragraphs. Lo<span class="comment">rem ipsum dolor sit amet,</span>
&gt; consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.
&gt; Vestibulum enim wisi, viverra nec, fringilla <span class="flow">in</span>, laoreet vitae, risus.
&gt; 
&gt; Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse
&gt; id sem consectetuer libero luctus adipiscing.
</code></pre><p>Markdown ä¹Ÿå…è®¸ä½ å·æ‡’åªåœ¨æ•´ä¸ªæ®µè½çš„ç¬¬ä¸€è¡Œæœ€å‰é¢åŠ ä¸Š <code>&gt;</code> ï¼š</p>
<pre><code>&gt; This is a blockquote with two paragraphs. Lo<span class="comment">rem ipsum dolor sit amet,</span>
consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.
Vestibulum enim wisi, viverra nec, fringilla <span class="flow">in</span>, laoreet vitae, risus.

&gt; Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse
id sem consectetuer libero luctus adipiscing.
</code></pre><p>åŒºå—å¼•ç”¨å¯ä»¥åµŒå¥—ï¼ˆä¾‹å¦‚ï¼šå¼•ç”¨å†…çš„å¼•ç”¨ï¼‰ï¼Œåªè¦æ ¹æ®å±‚æ¬¡åŠ ä¸Šä¸åŒæ•°é‡çš„ <code>&gt;</code> ï¼š</p>
<pre><code>&gt; This <span class="keyword">is</span> <span class="keyword">the</span> <span class="keyword">first</span> level <span class="keyword">of</span> quoting.
&gt;
&gt; &gt; This <span class="keyword">is</span> nested blockquote.
&gt;
&gt; Back <span class="keyword">to</span> <span class="keyword">the</span> <span class="keyword">first</span> level.
</code></pre><p>å¼•ç”¨çš„åŒºå—å†…ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ Markdown è¯­æ³•ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç åŒºå—ç­‰ï¼š</p>
<pre><code>&gt; <span class="comment">## è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜ã€‚</span>
&gt; 
&gt; <span class="number">1</span>.   è¿™æ˜¯ç¬¬ä¸€è¡Œåˆ—è¡¨é¡¹ã€‚
&gt; <span class="number">2</span>.   è¿™æ˜¯ç¬¬äºŒè¡Œåˆ—è¡¨é¡¹ã€‚
&gt; 
&gt; ç»™å‡ºä¸€äº›ä¾‹å­ä»£ç ï¼š
&gt; 
&gt;     <span class="built_in">return</span> shell_<span class="built_in">exec</span>(<span class="string">"echo <span class="variable">$input</span> | <span class="variable">$markdown_script</span>"</span>);
</code></pre><p>ä»»ä½•åƒæ ·çš„æ–‡æœ¬ç¼–è¾‘å™¨éƒ½èƒ½è½»æ¾åœ°å»ºç«‹ email å‹çš„å¼•ç”¨ã€‚ä¾‹å¦‚åœ¨ BBEdit ä¸­ï¼Œä½ å¯ä»¥é€‰å–æ–‡å­—åç„¶åä»é€‰å•ä¸­é€‰æ‹©<em>å¢åŠ å¼•ç”¨é˜¶å±‚</em>ã€‚</p>
<h3 id="list">åˆ—è¡¨</h3>

<p>Markdown æ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚</p>
<p>æ— åºåˆ—è¡¨ä½¿ç”¨æ˜Ÿå·ã€åŠ å·æˆ–æ˜¯å‡å·ä½œä¸ºåˆ—è¡¨æ ‡è®°ï¼š</p>
<pre><code><span class="bullet">*   </span>Red
<span class="bullet">*   </span>Green
<span class="bullet">*   </span>Blue
</code></pre><p>æ•ˆæœå°±æ˜¯</p>
<ul>
<li>red</li>
<li>green</li>
<li>blue</li>
</ul>
<p>ç­‰åŒäºï¼š</p>
<pre><code><span class="bullet">+   </span>Red
<span class="bullet">+   </span>Green
<span class="bullet">+   </span>Blue
</code></pre><p>ä¹Ÿç­‰åŒäºï¼š</p>
<pre><code>-<span class="ruby">   <span class="constant">Red</span>
</span>-<span class="ruby">   <span class="constant">Green</span>
</span>-<span class="ruby">   <span class="constant">Blue</span></span>
</code></pre><p>æœ‰åºåˆ—è¡¨åˆ™ä½¿ç”¨æ•°å­—æ¥ç€ä¸€ä¸ªè‹±æ–‡å¥ç‚¹ï¼š</p>
<pre><code><span class="number">1.</span>  Bird
<span class="number">2.</span>  McHale
<span class="number">3.</span>  Parish
</code></pre><p>å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œä½ åœ¨åˆ—è¡¨æ ‡è®°ä¸Šä½¿ç”¨çš„æ•°å­—å¹¶ä¸ä¼šå½±å“è¾“å‡ºçš„ HTML ç»“æœï¼Œä¸Šé¢çš„åˆ—è¡¨æ‰€äº§ç”Ÿçš„ HTML æ ‡è®°ä¸ºï¼š</p>
<pre><code><span class="tag">&lt;<span class="title">ol</span>&gt;</span>
<span class="tag">&lt;<span class="title">li</span>&gt;</span>Bird<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;<span class="title">li</span>&gt;</span>McHale<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;<span class="title">li</span>&gt;</span>Parish<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ol</span>&gt;</span>
</code></pre><p>å¦‚æœä½ çš„åˆ—è¡¨æ ‡è®°å†™æˆï¼š</p>
<pre><code><span class="number">1.</span>  Bird
<span class="number">1.</span>  McHale
<span class="number">1.</span>  Parish
</code></pre><p>æˆ–ç”šè‡³æ˜¯ï¼š</p>
<pre><code><span class="number">3.</span> Bird
<span class="number">1.</span> McHale
<span class="number">8.</span> Parish
</code></pre><p>ä½ éƒ½ä¼šå¾—åˆ°å®Œå…¨ç›¸åŒçš„ HTML è¾“å‡ºã€‚é‡ç‚¹åœ¨äºï¼Œä½ å¯ä»¥è®© Markdown æ–‡ä»¶çš„åˆ—è¡¨æ•°å­—å’Œè¾“å‡ºçš„ç»“æœç›¸åŒï¼Œæˆ–æ˜¯ä½ æ‡’ä¸€ç‚¹ï¼Œä½ å¯ä»¥å®Œå…¨ä¸ç”¨åœ¨æ„æ•°å­—çš„æ­£ç¡®æ€§ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨æ‡’æƒ°çš„å†™æ³•ï¼Œå»ºè®®ç¬¬ä¸€ä¸ªé¡¹ç›®æœ€å¥½è¿˜æ˜¯ä» 1. å¼€å§‹ï¼Œå› ä¸º Markdown æœªæ¥å¯èƒ½ä¼šæ”¯æŒæœ‰åºåˆ—è¡¨çš„ start å±æ€§ã€‚</p>
<p>åˆ—è¡¨é¡¹ç›®æ ‡è®°é€šå¸¸æ˜¯æ”¾åœ¨æœ€å·¦è¾¹ï¼Œä½†æ˜¯å…¶å®ä¹Ÿå¯ä»¥ç¼©è¿›ï¼Œæœ€å¤š 3 ä¸ªç©ºæ ¼ï¼Œé¡¹ç›®æ ‡è®°åé¢åˆ™ä¸€å®šè¦æ¥ç€è‡³å°‘ä¸€ä¸ªç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦ã€‚</p>
<p>è¦è®©åˆ—è¡¨çœ‹èµ·æ¥æ›´æ¼‚äº®ï¼Œä½ å¯ä»¥æŠŠå†…å®¹ç”¨å›ºå®šçš„ç¼©è¿›æ•´ç†å¥½ï¼š</p>
<pre><code>*   Lo<span class="comment">rem ipsum dolor sit amet, consectetuer adipiscing elit.</span>
    Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi,
    viverra nec, fringilla <span class="flow">in</span>, laoreet vitae, risus.
*   Donec sit amet nisl. Aliquam semper ipsum sit amet velit.
    Suspendisse id sem consectetuer libero luctus adipiscing.
</code></pre><p>ä½†æ˜¯å¦‚æœä½ æ‡’ï¼Œé‚£ä¹Ÿè¡Œï¼š</p>
<pre><code>*   Lo<span class="comment">rem ipsum dolor sit amet, consectetuer adipiscing elit.</span>
Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi,
viverra nec, fringilla <span class="flow">in</span>, laoreet vitae, risus.
*   Donec sit amet nisl. Aliquam semper ipsum sit amet velit.
Suspendisse id sem consectetuer libero luctus adipiscing.
</code></pre><p>å¦‚æœåˆ—è¡¨é¡¹ç›®é—´ç”¨ç©ºè¡Œåˆ†å¼€ï¼Œåœ¨è¾“å‡º HTML æ—¶ Markdown å°±ä¼šå°†é¡¹ç›®å†…å®¹ç”¨ <code>&lt;p&gt;</code><br>æ ‡ç­¾åŒ…èµ·æ¥ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š</p>
<pre><code><span class="bullet">*   </span>Bird
<span class="bullet">*   </span>Magic
</code></pre><p>ä¼šè¢«è½¬æ¢ä¸ºï¼š</p>
<pre><code><span class="tag">&lt;<span class="title">ul</span>&gt;</span>
<span class="tag">&lt;<span class="title">li</span>&gt;</span>Bird<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;<span class="title">li</span>&gt;</span>Magic<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
</code></pre><p>ä½†æ˜¯è¿™ä¸ªï¼š</p>
<pre><code><span class="bullet">*   </span>Bird

<span class="bullet">*   </span>Magic
</code></pre><p>ä¼šè¢«è½¬æ¢ä¸ºï¼š</p>
<pre><code><span class="tag">&lt;<span class="title">ul</span>&gt;</span>
<span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">p</span>&gt;</span>Bird<span class="tag">&lt;/<span class="title">p</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">p</span>&gt;</span>Magic<span class="tag">&lt;/<span class="title">p</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
</code></pre><p>åˆ—è¡¨é¡¹ç›®å¯ä»¥åŒ…å«å¤šä¸ªæ®µè½ï¼Œæ¯ä¸ªé¡¹ç›®ä¸‹çš„æ®µè½éƒ½å¿…é¡»ç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦ï¼š</p>
<pre><code><span class="number">1</span>.  This is a list item with two paragraphs. Lo<span class="comment">rem ipsum dolor</span>
    sit amet, consectetuer adipiscing elit. Aliquam hendrerit
    mi posuere lectus.

    Vestibulum enim wisi, viverra nec, fringilla <span class="flow">in</span>, laoreet
    vitae, risus. Donec sit amet nisl. Aliquam semper ipsum
    sit amet velit.

<span class="number">2</span>.  Suspendisse id sem consectetuer libero luctus adipiscing.
</code></pre><p>å¦‚æœä½ æ¯è¡Œéƒ½æœ‰ç¼©è¿›ï¼Œçœ‹èµ·æ¥ä¼šçœ‹å¥½å¾ˆå¤šï¼Œå½“ç„¶ï¼Œå†æ¬¡åœ°ï¼Œå¦‚æœä½ å¾ˆæ‡’æƒ°ï¼ŒMarkdown ä¹Ÿå…è®¸ï¼š</p>
<pre><code>*   This <span class="keyword">is</span> a <span class="type">list</span> <span class="property">item</span> <span class="keyword">with</span> two <span class="property">paragraphs</span>.

    This <span class="keyword">is</span> <span class="keyword">the</span> <span class="keyword">second</span> <span class="property">paragraph</span> <span class="keyword">in</span> <span class="keyword">the</span> <span class="type">list</span> <span class="property">item</span>. You're
only required <span class="keyword">to</span> indent <span class="keyword">the</span> <span class="keyword">first</span> line. Lorem ipsum dolor
sit amet, consectetuer adipiscing elit.

*   Another <span class="property">item</span> <span class="keyword">in</span> <span class="keyword">the</span> same <span class="type">list</span>.
</code></pre><p>å¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›å¼•ç”¨ï¼Œé‚£ <code>&gt;</code> å°±éœ€è¦ç¼©è¿›ï¼š</p>
<pre><code>*   A <span class="type">list</span> <span class="property">item</span> <span class="keyword">with</span> a blockquote:

    &gt; This <span class="keyword">is</span> a blockquote
    &gt; inside a <span class="type">list</span> <span class="property">item</span>.
</code></pre><p>å¦‚æœè¦æ”¾ä»£ç åŒºå—çš„è¯ï¼Œè¯¥åŒºå—å°±éœ€è¦ç¼©è¿›<em>ä¸¤æ¬¡</em>ï¼Œä¹Ÿå°±æ˜¯ 8 ä¸ªç©ºæ ¼æˆ–æ˜¯ 2 ä¸ªåˆ¶è¡¨ç¬¦ï¼š</p>
<pre><code><span class="keyword">*</span>   ä¸€åˆ—è¡¨é¡¹åŒ…å«ä¸€ä¸ªåˆ—è¡¨åŒºå—ï¼š

        <span class="variable">&lt;ä»£ç å†™åœ¨è¿™&gt;</span>
</code></pre><p>å½“ç„¶ï¼Œé¡¹ç›®åˆ—è¡¨å¾ˆå¯èƒ½ä¼šä¸å°å¿ƒäº§ç”Ÿï¼Œåƒæ˜¯ä¸‹é¢è¿™æ ·çš„å†™æ³•ï¼š</p>
<pre><code><span class="number">1986</span>. What <span class="tag">a</span> great season.
</code></pre><p>æ¢å¥è¯è¯´ï¼Œä¹Ÿå°±æ˜¯åœ¨è¡Œé¦–å‡ºç°<em>æ•°å­—-å¥ç‚¹-ç©ºç™½</em>ï¼Œè¦é¿å…è¿™æ ·çš„çŠ¶å†µï¼Œä½ å¯ä»¥åœ¨å¥ç‚¹å‰é¢åŠ ä¸Šåæ–œæ ã€‚</p>
<pre><code><span class="number">1986</span>\. What <span class="tag">a</span> great season.
</code></pre><h3 id="precode">ä»£ç åŒºå—</h3>

<p>å’Œç¨‹åºç›¸å…³çš„å†™ä½œæˆ–æ˜¯æ ‡ç­¾è¯­è¨€åŸå§‹ç é€šå¸¸ä¼šæœ‰å·²ç»æ’ç‰ˆå¥½çš„ä»£ç åŒºå—ï¼Œé€šå¸¸è¿™äº›åŒºå—æˆ‘ä»¬å¹¶ä¸å¸Œæœ›å®ƒä»¥ä¸€èˆ¬æ®µè½æ–‡ä»¶çš„æ–¹å¼å»æ’ç‰ˆï¼Œè€Œæ˜¯ç…§åŸæ¥çš„æ ·å­æ˜¾ç¤ºï¼ŒMarkdown ä¼šç”¨ <code>&lt;pre&gt;</code> å’Œ <code>&lt;code&gt;</code> æ ‡ç­¾æ¥æŠŠä»£ç åŒºå—åŒ…èµ·æ¥ã€‚</p>
<p>è¦åœ¨ Markdown ä¸­å»ºç«‹ä»£ç åŒºå—å¾ˆç®€å•ï¼Œåªè¦ç®€å•åœ°ç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦å°±å¯ä»¥ï¼Œä¾‹å¦‚ï¼Œä¸‹é¢çš„è¾“å…¥ï¼š</p>
<pre><code>è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ï¼š

    è¿™æ˜¯ä¸€ä¸ªä»£ç åŒºå—ã€‚
</code></pre><p>Markdown ä¼šè½¬æ¢æˆï¼š</p>
<pre><code><span class="tag">&lt;<span class="title">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ï¼š<span class="tag">&lt;/<span class="title">p</span>&gt;</span>

<span class="tag">&lt;<span class="title">pre</span>&gt;</span><span class="tag">&lt;<span class="title">code</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªä»£ç åŒºå—ã€‚
<span class="tag">&lt;/<span class="title">code</span>&gt;</span><span class="tag">&lt;/<span class="title">pre</span>&gt;</span>
</code></pre><p>è¿™ä¸ªæ¯è¡Œä¸€é˜¶çš„ç¼©è¿›ï¼ˆ4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦ï¼‰ï¼Œéƒ½ä¼šè¢«ç§»é™¤ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>Here <span class="keyword">is</span> an example <span class="keyword">of</span> <span class="constant">AppleScript</span>:

    <span class="keyword">tell</span> <span class="type">application</span> <span class="string">"Foo"</span>
        <span class="command">beep</span>
    <span class="keyword">end</span> <span class="keyword">tell</span>
</code></pre><p>ä¼šè¢«è½¬æ¢ä¸ºï¼š</p>
<pre><code>&lt;p&gt;Here <span class="keyword">is</span> an example <span class="keyword">of</span> <span class="constant">AppleScript</span>:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;<span class="keyword">tell</span> <span class="type">application</span> <span class="string">"Foo"</span>
    <span class="command">beep</span>
<span class="keyword">end</span> <span class="keyword">tell</span>
&lt;/code&gt;&lt;/pre&gt;
</code></pre><p>ä¸€ä¸ªä»£ç åŒºå—ä¼šä¸€ç›´æŒç»­åˆ°æ²¡æœ‰ç¼©è¿›çš„é‚£ä¸€è¡Œï¼ˆæˆ–æ˜¯æ–‡ä»¶ç»“å°¾ï¼‰ã€‚</p>
<p>åœ¨ä»£ç åŒºå—é‡Œé¢ï¼Œ <code>&amp;</code> ã€ <code>&lt;</code> å’Œ <code>&gt;</code> ä¼šè‡ªåŠ¨è½¬æˆ HTML å®ä½“ï¼Œè¿™æ ·çš„æ–¹å¼è®©ä½ éå¸¸å®¹æ˜“ä½¿ç”¨ Markdown æ’å…¥èŒƒä¾‹ç”¨çš„ HTML åŸå§‹ç ï¼Œåªéœ€è¦å¤åˆ¶è´´ä¸Šï¼Œå†åŠ ä¸Šç¼©è¿›å°±å¯ä»¥äº†ï¼Œå‰©ä¸‹çš„ Markdown éƒ½ä¼šå¸®ä½ å¤„ç†ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"footer"</span>&gt;
    &amp;<span class="keyword">copy</span>; <span class="number">2004</span> Foo Corporation
&lt;/<span class="keyword">div</span>&gt;
</code></pre><p>ä¼šè¢«è½¬æ¢ä¸ºï¼š</p>
<pre><code>&lt;<span class="keyword">pre</span>&gt;&lt;code&gt;&amp;<span class="keyword">lt</span>;div class=<span class="string">"footer"</span>&amp;gt;
    &amp;amp;<span class="built_in">copy</span>; <span class="number">2004</span> Foo Corporation
&amp;<span class="keyword">lt</span>;/div&amp;gt;
&lt;/code&gt;&lt;/<span class="keyword">pre</span>&gt;
</code></pre><p>ä»£ç åŒºå—ä¸­ï¼Œä¸€èˆ¬çš„ Markdown è¯­æ³•ä¸ä¼šè¢«è½¬æ¢ï¼Œåƒæ˜¯æ˜Ÿå·ä¾¿åªæ˜¯æ˜Ÿå·ï¼Œè¿™è¡¨ç¤ºä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ä»¥ Markdown è¯­æ³•æ’°å†™ Markdown è¯­æ³•ç›¸å…³çš„æ–‡ä»¶ã€‚</p>
<h3 id="hr">åˆ†éš”çº¿</h3>

<p>ä½ å¯ä»¥åœ¨ä¸€è¡Œä¸­ç”¨ä¸‰ä¸ªä»¥ä¸Šçš„æ˜Ÿå·ã€å‡å·ã€åº•çº¿æ¥å»ºç«‹ä¸€ä¸ªåˆ†éš”çº¿ï¼Œè¡Œå†…ä¸èƒ½æœ‰å…¶ä»–ä¸œè¥¿ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨æ˜Ÿå·æˆ–æ˜¯å‡å·ä¸­é—´æ’å…¥ç©ºæ ¼ã€‚ä¸‹é¢æ¯ç§å†™æ³•éƒ½å¯ä»¥å»ºç«‹åˆ†éš”çº¿ï¼š</p>
<pre><code><span class="keyword">*</span> <span class="keyword">*</span> <span class="keyword">*</span>

<span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>

<span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>

- - -

---------------------------------------
</code></pre><hr>
<h2 id="span">åŒºæ®µå…ƒç´ </h2>

<h3 id="link">é“¾æ¥</h3>

<p>Markdown æ”¯æŒä¸¤ç§å½¢å¼çš„é“¾æ¥è¯­æ³•ï¼š <em>è¡Œå†…å¼</em>å’Œ<em>å‚è€ƒå¼</em>ä¸¤ç§å½¢å¼ã€‚</p>
<p>ä¸ç®¡æ˜¯å“ªä¸€ç§ï¼Œé“¾æ¥æ–‡å­—éƒ½æ˜¯ç”¨ [æ–¹æ‹¬å·] æ¥æ ‡è®°ã€‚</p>
<p>è¦å»ºç«‹ä¸€ä¸ª<em>è¡Œå†…å¼</em>çš„é“¾æ¥ï¼Œåªè¦åœ¨æ–¹å—æ‹¬å·åé¢ç´§æ¥ç€åœ†æ‹¬å·å¹¶æ’å…¥ç½‘å€é“¾æ¥å³å¯ï¼Œå¦‚æœä½ è¿˜æƒ³è¦åŠ ä¸Šé“¾æ¥çš„ title æ–‡å­—ï¼Œåªè¦åœ¨ç½‘å€åé¢ï¼Œç”¨åŒå¼•å·æŠŠ title æ–‡å­—åŒ…èµ·æ¥å³å¯ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>This is [<span class="link_label">an example</span>](<span class="link_url">http://example.com/ "Title"</span>) inline link.

[<span class="link_label">This link</span>](<span class="link_url">http://example.net/</span>) has no title attribute.
</code></pre><p>ä¼šäº§ç”Ÿï¼š</p>
<pre><code><span class="tag">&lt;<span class="title">p</span>&gt;</span>This is <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"http://example.com/"</span> <span class="attribute">title</span>=<span class="value">"Title"</span>&gt;</span>
an example<span class="tag">&lt;/<span class="title">a</span>&gt;</span> inline link.<span class="tag">&lt;/<span class="title">p</span>&gt;</span>

<span class="tag">&lt;<span class="title">p</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"http://example.net/"</span>&gt;</span>This link<span class="tag">&lt;/<span class="title">a</span>&gt;</span> has no
title attribute.<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
</code></pre><p>å¦‚æœä½ æ˜¯è¦é“¾æ¥åˆ°åŒæ ·ä¸»æœºçš„èµ„æºï¼Œä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼š</p>
<pre><code>See my [<span class="link_label">About</span>](<span class="link_url">/about/</span>) page for details.   
</code></pre><p><em>å‚è€ƒå¼</em>çš„é“¾æ¥æ˜¯åœ¨é“¾æ¥æ–‡å­—çš„æ‹¬å·åé¢å†æ¥ä¸Šå¦ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œè€Œåœ¨ç¬¬äºŒä¸ªæ–¹æ‹¬å·é‡Œé¢è¦å¡«å…¥ç”¨ä»¥è¾¨è¯†é“¾æ¥çš„æ ‡è®°ï¼š</p>
<pre><code>This is [<span class="link_label">an example</span>][<span class="link_reference">id</span>] reference-style link.
</code></pre><p>ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æ€§åœ°åœ¨ä¸¤ä¸ªæ–¹æ‹¬å·ä¸­é—´åŠ ä¸Šä¸€ä¸ªç©ºæ ¼ï¼š</p>
<pre><code>This <span class="keyword">is</span> [an example] [<span class="property">id</span>] <span class="keyword">reference</span>-style link.
</code></pre><p>æ¥ç€ï¼Œåœ¨æ–‡ä»¶çš„ä»»æ„å¤„ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªæ ‡è®°çš„é“¾æ¥å†…å®¹å®šä¹‰å‡ºæ¥ï¼š</p>
<pre><code>[<span class="link_reference">id</span>]:<span class="link_url"> http://example.com/  "Optional Title Here"</span>
</code></pre><p>é“¾æ¥å†…å®¹å®šä¹‰çš„å½¢å¼ä¸ºï¼š</p>
<ul>
<li>æ–¹æ‹¬å·ï¼ˆå‰é¢å¯ä»¥é€‰æ‹©æ€§åœ°åŠ ä¸Šè‡³å¤šä¸‰ä¸ªç©ºæ ¼æ¥ç¼©è¿›ï¼‰ï¼Œé‡Œé¢è¾“å…¥é“¾æ¥æ–‡å­—</li>
<li>æ¥ç€ä¸€ä¸ªå†’å·</li>
<li>æ¥ç€ä¸€ä¸ªä»¥ä¸Šçš„ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦</li>
<li>æ¥ç€é“¾æ¥çš„ç½‘å€</li>
<li>é€‰æ‹©æ€§åœ°æ¥ç€ title å†…å®¹ï¼Œå¯ä»¥ç”¨å•å¼•å·ã€åŒå¼•å·æˆ–æ˜¯æ‹¬å¼§åŒ…ç€</li>
</ul>
<p>ä¸‹é¢è¿™ä¸‰ç§é“¾æ¥çš„å®šä¹‰éƒ½æ˜¯ç›¸åŒï¼š</p>
<pre><code>[<span class="link_reference">foo</span>]:<span class="link_url"> http://example.com/  "Optional Title Here"</span>
[<span class="link_reference">foo</span>]:<span class="link_url"> http://example.com/  'Optional Title Here'</span>
[<span class="link_reference">foo</span>]:<span class="link_url"> http://example.com/  (Optional Title Here)</span>
</code></pre><p><strong>è¯·æ³¨æ„ï¼š</strong>æœ‰ä¸€ä¸ªå·²çŸ¥çš„é—®é¢˜æ˜¯ Markdown.pl 1.0.1 ä¼šå¿½ç•¥å•å¼•å·åŒ…èµ·æ¥çš„é“¾æ¥ titleã€‚</p>
<p>é“¾æ¥ç½‘å€ä¹Ÿå¯ä»¥ç”¨å°–æ‹¬å·åŒ…èµ·æ¥ï¼š</p>
<pre><code>[<span class="link_reference">id</span>]:<span class="link_url"> &lt;http://example.com/&gt;  "Optional Title Here"</span>
</code></pre><p>ä½ ä¹Ÿå¯ä»¥æŠŠ title å±æ€§æ”¾åˆ°ä¸‹ä¸€è¡Œï¼Œä¹Ÿå¯ä»¥åŠ ä¸€äº›ç¼©è¿›ï¼Œè‹¥ç½‘å€å¤ªé•¿çš„è¯ï¼Œè¿™æ ·ä¼šæ¯”è¾ƒå¥½çœ‹ï¼š</p>
<pre><code>[id]<span class="symbol">:</span> <span class="symbol">http:</span>/<span class="regexp">/example.com/longish</span><span class="regexp">/path/to</span><span class="regexp">/resource/here</span>
    <span class="string">"Optional Title Here"</span>
</code></pre><p>ç½‘å€å®šä¹‰åªæœ‰åœ¨äº§ç”Ÿé“¾æ¥çš„æ—¶å€™ç”¨åˆ°ï¼Œå¹¶ä¸ä¼šç›´æ¥å‡ºç°åœ¨æ–‡ä»¶ä¹‹ä¸­ã€‚</p>
<p>é“¾æ¥è¾¨åˆ«æ ‡ç­¾å¯ä»¥æœ‰å­—æ¯ã€æ•°å­—ã€ç©ºç™½å’Œæ ‡ç‚¹ç¬¦å·ï¼Œä½†æ˜¯å¹¶<em>ä¸</em>åŒºåˆ†å¤§å°å†™ï¼Œå› æ­¤ä¸‹é¢ä¸¤ä¸ªé“¾æ¥æ˜¯ä¸€æ ·çš„ï¼š</p>
<pre><code>[<span class="link_label">link text</span>][<span class="link_reference">a</span>]
[<span class="link_label">link text</span>][<span class="link_reference">A</span>]
</code></pre><p><em>éšå¼é“¾æ¥æ ‡è®°</em>åŠŸèƒ½è®©ä½ å¯ä»¥çœç•¥æŒ‡å®šé“¾æ¥æ ‡è®°ï¼Œè¿™ç§æƒ…å½¢ä¸‹ï¼Œé“¾æ¥æ ‡è®°ä¼šè§†ä¸ºç­‰åŒäºé“¾æ¥æ–‡å­—ï¼Œè¦ç”¨éšå¼é“¾æ¥æ ‡è®°åªè¦åœ¨é“¾æ¥æ–‡å­—åé¢åŠ ä¸Šä¸€ä¸ªç©ºçš„æ–¹æ‹¬å·ï¼Œå¦‚æœä½ è¦è®© â€œGoogleâ€ é“¾æ¥åˆ° google.comï¼Œä½ å¯ä»¥ç®€åŒ–æˆï¼š</p>
<pre><code>[<span class="link_label">Google</span>][<span class="link_reference"></span>]
</code></pre><p>ç„¶åå®šä¹‰é“¾æ¥å†…å®¹ï¼š</p>
<pre><code>[<span class="link_reference">Google</span>]:<span class="link_url"> http://google.com/</span>
</code></pre><p>ç”±äºé“¾æ¥æ–‡å­—å¯èƒ½åŒ…å«ç©ºç™½ï¼Œæ‰€ä»¥è¿™ç§ç®€åŒ–å‹çš„æ ‡è®°å†…ä¹Ÿè®¸åŒ…å«å¤šä¸ªå•è¯ï¼š</p>
<pre><code>Visit [<span class="link_label">Daring Fireball</span>][<span class="link_reference"></span>] for more information.
</code></pre><p>ç„¶åæ¥ç€å®šä¹‰é“¾æ¥ï¼š</p>
<pre><code>[<span class="link_reference">Daring Fireball</span>]:<span class="link_url"> http://daringfireball.net/</span>
</code></pre><p>é“¾æ¥çš„å®šä¹‰å¯ä»¥æ”¾åœ¨æ–‡ä»¶ä¸­çš„ä»»ä½•ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ‘æ¯”è¾ƒåå¥½ç›´æ¥æ”¾åœ¨é“¾æ¥å‡ºç°æ®µè½çš„åé¢ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠå®ƒæ”¾åœ¨æ–‡ä»¶æœ€åé¢ï¼Œå°±åƒæ˜¯æ³¨è§£ä¸€æ ·ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå‚è€ƒå¼é“¾æ¥çš„èŒƒä¾‹ï¼š</p>
<pre><code><span class="name">I</span> <span class="atom">get</span> <span class="number">10</span> <span class="atom">times</span> <span class="atom">more</span> <span class="atom">traffic</span> <span class="atom">from</span> [<span class="name">Google</span>] [<span class="number">1</span>] <span class="atom">than</span> <span class="atom">from</span>
[<span class="name">Yahoo</span>] [<span class="number">2</span>] <span class="atom">or</span> [<span class="name">MSN</span>] [<span class="number">3</span>].

  [<span class="number">1</span>]: <span class="atom">http</span>://<span class="atom">google</span>.<span class="atom">com</span>/        <span class="string">"Google"</span>
  [<span class="number">2</span>]: <span class="atom">http</span>://<span class="atom">search</span>.<span class="atom">yahoo</span>.<span class="atom">com</span>/  <span class="string">"Yahoo Search"</span>
  [<span class="number">3</span>]: <span class="atom">http</span>://<span class="atom">search</span>.<span class="atom">msn</span>.<span class="atom">com</span>/    <span class="string">"MSN Search"</span>
</code></pre><p>å¦‚æœæ”¹æˆç”¨é“¾æ¥åç§°çš„æ–¹å¼å†™ï¼š</p>
<pre><code>I get 10 times more traffic from [<span class="link_label">Google</span>][<span class="link_reference"></span>] than from
[<span class="link_label">Yahoo</span>][<span class="link_reference"></span>] or [<span class="link_label">MSN</span>][<span class="link_reference"></span>].

  [google]: http://google.com/        "Google"
  [yahoo]:  http://search.yahoo.com/  "Yahoo Search"
  [msn]:    http://search.msn.com/    "MSN Search"
</code></pre><p>ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½ä¼šäº§ç”Ÿä¸‹é¢çš„ HTMLã€‚</p>
<pre><code>&lt;p&gt;I <span class="built_in">get</span> <span class="number">10</span> times more traffic <span class="built_in">from</span> &lt;<span class="operator">a</span> href=<span class="string">"http://google.com/"</span>
title=<span class="string">"Google"</span>&gt;Google&lt;/<span class="operator">a</span>&gt; than <span class="built_in">from</span>
&lt;<span class="operator">a</span> href=<span class="string">"http://search.yahoo.com/"</span> title=<span class="string">"Yahoo Search"</span>&gt;Yahoo&lt;/<span class="operator">a</span>&gt;
<span class="operator">or</span> &lt;<span class="operator">a</span> href=<span class="string">"http://search.msn.com/"</span> title=<span class="string">"MSN Search"</span>&gt;MSN&lt;/<span class="operator">a</span>&gt;.&lt;/p&gt;
</code></pre><p>ä¸‹é¢æ˜¯ç”¨è¡Œå†…å¼å†™çš„åŒæ ·ä¸€æ®µå†…å®¹çš„ Markdown æ–‡ä»¶ï¼Œæä¾›ä½œä¸ºæ¯”è¾ƒä¹‹ç”¨ï¼š</p>
<pre><code>I get 10 times more traffic from [<span class="link_label">Google</span>](<span class="link_url">http://google.com/ "Google"</span>)
than from [<span class="link_label">Yahoo</span>](<span class="link_url">http://search.yahoo.com/ "Yahoo Search"</span>) or
[<span class="link_label">MSN</span>](<span class="link_url">http://search.msn.com/ "MSN Search"</span>).
</code></pre><p>å‚è€ƒå¼çš„é“¾æ¥å…¶å®é‡ç‚¹ä¸åœ¨äºå®ƒæ¯”è¾ƒå¥½å†™ï¼Œè€Œæ˜¯å®ƒæ¯”è¾ƒå¥½è¯»ï¼Œæ¯”è¾ƒä¸€ä¸‹ä¸Šé¢çš„èŒƒä¾‹ï¼Œä½¿ç”¨å‚è€ƒå¼çš„æ–‡ç« æœ¬èº«åªæœ‰ 81 ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯ç”¨è¡Œå†…å½¢å¼çš„å´ä¼šå¢åŠ åˆ° 176 ä¸ªå­—å…ƒï¼Œå¦‚æœæ˜¯ç”¨çº¯ HTML æ ¼å¼æ¥å†™ï¼Œä¼šæœ‰ 234 ä¸ªå­—å…ƒï¼Œåœ¨ HTML æ ¼å¼ä¸­ï¼Œæ ‡ç­¾æ¯”æ–‡æœ¬è¿˜è¦å¤šã€‚</p>
<p>ä½¿ç”¨ Markdown çš„å‚è€ƒå¼é“¾æ¥ï¼Œå¯ä»¥è®©æ–‡ä»¶æ›´åƒæ˜¯æµè§ˆå™¨æœ€åäº§ç”Ÿçš„ç»“æœï¼Œè®©ä½ å¯ä»¥æŠŠä¸€äº›æ ‡è®°ç›¸å…³çš„å…ƒæ•°æ®ç§»åˆ°æ®µè½æ–‡å­—ä¹‹å¤–ï¼Œä½ å°±å¯ä»¥å¢åŠ é“¾æ¥è€Œä¸è®©æ–‡ç« çš„é˜…è¯»æ„Ÿè§‰è¢«æ‰“æ–­ã€‚</p>
<h3 id="em">å¼ºè°ƒ</h3>

<p>Markdown ä½¿ç”¨æ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰å’Œåº•çº¿ï¼ˆ<code>_</code>ï¼‰ä½œä¸ºæ ‡è®°å¼ºè°ƒå­—è¯çš„ç¬¦å·ï¼Œè¢« <code>*</code> æˆ– <code>_</code> åŒ…å›´çš„å­—è¯ä¼šè¢«è½¬æˆç”¨ <code>&lt;em&gt;</code> æ ‡ç­¾åŒ…å›´ï¼Œç”¨ä¸¤ä¸ª <code>*</code> æˆ– <code>_</code> åŒ…èµ·æ¥çš„è¯ï¼Œåˆ™ä¼šè¢«è½¬æˆ <code>&lt;strong&gt;</code>ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code><span class="keyword">*</span>single asterisks<span class="keyword">*</span>

_single underscores_

<span class="keyword">*</span><span class="keyword">*</span>double asterisks<span class="keyword">*</span><span class="keyword">*</span>

__double underscores__
</code></pre><p>ä¼šè½¬æˆï¼š</p>
<pre><code><span class="tag">&lt;<span class="title">em</span>&gt;</span>single asterisks<span class="tag">&lt;/<span class="title">em</span>&gt;</span>

<span class="tag">&lt;<span class="title">em</span>&gt;</span>single underscores<span class="tag">&lt;/<span class="title">em</span>&gt;</span>

<span class="tag">&lt;<span class="title">strong</span>&gt;</span>double asterisks<span class="tag">&lt;/<span class="title">strong</span>&gt;</span>

<span class="tag">&lt;<span class="title">strong</span>&gt;</span>double underscores<span class="tag">&lt;/<span class="title">strong</span>&gt;</span>
</code></pre><p>ä½ å¯ä»¥éšä¾¿ç”¨ä½ å–œæ¬¢çš„æ ·å¼ï¼Œå”¯ä¸€çš„é™åˆ¶æ˜¯ï¼Œä½ ç”¨ä»€ä¹ˆç¬¦å·å¼€å¯æ ‡ç­¾ï¼Œå°±è¦ç”¨ä»€ä¹ˆç¬¦å·ç»“æŸã€‚</p>
<p>å¼ºè°ƒä¹Ÿå¯ä»¥ç›´æ¥æ’åœ¨æ–‡å­—ä¸­é—´ï¼š</p>
<pre><code>un<span class="keyword">*</span>frigging<span class="keyword">*</span>believable
</code></pre><p>ä½†æ˜¯<strong>å¦‚æœä½ çš„ <code>*</code> å’Œ <code>_</code> ä¸¤è¾¹éƒ½æœ‰ç©ºç™½çš„è¯ï¼Œå®ƒä»¬å°±åªä¼šè¢«å½“æˆæ™®é€šçš„ç¬¦å·</strong>ã€‚</p>
<p>å¦‚æœè¦åœ¨æ–‡å­—å‰åç›´æ¥æ’å…¥æ™®é€šçš„æ˜Ÿå·æˆ–åº•çº¿ï¼Œä½ å¯ä»¥ç”¨åæ–œçº¿ï¼š</p>
<pre><code><span class="string">\*this</span> text <span class="keyword">is</span> surrounded <span class="keyword">by</span> literal asterisks<span class="string">\*</span>
</code></pre><h3 id="code">ä»£ç </h3>

<p>å¦‚æœè¦æ ‡è®°ä¸€å°æ®µè¡Œå†…ä»£ç ï¼Œä½ å¯ä»¥ç”¨åå¼•å·æŠŠå®ƒåŒ…èµ·æ¥ï¼ˆ<code>` </code>ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code><span class="keyword">Use</span> the `printf()` <span class="function"><span class="keyword">function</span>.</span>
</code></pre><p>ä¼šäº§ç”Ÿï¼š</p>
<pre><code><span class="tag">&lt;<span class="title">p</span>&gt;</span>Use the <span class="tag">&lt;<span class="title">code</span>&gt;</span>printf()<span class="tag">&lt;/<span class="title">code</span>&gt;</span> function.<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
</code></pre><p>å¦‚æœè¦åœ¨ä»£ç åŒºæ®µå†…æ’å…¥åå¼•å·ï¼Œä½ å¯ä»¥ç”¨å¤šä¸ªåå¼•å·æ¥å¼€å¯å’Œç»“æŸä»£ç åŒºæ®µï¼š</p>
<pre><code><span class="escape">``</span>There is <span class="literal">a</span> literal backtick (<span class="escape">`)</span> here.<span class="escape">``</span>
</code></pre><p>è¿™æ®µè¯­æ³•ä¼šäº§ç”Ÿï¼š</p>
<pre><code><span class="tag">&lt;<span class="title">p</span>&gt;</span><span class="tag">&lt;<span class="title">code</span>&gt;</span>There is a literal backtick (`) here.<span class="tag">&lt;/<span class="title">code</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span>
</code></pre><p>ä»£ç åŒºæ®µçš„èµ·å§‹å’Œç»“æŸç«¯éƒ½å¯ä»¥æ”¾å…¥ä¸€ä¸ªç©ºç™½ï¼Œèµ·å§‹ç«¯åé¢ä¸€ä¸ªï¼Œç»“æŸç«¯å‰é¢ä¸€ä¸ªï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨åŒºæ®µçš„ä¸€å¼€å§‹å°±æ’å…¥åå¼•å·ï¼š</p>
<pre><code>A single backtick <span class="keyword">in</span> <span class="tag">a</span> <span class="tag">code</span> <span class="tag">span</span>: `` ` ``

A backtick-delimited string <span class="keyword">in</span> <span class="tag">a</span> <span class="tag">code</span> <span class="tag">span</span>: `` `foo` ``
</code></pre><p>ä¼šäº§ç”Ÿï¼š</p>
<pre><code>&lt;p&gt;A single backtick <span class="keyword">in</span> <span class="tag">a</span> <span class="tag">code</span> <span class="tag">span</span>: &lt;code&gt;`&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;A backtick-delimited string <span class="keyword">in</span> <span class="tag">a</span> <span class="tag">code</span> <span class="tag">span</span>: &lt;code&gt;`foo`&lt;/code&gt;&lt;/p&gt;
</code></pre><p>åœ¨ä»£ç åŒºæ®µå†…ï¼Œ<code>&amp;</code> å’Œå°–æ‹¬å·<strong>éƒ½</strong>ä¼šè¢«è‡ªåŠ¨åœ°è½¬æˆ HTML å®ä½“ï¼Œè¿™ä½¿å¾—æ’å…¥ HTML åŸå§‹ç å˜å¾—å¾ˆå®¹æ˜“ï¼ŒMarkdown ä¼šæŠŠä¸‹é¢è¿™æ®µï¼š</p>
<pre><code>Please don't <span class="operator"><span class="keyword">use</span> <span class="keyword">any</span> <span class="string">`&lt;blink&gt;`</span> tags.</span>
</code></pre><p>è½¬ä¸ºï¼š</p>
<pre><code><span class="variable">&lt;p&gt;</span>Please don't use <span class="literal">any</span> <span class="variable">&lt;code&gt;</span>&amp;lt;blink&amp;gt;<span class="variable">&lt;/code&gt;</span> tags.<span class="variable">&lt;/p&gt;</span>
</code></pre><p>ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code>`<span class="javascript">&amp;#<span class="number">8212</span>;</span>` <span class="keyword">is</span> the decimal-encoded equivalent <span class="keyword">of</span> `<span class="javascript">&amp;mdash;</span>`.
</code></pre><p>ä»¥äº§ç”Ÿï¼š</p>
<pre><code><span class="variable">&lt;p&gt;</span><span class="variable">&lt;code&gt;</span>&amp;amp;<span class="comment">#8212;&lt;/code&gt; is the decimal-encoded</span>
equivalent of <span class="variable">&lt;code&gt;</span>&amp;amp;mdash;<span class="variable">&lt;/code&gt;</span>.<span class="variable">&lt;/p&gt;</span>
</code></pre><h3 id="img">å›¾ç‰‡</h3>

<p>å¾ˆæ˜æ˜¾åœ°ï¼Œè¦åœ¨çº¯æ–‡å­—åº”ç”¨ä¸­è®¾è®¡ä¸€ä¸ªã€Œè‡ªç„¶ã€çš„è¯­æ³•æ¥æ’å…¥å›¾ç‰‡æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ã€‚</p>
<p>Markdown ä½¿ç”¨ä¸€ç§å’Œé“¾æ¥å¾ˆç›¸ä¼¼çš„è¯­æ³•æ¥æ ‡è®°å›¾ç‰‡ï¼ŒåŒæ ·ä¹Ÿå…è®¸ä¸¤ç§æ ·å¼ï¼š <em>è¡Œå†…å¼</em>å’Œ<em>å‚è€ƒå¼</em>ã€‚</p>
<p>è¡Œå†…å¼çš„å›¾ç‰‡è¯­æ³•çœ‹èµ·æ¥åƒæ˜¯ï¼š</p>
<pre><code>![<span class="link_label">Alt text</span>](<span class="link_url">/path/to/img.jpg</span>)

![<span class="link_label">Alt text</span>](<span class="link_url">/path/to/img.jpg "Optional title"</span>)
</code></pre><p>è¯¦ç»†å™è¿°å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¸€ä¸ªæƒŠå¹å· <code>!</code></li>
<li>æ¥ç€ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„æ›¿ä»£æ–‡å­—</li>
<li>æ¥ç€ä¸€ä¸ªæ™®é€šæ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„ç½‘å€ï¼Œæœ€åè¿˜å¯ä»¥ç”¨å¼•å·åŒ…ä½å¹¶åŠ ä¸Š<br>é€‰æ‹©æ€§çš„ â€˜titleâ€™ æ–‡å­—ã€‚</li>
</ul>
<p>å‚è€ƒå¼çš„å›¾ç‰‡è¯­æ³•åˆ™é•¿å¾—åƒè¿™æ ·ï¼š</p>
<pre><code>![<span class="link_label">Alt text</span>][<span class="link_reference">id</span>]
</code></pre><p>ã€Œidã€æ˜¯å›¾ç‰‡å‚è€ƒçš„åç§°ï¼Œå›¾ç‰‡å‚è€ƒçš„å®šä¹‰æ–¹å¼åˆ™å’Œé“¾æ¥å‚è€ƒä¸€æ ·ï¼š</p>
<pre><code>[<span class="property">id</span>]: url/<span class="keyword">to</span>/image  <span class="string">"Optional title attribute"</span>
</code></pre><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œ Markdown è¿˜æ²¡æœ‰åŠæ³•æŒ‡å®šå›¾ç‰‡çš„å®½é«˜ï¼Œå¦‚æœä½ éœ€è¦çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨æ™®é€šçš„ <code>&lt;img&gt;</code> æ ‡ç­¾ã€‚</p>
<hr>
<h2 id="misc">å…¶å®ƒ</h2>

<h3 id="autolink">è‡ªåŠ¨é“¾æ¥</h3>

<p>Markdown æ”¯æŒä»¥æ¯”è¾ƒç®€çŸ­çš„è‡ªåŠ¨é“¾æ¥å½¢å¼æ¥å¤„ç†ç½‘å€å’Œç”µå­é‚®ä»¶ä¿¡ç®±ï¼Œåªè¦æ˜¯ç”¨å°–æ‹¬å·åŒ…èµ·æ¥ï¼Œ Markdown å°±ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬æˆé“¾æ¥ã€‚ä¸€èˆ¬ç½‘å€çš„é“¾æ¥æ–‡å­—å°±å’Œé“¾æ¥åœ°å€ä¸€æ ·ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>&lt;<span class="string">http:</span><span class="comment">//example.com/&gt;</span>
</code></pre><p>Markdown ä¼šè½¬ä¸ºï¼š</p>
<pre><code>&lt;<span class="tag">a</span> href=<span class="string">"http://example.com/"</span>&gt;http:<span class="comment">//example.com/&lt;/a&gt;</span>
</code></pre><p>é‚®å€çš„è‡ªåŠ¨é“¾æ¥ä¹Ÿå¾ˆç±»ä¼¼ï¼Œåªæ˜¯ Markdown ä¼šå…ˆåšä¸€ä¸ªç¼–ç è½¬æ¢çš„è¿‡ç¨‹ï¼ŒæŠŠæ–‡å­—å­—ç¬¦è½¬æˆ 16 è¿›ä½ç çš„ HTML å®ä½“ï¼Œè¿™æ ·çš„æ ¼å¼å¯ä»¥ç³Šå¼„ä¸€äº›ä¸å¥½çš„é‚®å€æ”¶é›†æœºå™¨äººï¼Œä¾‹å¦‚ï¼š</p>
<pre><code><span class="tag">&lt;address@example.com&gt;</span>
</code></pre><p>Markdown ä¼šè½¬æˆï¼š</p>
<pre><code>&lt;a href=<span class="string">"&amp;#x6D;&amp;#x61;i&amp;#x6C;&amp;#x74;&amp;#x6F;:&amp;#x61;&amp;#x64;&amp;#x64;&amp;#x72;&amp;#x65;
&amp;#115;&amp;#115;&amp;#64;&amp;#101;&amp;#120;&amp;#x61;&amp;#109;&amp;#x70;&amp;#x6C;e&amp;#x2E;&amp;#99;&amp;#111;
&amp;#109;"</span>&gt;&amp;<span class="title">#x61</span>;&amp;<span class="title">#x64</span>;&amp;<span class="title">#x64</span>;&amp;<span class="title">#x72</span>;&amp;<span class="title">#x65</span>;&amp;<span class="title">#115</span>;&amp;<span class="title">#115</span>;&amp;<span class="title">#64</span>;&amp;<span class="title">#101</span>;&amp;<span class="title">#120</span>;&amp;<span class="title">#x61</span>;
&amp;<span class="title">#109</span>;&amp;<span class="title">#x70</span>;&amp;<span class="title">#x6</span>C;e&amp;<span class="title">#x2</span>E;&amp;<span class="title">#99</span>;&amp;<span class="title">#111</span>;&amp;<span class="title">#109</span>;&lt;/a&gt;
</code></pre><p>åœ¨æµè§ˆå™¨é‡Œé¢ï¼Œè¿™æ®µå­—ä¸²ï¼ˆå…¶å®æ˜¯ <code>&lt;a href=&quot;mailto:address@example.com&quot;&gt;address@example.com&lt;/a&gt;</code>ï¼‰ä¼šå˜æˆä¸€ä¸ªå¯ä»¥ç‚¹å‡»çš„ã€Œaddress@example.comã€é“¾æ¥ã€‚</p>
<p>ï¼ˆè¿™ç§ä½œæ³•è™½ç„¶å¯ä»¥ç³Šå¼„ä¸å°‘çš„æœºå™¨äººï¼Œä½†å¹¶ä¸èƒ½å…¨éƒ¨æŒ¡ä¸‹æ¥ï¼Œä¸è¿‡æ€»æ¯”ä»€ä¹ˆéƒ½ä¸åšå¥½äº›ã€‚ä¸ç®¡æ€æ ·ï¼Œå…¬å¼€ä½ çš„ä¿¡ç®±ç»ˆç©¶ä¼šå¼•æ¥å¹¿å‘Šä¿¡ä»¶çš„ã€‚ï¼‰</p>
<h3 id="backslash">åæ–œæ </h3>

<p>Markdown å¯ä»¥åˆ©ç”¨åæ–œæ æ¥æ’å…¥ä¸€äº›åœ¨è¯­æ³•ä¸­æœ‰å…¶å®ƒæ„ä¹‰çš„ç¬¦å·ï¼Œä¾‹å¦‚ï¼šå¦‚æœä½ æƒ³è¦ç”¨æ˜Ÿå·åŠ åœ¨æ–‡å­—æ—è¾¹çš„æ–¹å¼æ¥åšå‡ºå¼ºè°ƒæ•ˆæœï¼ˆä½†ä¸ç”¨ <code>&lt;em&gt;</code> æ ‡ç­¾ï¼‰ï¼Œä½ å¯ä»¥åœ¨æ˜Ÿå·çš„å‰é¢åŠ ä¸Šåæ–œæ ï¼š</p>
<pre><code>\<span class="keyword">*</span>literal asterisks\<span class="keyword">*</span>
</code></pre><p>Markdown æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·ï¼š</p>
<pre><code>\   åæ–œçº¿
`   åå¼•å·
<span class="bullet">*   </span>æ˜Ÿå·
_   åº•çº¿
{}  èŠ±æ‹¬å·
[]  æ–¹æ‹¬å·
()  æ‹¬å¼§
<span class="header">#   äº•å­—å·</span>
<span class="bullet">+   </span>åŠ å·
<span class="bullet">-   </span>å‡å·
.   è‹±æ–‡å¥ç‚¹
!   æƒŠå¹å·
</code></pre><h2 id="acknowledgement">æ„Ÿè°¢</h2>

<p>æ„Ÿè°¢ <a href="https://twitter.com/#!/leafy7382" target="_blank" rel="external">leafy7382</a> ååŠ©ç¿»è¯‘ï¼Œ<a href="http://iamhlb.com/" target="_blank" rel="external">hlb</a>ã€<a href="http://twitter.com/randylien" target="_blank" rel="external">Randylien</a> å¸®å¿™æ¶¦ç¨¿ï¼Œ<a href="https://twitter.com/#!/ethantw" target="_blank" rel="external">ethantw</a> çš„<a href="http://ethantw.net/projects/han/" target="_blank" rel="external">æ±‰å­—æ ‡å‡†æ ¼å¼ãƒ»CSS Reset</a>ï¼Œ <a href="http://kidwm.net/" target="_blank" rel="external">WM</a> å›æŠ¥æ–‡å­—é”™è¯¯ã€‚</p>
<p>æ„Ÿè°¢ <a href="https://github.com/fenprace" target="_blank" rel="external">fenprace</a>ï¼Œ<a href="https://github.com/addv" target="_blank" rel="external">addv</a>ã€‚</p>
<hr>
<h2 id="editor">Markdown å…è´¹ç¼–è¾‘å™¨</h2>

<p>Windows å¹³å°</p>
<ul>
<li><a href="http://markdownpad.com/" target="_blank" rel="external">MarkdownPad</a></li>
<li><a href="http://code52.org/DownmarkerWPF/" target="_blank" rel="external">MarkPad</a></li>
</ul>
<p>Linux å¹³å°</p>
<ul>
<li><a href="http://sourceforge.net/p/retext/home/ReText/" target="_blank" rel="external">ReText</a></li>
</ul>
<p>Mac å¹³å°</p>
<ul>
<li><a href="http://mouapp.com/" target="_blank" rel="external">Mou</a></li>
</ul>
<p>åœ¨çº¿ç¼–è¾‘å™¨</p>
<ul>
<li><a href="http://markable.in/" target="_blank" rel="external">Markable.in</a></li>
<li><a href="http://dillinger.io/" target="_blank" rel="external">Dillinger.io</a></li>
</ul>
<p>æµè§ˆå™¨æ’ä»¶</p>
<ul>
<li><a href="https://chrome.google.com/webstore/detail/oknndfeeopgpibecfjljjfanledpbkog" target="_blank" rel="external">MaDe</a> (Chrome)</li>
</ul>
<p>é«˜çº§åº”ç”¨</p>
<ul>
<li><a href="http://www.sublimetext.com/2" target="_blank" rel="external">Sublime Text 2</a> + <a href="http://ttscoff.github.com/MarkdownEditing/" target="_blank" rel="external">MarkdownEditing</a> / <a href="http://lucifr.com/2012/07/12/markdownediting-for-sublime-text-2/" target="_blank" rel="external">æ•™ç¨‹</a></li>
</ul>
<p>*** å¦‚æœ‰æ›´å¥½çš„ Markdown å…è´¹ç¼–è¾‘å™¨æ¨èï¼Œè¯·åˆ°<a href="https://gitcafe.com/riku/Markdown-Syntax-CN/tickets/1" target="_blank" rel="external">è¿™é‡Œåé¦ˆ</a>ï¼Œè°¢è°¢ï¼</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å¸¸ç”¨æ’åºç®—æ³•]]></title>
      <url>http://koalahl.github.io/2015/11/30/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>åœ¨æ­¤æ€»ç»“ä¸€ä¸‹å¸¸ç”¨æ’åºç®—æ³•çš„ä»£ç å®ç°</p>
<p><code>#include &lt;iostream&gt;</code><br><code>using namespace std;</code><br><code>typedef int ElemType;</code></p>
<p>/*<br>1ã€æ’å…¥æ’åº<br>ï¼ˆ1ï¼‰ç›´æ¥æ’å…¥æ’åºç®—æ³•<br>ç®—æ³•æ€æƒ³ï¼šå°†ç­‰æ’åºåˆ—åˆ’åˆ†ä¸ºæœ‰åºä¸æ— åºä¸¤éƒ¨åˆ†ï¼Œç„¶åå†ä¾æ¬¡å°†æ— åºéƒ¨åˆ†æ’å…¥åˆ°å·²ç»æœ‰åºçš„éƒ¨åˆ†ï¼Œæœ€å</p>
<p>å°±å¯ä»¥å½¢æˆæœ‰åºåºåˆ—ã€‚<br>æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š<br>1ï¼‰æŸ¥æ‰¾å‡ºå…ƒç´ Lï¼ˆiï¼‰åœ¨è¡¨ä¸­çš„æ’å…¥ä½ç½®Kï¼›<br>2ï¼‰å°†è¡¨ä¸­çš„ç¬¬Kä¸ªå…ƒç´ ä¹‹å‰çš„å…ƒç´ ä¾æ¬¡åç§»ä¸€ä¸ªä½ç½®ï¼›<br>3ï¼‰å°†Lï¼ˆiï¼‰å¤åˆ¶åˆ°Lï¼ˆKï¼‰ã€‚<br> */<br>æ—¶é—´å¤æ‚åº¦ä¸ºï¼šO(n^2)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertSort</span><span class="params">(ElemType arr[], <span class="keyword">int</span> length)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    ElemType guard; <span class="comment">// å“¨å…µ</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; length; ++i)</span><br><span class="line"> &#123;</span><br><span class="line">   <span class="keyword">if</span> (arr[i]() &lt; arr[i-<span class="number">1</span>]()) <span class="comment">// åœ¨æ— åºéƒ¨åˆ†å¯»æ‰¾ä¸€ä¸ªå…ƒç´ ï¼Œä½¿ä¹‹æ’å…¥åˆ°æœ‰åºéƒ¨åˆ†åä»ç„¶æœ‰åº</span></span><br><span class="line"> 	&#123;</span><br><span class="line">	guard = arr[i]();<span class="comment">// å¤åˆ¶åˆ°â€œå“¨å…µâ€</span></span><br><span class="line">	<span class="comment">// å°†ç¬¬iä¸ªå…ƒç´ ä¹‹å‰çš„å…ƒç´ ä¾æ¬¡åç§»ä¸€ä¸ªä½ç½®</span></span><br><span class="line">	<span class="keyword">for</span> (j = i - <span class="number">1</span>; arr[j]() &gt; guard; j--)</span><br><span class="line">	&#123;</span><br><span class="line">		arr[j + <span class="number">1</span>]() = arr[j]();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	arr[j + <span class="number">1</span>]() = guard; <span class="comment">// å¤åˆ¶åˆ°æ’å…¥ä½ç½®</span></span><br><span class="line">	&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>2ã€æŠ˜åŠæ’å…¥æ’åº<br>  ä½¿ç”¨äºæ’åºè¡¨ä¸ºé¡ºåºå­˜å‚¨çš„çº¿æ€§è¡¨<br>  åœ¨æŸ¥æ‰¾æ’å…¥ä½ç½®æ—¶ï¼Œé‡‡ç”¨æŠ˜åŠæŸ¥æ‰¾<br>  ç®—æ³•æ€æƒ³æ˜¯ï¼š<br>  1ï¼‰è®¾ç½®æŠ˜åŠæŸ¥æ‰¾èŒƒå›´ï¼›<br>  2ï¼‰æŠ˜åŠæŸ¥æ‰¾<br>  3ï¼‰ç§»åŠ¨å…ƒç´ <br>  4ï¼‰æ’å…¥å…ƒç´ <br>  5ï¼‰ç»§ç»­æ“ä½œ1ï¼‰ã€2ï¼‰ã€3ï¼‰ã€4ï¼‰æ­¥ï¼Œç›´åˆ°è¡¨æˆæœ‰åºã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BinaryInsertSort</span><span class="params">(ElemType arr[], <span class="keyword">int</span> length)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, low, high, mid;</span><br><span class="line">    ElemType tmp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">1</span>; i &lt; length; ++i )</span><br><span class="line">    &#123;</span><br><span class="line">      tmp = arr[i](); <span class="comment">// å¤åˆ¶åˆ°å“¨å…µ</span></span><br><span class="line">      <span class="comment">// è®¾ç½®æŠ˜åŠæŸ¥æ‰¾èŒƒå›´</span></span><br><span class="line">      low = <span class="number">0</span>;</span><br><span class="line">      high = i;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span> (low &lt;= high) <span class="comment">// æŠ˜åŠæŸ¥æ‰¾</span></span><br><span class="line">      &#123;</span><br><span class="line">        mid = (low + high) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (arr[mid]() &gt; tmp) <span class="comment">// åœ¨å·¦åŠéƒ¨åˆ†æŸ¥æ‰¾</span></span><br><span class="line">        &#123;</span><br><span class="line">          high = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">          low = mid + <span class="number">1</span>; <span class="comment">// åœ¨å³åŠéƒ¨åˆ†æŸ¥æ‰¾</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// ç§»åŠ¨å…ƒç´ </span></span><br><span class="line">      <span class="keyword">for</span> ( j = i - <span class="number">1</span>; j &gt;= high + <span class="number">1</span>; --j )</span><br><span class="line">      &#123;</span><br><span class="line">        arr[j + <span class="number">1</span>]() = arr[j]();</span><br><span class="line">      &#125;</span><br><span class="line">      arr[j + <span class="number">1</span>]() = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>/*<br>3ã€å¸Œå°”(Shell)æ’åº<br>   åŸºæœ¬æ€æƒ³ï¼š<br>   å…ˆå°†å¾…æ’åºçš„è¡¨åˆ†å‰²æˆè‹¥å¹²ä¸ªå½¢è‹¥L[i, i+d, i+2d, â€¦, i+kd]çš„â€œç‰¹æ®Šâ€å­è¡¨ï¼Œåˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œ<br>   å½“æ•´ä¸ªè¡¨å·²å‘ˆâ€œåŸºæœ¬æœ‰åºâ€æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¸€æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚<br>   ç®—æ³•è¿‡ç¨‹ï¼š<br>   1ï¼‰å…ˆå–ä¸€ä¸ªå°äºnçš„æ­¥é•¿d1,æŠŠè¡¨ä¸­å…¨éƒ¨è®°å½•åˆ†æˆd1ä¸ªç»„ï¼Œæ‰€æœ‰è·ç¦»ä¸ºd1çš„å€æ•°çš„è®°å½•æ”¾åœ¨åŒä¸€ç»„ä¸­ï¼Œåœ¨å„<br>  ç»„ä¸­è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼›<br>   2ï¼‰ç„¶åå–ç¬¬äºŒä¸ªæ­¥é•¿d2 \&lt; d1, é‡å¤æ­¥éª¤1<br>   3ï¼‰ç›´åˆ°dk = 1ï¼Œå†è¿›è¡Œæœ€åä¸€æ¬¡ç›´æ¥æ’å…¥æ’åº<br>*/</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShellSort</span><span class="params">(ElemType arr[], <span class="keyword">int</span> length)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, dk = length / <span class="number">2</span>;</span><br><span class="line">    ElemType tmp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (dk &gt;= <span class="number">1</span>)<span class="comment">// æ§åˆ¶æ­¥é•¿</span></span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="keyword">for</span> (i = dk; i &lt; length; ++i)</span><br><span class="line">    	&#123;</span><br><span class="line">      	<span class="keyword">if</span> (arr[i]() &lt; arr[i - dk]())</span><br><span class="line">      	 &#123;</span><br><span class="line">      		tmp = arr[i](); <span class="comment">// æš‚å­˜</span></span><br><span class="line"></span><br><span class="line">      		<span class="comment">// åç§»</span></span><br><span class="line">      		<span class="keyword">for</span> (j = i - dk; j &gt;= <span class="number">0</span> &amp;&amp; tmp &lt; arr[j](); j -= dk)</span><br><span class="line">      		&#123;</span><br><span class="line">      		  arr[j + dk]() = arr[j]();</span><br><span class="line">      		&#125;</span><br><span class="line">          arr[j + dk]() = tmp;</span><br><span class="line">      	&#125;</span><br><span class="line">    	&#125;</span><br><span class="line"></span><br><span class="line">    	dk /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>*<br>4ã€å†’æ³¡æ’åºç®—æ³•<br>   åŸºæœ¬æ€æƒ³ï¼š<br>   å‡è®¾å¾…æ’åºçš„è¡¨é•¿ä¸ºnï¼Œ ä»åå‘å‰æˆ–ä»å‰å‘åä¸¤ä¸¤æ¯”è¾ƒç›¸é‚»å…ƒç´ çš„å€¼ï¼Œè‹¥ä¸ºé€†åºï¼Œåˆ™äº¤æ¢ä¹‹ï¼Œç›´åˆ°åºåˆ—æ¯”è¾ƒå®Œã€‚<br>   è¿™æ ·ä¸€å›å°±ç§°ä¸ºä¸€è¶Ÿå†’æ³¡ã€‚è¿™æ ·å€¼è¾ƒå¤§çš„å…ƒç´ å¾€ä¸‹â€œæ²‰â€ï¼Œè€Œå€¼è¾ƒå°çš„å…ƒç´ å…¥ä¸Šâ€œæµ®â€ã€‚<br>   æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)<br>*/</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BubbleSort</span><span class="params">(ElemType arr[], <span class="keyword">int</span> length)</span></span><br><span class="line"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i, j;</span><br><span class="line">  ElemType tmp;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i \&lt; length - <span class="number">1</span>; ++i)<span class="comment">// è¶Ÿæ¬¡</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">for</span> (j = i + <span class="number">1</span>; j \&lt; length; ++j)</span><br><span class="line">      &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[i]() \&gt; arr[j]())</span><br><span class="line">        &#123;</span><br><span class="line">          tmp = arr[i]();</span><br><span class="line">          arr[i]() = arr[j]();</span><br><span class="line">          arr[j]() = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>/*<br>5ã€å¿«é€Ÿæ’åºç®—æ³•<br>   åŸºæœ¬æ€æƒ³ï¼šåŸºäºåˆ†æ²»æ³•ï¼Œåœ¨å¾…æ’åºçš„nä¸ªå…ƒç´ ä¸­ä»»å–ä¸€ä¸ªå…ƒç´ pivotä½œä¸ºåŸºå‡†ï¼Œé€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’åºè¡¨åˆ’åˆ†ä¸ºç‹¬ç«‹çš„<br>   ä¸¤éƒ¨åˆ†L[1..k-1]å’ŒL[k+1 .. n],ä½¿å¾—ç¬¬ä¸€éƒ¨åˆ†ä¸­çš„æ‰€æœ‰å…ƒç´ å€¼éƒ½å°äºpivotï¼Œè€Œç¬¬äºŒéƒ¨åˆ†ä¸­çš„æ‰€æœ‰å…ƒç´ å€¼éƒ½å¤§äºpivotï¼Œ<br>   åˆ™åŸºå‡†å…ƒç´ æ”¾åœ¨äº†å…¶æœ€ç»ˆä½ç½®Lï¼ˆKï¼‰ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ºä¸€è¶Ÿå¿«é€Ÿæ’åºã€‚è€Œååˆ†åˆ«é€’å½’åœ°å¯¹ä¸¤ä¸ªå­è¡¨é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ¯<br>   éƒ¨åˆ†å†…åªæœ‰ä¸€ä¸ªå…ƒç´ æˆ–ä¸ºç©ºä¸ºæ­¢ï¼Œå³æ‰€æœ‰å…ƒç´ éƒ½æ”¾åœ¨äº†å…¶æœ€ç»ˆä½ç½®ä¸Šã€‚<br>*/</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Partition</span><span class="params">(ElemType arr[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    ElemType pivot = arr[left]; <span class="comment">// ä»¥å½“å‰è¡¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæ¢è½´å€¼</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">while</span> (left \&lt; right)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// ä»å³å‘å·¦æ‰¾ä¸€ä¸ªæ¯”æ¢è½´å€¼å°çš„å…ƒç´ çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">while</span> (left \&lt; right &amp;&amp; arr[right]() \&gt;= pivot)</span><br><span class="line">&#123;</span><br><span class="line">--right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr[left]() = arr[right](); <span class="comment">// å°†æ¯”æ¢è½´å€¼å°çš„å…ƒç´ ç§»åŠ¨åˆ°å·¦ç«¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»å·¦å‘å³æŸ¥æ‰¾æ¯”æ¢è½´å€¼å¤§çš„å…ƒç´ çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">while</span> (left \&lt; right &amp;&amp; arr[left]() \&lt;= pivot)</span><br><span class="line">&#123;</span><br><span class="line">++left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">   arr[right]() = arr[left]();<span class="comment">// å°†æ¯”æ¢è½´å€¼å¤§çš„å…ƒç´ ç§»åŠ¨åˆ°å³ç«¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr[left]() = pivot; <span class="comment">// å°†æ¢è½´å…ƒç´ æ”¾åœ¨æœ€ç»ˆä½ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QuickSort</span><span class="params">(ElemType arr[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (left \&lt; right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> pivotPos = Partition(arr, left, right); <span class="comment">// åˆ’åˆ†</span></span><br><span class="line">        QuickSort(arr, left, pivotPos - <span class="number">1</span>); <span class="comment">// å¿«é€Ÿæ’åºå·¦åŠéƒ¨åˆ†</span></span><br><span class="line">        QuickSort(arr, pivotPos + <span class="number">1</span>, right); <span class="comment">// å¿«é€Ÿæ’åºå³åŠéƒ¨åˆ†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>/*<br>6ã€ç®€å•é€‰æ‹©æ’åºç®—æ³•<br>   åŸºæœ¬æ€æƒ³ï¼š<br>   å‡è®¾æ’åºè¡¨ä¸ºL[1â€¦n],ç¬¬iè¶Ÿæ’åºä»è¡¨ä¸­é€‰æ‹©å…³é”®å­—æœ€å°çš„å…ƒç´ ä¸Liäº¤æ¢ï¼Œç¬¬ä¸€è¶Ÿæ’åºå¯ä»¥ç¡®å®šä¸€ä¸ªå…ƒç´ çš„<br>   æœ€ç»ˆä½ç½®ï¼Œè¿™æ ·ç»è¿‡n-1è¶Ÿæ’åºå°±å¯ä»¥ä½¿å¾—æ•´ä¸ªæ’åºè¡¨æœ‰åºã€‚<br>*/</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SelectSort</span><span class="params">(ElemType arr[], <span class="keyword">int</span> length)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, min;</span><br><span class="line">    ElemType tmp;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (i = <span class="number">0</span>; i \&lt; length - <span class="number">1</span>; ++i) <span class="comment">// éœ€è¦n-1è¶Ÿ</span></span><br><span class="line">&#123;</span><br><span class="line">min = i;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (j = i + <span class="number">1</span>; j \&lt; length; ++j)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[j]() \&lt; arr[min]()) <span class="comment">// æ¯ä¸€è¶Ÿé€‰æ‹©å…ƒç´ å€¼æœ€å°çš„ä¸‹æ ‡</span></span><br><span class="line">&#123;</span><br><span class="line">min = j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (min != i) <span class="comment">// å¦‚æœç¬¬iè¶Ÿçš„Liå…ƒç´ å€¼è¯¥è¶Ÿæ‰¾åˆ°çš„æœ€å°å…ƒç´ å€¼ï¼Œåˆ™äº¤æ¢ï¼Œä»¥ä½¿Liå€¼æœ€å°  	 &#123;</span></span><br><span class="line">tmp = arr[i]();</span><br><span class="line">arr[i]() = arr[min]();</span><br><span class="line">arr[min]() = tmp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>/*<br>7ã€å †æ’åºç®—æ³•<br> å †çš„å®šä¹‰å¦‚ä¸‹ï¼šnä¸ªå…³é”®å­—åºåˆ—å·L<a href="">1..n</a>ç§°ä¸ºå †ï¼Œä»…å½“è¯¥åºåˆ—æ»¡è¶³ï¼š<br>1ï¼‰L(i) \&lt;= L(2i)ä¸”L(i) \&lt;= L(2i+1) æˆ– 2)L(i) >= L(2i)ä¸”L(i) >= L(2i+1)<br>æ»¡è¶³ç¬¬ä¸€ç§æƒ…å†µçš„å †ï¼Œç§°ä¸ºå°æ ¹å †ï¼ˆå°é¡¶å †ï¼‰ï¼›<br>æ»¡è¶³ç¬¬äºŒç§æƒ…å†µçš„å †ï¼Œç§°ä¸ºå¤§æ ¹å †ï¼ˆå¤§é¡¶å †ï¼‰ã€‚<br>*/</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapAdjust</span><span class="params">(ElemType \*a,<span class="keyword">int</span> i,<span class="keyword">int</span> size)</span>  <span class="comment">//è°ƒæ•´å †</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lchild = <span class="number">2</span> \* i;       <span class="comment">//içš„å·¦å­©å­èŠ‚ç‚¹åºå·</span></span><br><span class="line">    <span class="keyword">int</span> rchild = <span class="number">2</span> \* i + <span class="number">1</span>;     <span class="comment">//içš„å³å­©å­èŠ‚ç‚¹åºå·</span></span><br><span class="line">    <span class="keyword">int</span> max = i;            <span class="comment">//ä¸´æ—¶å˜é‡</span></span><br><span class="line">   <span class="keyword">if</span>(i \&lt;= size / <span class="number">2</span>)          <span class="comment">//å¦‚æœiæ˜¯å¶èŠ‚ç‚¹å°±ä¸ç”¨è¿›è¡Œè°ƒæ•´</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (lchild \&lt;= size &amp;&amp; a[lchild]() \&gt; a[max]())</span><br><span class="line">&#123;</span><br><span class="line">max = lchild; <span class="comment">// å·¦å­©å­æ¯”åŒäº²å€¼è¿˜å¤§ï¼Œéœ€è¦è°ƒæ•´</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (rchild \&lt;= size &amp;&amp; a[rchild]() \&gt; a[max]())</span><br><span class="line">&#123;</span><br><span class="line">max = rchild;<span class="comment">// å³å­©å­æ¯”åŒäº²å€¼è¿˜å¤§ï¼Œéœ€è¦è°ƒæ•´</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (max != i) <span class="comment">// éœ€è¦è°ƒæ•´</span></span><br><span class="line">&#123;</span><br><span class="line">ElemType tmp = a[max]();</span><br><span class="line">a[max]() = a[i]();</span><br><span class="line">a[i]() = tmp;</span><br><span class="line"></span><br><span class="line">HeapAdjust(a, max, size);    <span class="comment">//é¿å…è°ƒæ•´ä¹‹åä»¥maxä¸ºçˆ¶èŠ‚ç‚¹çš„å­æ ‘ä¸æ˜¯å †</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BuildHeap</span><span class="params">(ElemType \*a,<span class="keyword">int</span> size)</span>    <span class="comment">//å»ºç«‹å †</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = size / <span class="number">2</span>; i \&gt;= <span class="number">0</span>; i--)    <span class="comment">//éå¶èŠ‚ç‚¹æœ€å¤§åºå·å€¼ä¸ºsize/2</span></span><br><span class="line">    &#123;</span><br><span class="line">        HeapAdjust(a, i, size);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapSort</span><span class="params">(ElemType \*a, <span class="keyword">int</span> size)</span>    <span class="comment">//å †æ’åº</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    BuildHeap(a,size);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = size - <span class="number">1</span>; i \&gt;= <span class="number">0</span>; i--)</span><br><span class="line">&#123;</span><br><span class="line">swap(a[<span class="number">0</span>](), a[i]());           <span class="comment">//äº¤æ¢å †é¡¶å’Œæœ€åä¸€ä¸ªå…ƒç´ ï¼Œå³æ¯æ¬¡å°†å‰©ä½™å…ƒç´ ä¸­çš„æœ€å¤§è€…æ”¾åˆ°æœ€åé¢</span></span><br><span class="line">BuildHeap(a, i-<span class="number">1</span>);        <span class="comment">//å°†ä½™ä¸‹å…ƒç´ é‡æ–°å»ºç«‹ä¸ºå¤§é¡¶å †</span></span><br><span class="line">HeapAdjust(a,<span class="number">1</span>,i-<span class="number">1</span>);      <span class="comment">//é‡æ–°è°ƒæ•´å †é¡¶èŠ‚ç‚¹æˆä¸ºå¤§é¡¶å †</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Display</span><span class="params">(ElemType arr[], <span class="keyword">int</span> length)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i \&lt; length; ++i )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> \&lt;\&lt; arr[i] \&lt;\&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="built_in">cout</span> \&lt;\&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    ElemType arr[] = &#123;<span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">9</span>, -<span class="number">1</span>, <span class="number">4</span>, <span class="number">12</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//InsertSort(arr, sizeof(arr) / sizeof(ElemType));</span></span><br><span class="line"><span class="comment">//BinaryInsertSort(arr, sizeof(arr) / sizeof(ElemType));</span></span><br><span class="line"><span class="comment">//ShellSort(arr, sizeof(arr) / sizeof(ElemType));</span></span><br><span class="line"><span class="comment">//BubbleSort(arr, sizeof(arr) / sizeof(ElemType));</span></span><br><span class="line"><span class="comment">//QuickSort(arr, 0,  sizeof(arr) / sizeof(ElemType) - 1);</span></span><br><span class="line">HeapSort(arr, <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(ElemType));</span><br><span class="line">Display(arr, <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(ElemType));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>http://koalahl.github.io/2015/11/30/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<a id="more"></a>
<h2 id="Quick_Start">Quick Start</h2><h3 id="Create_a_new_post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    </entry>
    
  
  
</search>
