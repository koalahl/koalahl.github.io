<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Thinking in Different">
    

    <!--Author-->
    
        <meta name="author" content="Han Liu">
    

    <!-- Title -->
    
    <title>QRCodeä¸Core Image | å¯’æµâ€˜s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css" type="text/css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Content -->
    <section class="article-container">
<!-- Back Home -->
<a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

<!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>QRCodeä¸Core Image</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Main Content -->
            <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šå…³äºäºŒç»´ç æ–¹é¢çš„æ–‡ç« äº†ï¼Œå†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„æ˜¯å› ä¸ºè¦è®°å½•ä¸€ä¸ªå…³äºä¿å­˜äºŒç»´ç å›¾ç‰‡åˆ°ç›¸å†Œçš„é—®é¢˜ï¼Œé¡ºä¾¿å›é¡¾ä¸€ä¸‹iOSå¼€å‘ä¸­ä½¿ç”¨äºŒç»´ç çš„å†å²ã€‚å¥½äº†ï¼ŒåºŸè¯å°‘è¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h2>è¦è®¨è®ºçš„é—®é¢˜</h2><br>åœ¨å‚è€ƒ<a href="http://www.appcoda.com/qr-code-generator-tutorial/" target="_blank" rel="external">Building a QR Code Generator with Core Image Filters</a>è¿™ç¯‡æ–‡ç« ï¼Œå®Œæˆäº†äºŒç»´ç ç”Ÿæˆçš„æ —å­ã€‚<br>äºŒç»´ç çš„æ‰«æåˆ™æ˜¯ç”¨äº†AVFoundationæ¡†æ¶æ¥ç¼–å†™çš„<a href="https://github.com/koalahl/HLQRCode" target="_blank" rel="external">GithubÂ·HLQRCode</a>ã€‚æœ€åæƒ³æŠŠç”Ÿæˆçš„äºŒç»´ç å›¾ç‰‡ä¿å­˜åˆ°ç›¸å†Œä¸­å´æ²¡æœ‰æˆåŠŸã€‚<br>å‚è€ƒäº†ç½‘ä¸Šçš„ä»£ç ï¼Œä½¿ç”¨äº†CIImag-&gt;CGImage-&gt;writeImageToAlbumçš„æ–¹å¼ã€‚<br><br><a id="more"></a><br>ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CIContext</span> * context = [<span class="built_in">CIContext</span> contextWithOptions:<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">CGImageRef</span> cgimg = [context create<span class="built_in">CGImage</span>:<span class="keyword">self</span><span class="variable">.qrcodeImg</span> fromRect:[<span class="keyword">self</span><span class="variable">.qrcodeImg</span> extent] ];</span><br><span class="line"></span><br><span class="line">ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];</span><br><span class="line">[library writeImageToSavedPhotosAlbum:cgimg metadata:[<span class="keyword">self</span><span class="variable">.qrcodeImg</span> properties] completionBlock:^(<span class="built_in">NSURL</span> *assetURL, <span class="built_in">NSError</span> *error) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(error != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        msg = <span class="string">@"ä¿å­˜å›¾ç‰‡å¤±è´¥"</span> ;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,assetURL);</span><br><span class="line">        msg = <span class="string">@"ä¿å­˜å›¾ç‰‡æˆåŠŸ"</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="literal">nil</span></span><br><span class="line">                                                    message:msg</span><br><span class="line">                                                   delegate:<span class="keyword">self</span></span><br><span class="line">                                          cancelButtonTitle:<span class="string">@"ç¡®å®š"</span></span><br><span class="line">                                          otherButtonTitles:<span class="literal">nil</span>];</span><br><span class="line">    </span><br><span class="line">    [alert show];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><br><br>ä½†æ˜¯è¿™æ ·æ— è®ºæ€ä¹ˆæ ·éƒ½æ— æ³•åœ¨ç›¸å†Œä¸­çœ‹åˆ°ä¿å­˜çš„äºŒç»´ç å›¾ç‰‡ã€‚è¿˜æŠ¥é”™<code>message &quot;BSXPCMessage received error for message: Connection interrupted&quot;</code>ã€‚å¯¹æ¯”å‚è€ƒçš„ä»£ç éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå´æ‰¾ä¸å‡ºåŸå› ã€‚æˆ‘å°±åœ¨æ–‡ç« è¯„è®ºä¸­ç•™è¨€é—®äº†è¿™ä¸ªé—®é¢˜ï¼Œåæ¥ä¸€ä¸ªæœ‹å‹æå‡ºäº†è§£å†³æ–¹æ¡ˆï¼Œä»”ç»†ä¸€çœ‹é¡¿æ—¶æç„¶å¤§æ‚Ÿã€‚<br><br><h2>è§£å†³æ–¹å¼åŠè¦ç‚¹</h2>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CIContext</span> * context = [<span class="built_in">CIContext</span> contextWithOptions:@&#123;k<span class="built_in">CIContextUseSoftwareRenderer</span>:@YES&#125;];</span><br></pre></td></tr></table></figure>
<p>çœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿæ˜¯çš„ï¼Œå¤šäº†ä¸€ä¸ªoptionå‚æ•°<code>kCIContextUseSoftwareRenderer</code>.ç„¶ååœ¨development docä¸­æŸ¥çœ‹äº†å…³äº<code>contextWithOptions</code>æ–¹æ³•çš„æè¿°ï¼š<br>contextWithOptions:<br><blockquote><p>You can create a CPU-based context by providing the key kCIContextUseSoftwareRenderer. A CPU-based context supports larger input and output images than a GPU-based context. It also allows your app to perform processing in the background, such as when saving the rendered output to the Photo Library.</p>
<p>GPU rendering is faster than CPU rendering, but the resulting image is not displayed on the device until after is it copied to CPU memory and converted to another image type, such as a UIImage object.</p>
<footer><strong>@Apple Development Doc</strong><cite><a href="https://developer.apple.com/library/prerelease/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIContext_Class/index.html#//apple_ref/occ/clm/CIContext/contextWithOptions:" target="_blank" rel="external">developer.apple.com/library/prerelease/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIContext_Class/index.html#//apple_ref/occ/clm/CIContext/contextWithOptions:</a></cite></footer></blockquote></p>
<p>é¡¿æ—¶è§‰å¾—è‡ªå·±å½“æ—¶å¥½ç¬¨ï¼Œéƒ½æ²¡æœ‰æƒ³åˆ°å»æŸ¥ä¸€ä¸‹å¼€å‘æ–‡æ¡£ã€‚o(â•¯â–¡â•°)o</p>
<ul>
<li>NSString *kCIContextOutputColorSpace;       - A key for the color space to use for images before they are rendered to the context. ä½¿ç”¨OpenGLES</li>
<li>NSString *kCIContextWorkingColorSpace;      - A key for the color space to use for image operations. ä½¿ç”¨OpenGLES</li>
<li>NSString *kCIContextUseSoftwareRenderer;    - A key for enabling software renderer use. If the associated NSNumber object is YES, then the software renderer is required. ä½¿ç”¨CPU</li>
<li>NSString *kCIContextPriorityRequestLow;     - A key for enabling low-priority GPU use.</li>
<li>NSString *kCIContextWorkingFormat;          - An option for the color format to use for intermediate results when rendering with the context.</li>
</ul>
<p><code>contextWithOptions</code>æ–¹æ³•é»˜è®¤æ˜¯åœ¨GPUä¸Šå¤„ç†å›¾åƒã€‚æ ¹æ®ä¸åŒçš„å‚æ•°è®¾ç½®ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚<br>ä»¥ä¸Šè¿™äº›å…¶å®ä¸æ˜¯å¾ˆç†è§£ï¼Œå›§ã€‚å…·ä½“å‚è€ƒ<a href="https://developer.apple.com/library/prerelease/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIContext_Class/index.html#//apple_ref/doc/constant_group/Context_Options" target="_blank" rel="external">Context Options</a></p>
<p></p><h2>äºŒç»´ç çš„å†å²</h2><br>åœ¨iOS7ä»¥å‰ï¼ŒiOSå¼€å‘ä½¿ç”¨äºŒç»´ç éƒ½æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€‚æ¯”è¾ƒæµè¡Œçš„å°±æ˜¯<code>ZXing</code>å’Œ<code>Zbar</code>äº†ã€‚<br>ä¸è¯´å®ƒä»¬çš„å®ç°åŸç†äº†ï¼Œé‡åˆ°æœ€å¤šçš„é—®é¢˜å°±æ˜¯ä¸å…¶ä»–ç¬¬ä¸‰æ–¹åº“ï¼ˆæ¯”å¦‚æ”¯ä»˜å®SDKï¼Œç™¾åº¦åœ°å›¾SDKï¼‰ç»§æ‰¿åœ¨ä¸€èµ·æ—¶å‡ºç°duplicate symboläº†ã€‚è§£å†³æ–¹æ³•ä¹Ÿå¾ˆéº»çƒ¦ï¼šä¿®æ”¹æºç ï¼Œé‡æ–°ç¼–è¯‘é™æ€åº“.aæ–‡ä»¶ã€‚<p></p>
<p>ä¸è¿‡ç°åœ¨å¾ˆå°‘ç”¨åˆ°äºŒç»´ç äº†ï¼Œè¦ç”¨ä¹Ÿè¦ç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ¡†æ¶å“Ÿ~ï¼</p>
<p></p><h2>æ€»ç»“</h2><br>1.é‡åˆ°é—®é¢˜å…ˆæŸ¥çœ‹å¼€å‘æ–‡æ¡£ï¼Œå†Googleï¼<br>2.ç ”ç©¶é—®é¢˜è¦æ·±å…¥ï¼<br>åé¢å­¦ä¹ ä¸€ä¸‹Core Imageçš„ä¸œè¥¿ï¼Œè¿˜æœ‰ä¸ä¹‹çš„GPUImageåº“ï¼<p></p>
<p></p><h2>å‚è€ƒæ–‡ç« </h2><br><a href="https://developer.apple.com/library/prerelease/ios/documentation/GraphicsImaging/Conceptual/CoreImaging/ci_intro/ci_intro.html#//apple_ref/doc/uid/TP30001185" target="_blank" rel="external">Core Image Programming Guide</a><br><a href="http://stackoverflow.com/questions/26065808/bsxpcmessage-received-error-for-message-connection-interrupted/29872829#29872829" target="_blank" rel="external">BSXPCMessage received error for message: Connection interrupted</a><p></p>
<div align="center"><br>    <img src="http://i3.sinaimg.cn/edu/2015/0724/U1151P42DT20150724094518.jpg" alt="girl"><br></div>

 
                <!-- Meta -->
                <div class="post-meta">
                    <hr>
                    <br>
                    <div class="post-tags">
                        
                            

<a href="/tags/AVFoundation/">#AVFoundation</a> <a href="/tags/CoreImage/">#CoreImage</a> <a href="/tags/QRCode/">#QRCode</a>


                        
                    </div>
                    <div class="post-date">
                        2016 å¹´ 03 æœˆ 05 æ—¥
                    </div>
                </div>
            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- Disqus Comments -->

<div id="disqus_thread" class="comment"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = 'hanangellove';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


            </div>
        </div>
    </div>
</article>
</section>

    <!-- Scripts -->
    <!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript">
	console.log('Hexo-theme-hollow designed by zchen9 ğŸ™‹ Â© 2015-' + (new Date()).getFullYear());
</script>

    <!-- Google Analytics -->
    

</body>

</html>